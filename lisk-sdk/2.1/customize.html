<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lisk Documentation :: Lisk Documentation</title>
    <link rel="canonical" href="https://staging.lisk.io/documentation/lisk-sdk/customize.html">
    <meta name="generator" content="Antora 2.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<!--
    <link href="https://unpkg.com/primer/build/build.css" rel="stylesheet">
-->

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
      <div class="navbar-content">
        <div class="navbar-brand">
          <a href="https://lisk.io/documentation" class="lisk-logo"></a>
          <span  class="nav-brand__name-area">
              <strong class="nav-brand__name-area__title">Lisk Documentation</strong>
          </span>
          <button class="navbar-burger" data-target="topbar-nav">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
            <a class="navbar-item" href="#">Home</a>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Products</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-sdk">Lisk SDK Github</a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-core">Lisk Core Github</a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-hub">Lisk Hub Github</a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-mobile">Lisk Mobile Github</a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-explorer">Lisk Explorer Github</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Services</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" target="_blank" href="https://explorer.lisk.io/">Lisk Mainnet Explorer</a>
                <a class="navbar-item" target="_blank" href="https://testnet-explorer.lisk.io/">Lisk Testnet Explorer</a>
                <a class="navbar-item" target="_blank" href="https://testnet-faucet.lisk.io/">Lisk Testnet Faucet</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="#">Resources</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" target="_blank" href="https://lisk.io">Lisk Website</a>
                <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-sdk-examples">Example blockchain applications</a>
                  <a class="navbar-item" target="_blank" href="https://www.liskdiscovery.com/">Community tools</a>
              </div>
            </div>
            <div class="navbar-item">
              <span class="control">
                <a class="button is-primary" href="https://lisk.io">Back to lisk.io</a>
              </span>
            </div>
          </div>
        </div>
      </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="2.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="introduction.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="setup.html">Setup</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="customize.html">Customize</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Lisk Commander</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lisk-commander/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lisk-commander/user-guide.html">User Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-commander/user-guide/commands.html">Command Reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-commander/user-guide/lisk-core.html">Lisk Core Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-commander/user-guide/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Lisk Elements</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lisk-elements/introduction.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lisk-elements/packages.html">Packages</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lisk-elements/packages/api-client.html">API Client</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/accounts.html">Accounts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/blocks.html">Blocks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/dapps.html">DApps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/delegates.html">Delegates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/node.html">Node</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/peers.html">Peers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/signatures.html">Signatures</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/voters.html">Voters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="lisk-elements/packages/api-client/votes.html">Votes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-elements/packages/client.html">Client</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-elements/packages/constants.html">Constants</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-elements/packages/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lisk-elements/packages/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#lisk-elements/packages/transaction.adoc">Transaction</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Lisk Framework</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="lisk-framework/introduction.html">Introduction</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">2.1.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">2.1.3 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/2.0/introduction.html">2.0.2</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/1.6/introduction.html">1.6.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../index.html">2.3.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../2.2/introduction.html">2.2.0</a>
        </li>
        <li class="version is-current">
          <a href="introduction.html">2.1.0</a>
        </li>
        <li class="version">
          <a href="../2.0/introduction.html">2.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="introduction.html">Lisk SDK</a></li>
    <li><a href="customize.html">Customize</a></li>
  </ul>
</nav>
<button class="toc-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.1.0</button>
  <div class="version-menu">
    <a class="version" href="../customize.html">2.3.6 (latest)</a>
    <a class="version" href="../2.2/customize.html">2.2.0</a>
    <a class="version is-current" href="customize.html">2.1.0</a>
    <a class="version" href="../2.0/customize.html">2.0.1</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk-2.1.0/modules/ROOT/pages/customize.adoc">Edit this Page</a></div>
</div>
<article class="doc"><a name="section-top"></a>
<div class="sect1">
<h2 id="_sdk_customization"><a class="anchor" href="#_sdk_customization"></a>SDK customization</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_custom_transactions"><a class="anchor" href="#_custom_transactions"></a>Custom transactions</h3>
<div class="paragraph">
<p>Transactions are an essential part of blockchain applications that are
created using the Lisk SDK.</p>
</div>
<div class="paragraph">
<p>The Lisk SDK provides a class
<a href="https://liskhq.github.io/lisk-sdk/classes/" class="bare">https://liskhq.github.io/lisk-sdk/classes/</a><em>base_transaction</em>.basetransaction.html[BaseTransaction]
from which developers can inherit and extend from, to create <strong>custom
transaction types</strong>.</p>
</div>
<div class="paragraph">
<p>The application-specific business logic for custom transaction types is
defined according to an abstract
<a href="#the-basetransaction-interface">interface</a> that is common across all
transaction types.</p>
</div>
<div class="paragraph">
<p>All of the default transaction types of the Lisk SDK transactions
implement the abstract interface of the base transaction, and therefore
the base transaction can be used as a model for custom transactions.
It’s also possible to inherit one of the default transaction types, in
order to extend or modify them.</p>
</div>
</div>
<div class="sect2">
<h3 id="_register_a_custom_transaction"><a class="anchor" href="#_register_a_custom_transaction"></a>Register a custom transaction</h3>
<div class="paragraph">
<p>Add your custom transaction type to your blockchain application by
registering it to the application instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { Application, genesisBlockDevnet } = require('lisk-sdk');

const MyTransaction = require('./my_transaction');

const app = new Application(genesisBlockDevnet);

app.registerTransaction(MyTransaction); // register the custom transaction

app
    .run()
    .then(() =&gt; app.logger.info('App started...'))
    .catch(error =&gt; {
        console.error('Faced error in application', error);
        process.exit(1);
    });</code></pre>
</div>
</div>
<div class="paragraph">
<p>For information on creating your own custom transaction,
<a href="../start/tutorials.md">follow the tutorials</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_the_basetransaction_interface"><a class="anchor" href="#_the_basetransaction_interface"></a>The BaseTransaction interface</h3>
<div class="sect3">
<h4 id="_required_properties"><a class="anchor" href="#_required_properties"></a>Required Properties</h4>
<div class="sect4">
<h5 id="_type"><a class="anchor" href="#_type"></a>TYPE</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">static TYPE: number</code></pre>
</div>
</div>
<div class="paragraph">
<p>The hallmark of a transaction. Set this constant to any number, except
<code>0-9</code>, which are reserved for the default transactions.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_required_methods"><a class="anchor" href="#_required_methods"></a>Required Methods</h4>
<div class="paragraph">
<p>All of the abstract methods and properties on the base transaction’s
interface are required to implement. These are the following:</p>
</div>
<div class="sect4">
<h5 id="_prepare"><a class="anchor" href="#_prepare"></a>prepare</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">prepare(store: StateStorePrepare): Promise&lt;void&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_validateasset"><a class="anchor" href="#_validateasset"></a>validateAsset</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">validateAsset(): ReadonlyArray&lt;TransactionError&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before a transaction reaches the apply step it gets validated. Check the
transaction’s asset correctness from the schema perspective (no access
to StateStore here). Invalidate the transaction by pushing an error into
the result array. Prepare the relevant information about the accounts,
which will be accessible in the later steps during the <code>apply</code> and
<code>undo</code> steps.</p>
</div>
</div>
<div class="sect4">
<h5 id="_applyasset"><a class="anchor" href="#_applyasset"></a>applyAsset</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">applyAsset(store: StateStore): ReadonlyArray&lt;TransactionError&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The business use case of a transaction is implemented in <code>applyAsset</code>
method. It applies all of the necessary changes from the received
transaction to the affected account(s) by calling <code>store.set</code>. Calls
<code>store.get</code> to get all of the relevant data. The transaction that
you’re currently processing is the function’s context (ie
<code>this.amount</code>). Invalidate the transaction by pushing an error into
the result array.</p>
</div>
</div>
<div class="sect4">
<h5 id="_undoasset"><a class="anchor" href="#_undoasset"></a>undoAsset</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">undoAsset(store: StateStore): ReadonlyArray&lt;TransactionError&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The inversion of the <code>applyAsset</code> method. Undoes all of the changes to
the accounts applied by the <code>applyAsset</code> step.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_additional_methods"><a class="anchor" href="#_additional_methods"></a>Additional Methods</h4>
<div class="paragraph">
<p>To increase your application’s performance, you should override the
following functions: <code>verifyAgainstTransactions</code>, <code>assetFromSync</code>,
<code>fromSync</code>.</p>
</div>
<div class="paragraph">
<p>The BaseTransaction provides the default implementation of the methods
revolving around the signatures. As your application matures you can
provide the custom ways of how your a transaction’s signature is
derived: <code>sign</code>, <code>getBytes</code>, <code>assetToBytes</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default_transaction_types"><a class="anchor" href="#_default_transaction_types"></a>Default transaction types</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The first 10 transaction types are reserved for the
<a href="https://lisk.io/documentation/lisk-protocol">Lisk protocol</a>, don’t use
them to register custom transactions.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>Each default transaction type implements a different use case of the
Lisk network, i.e:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Balance transfer (type 0)</p>
</li>
<li>
<p>Second signature registration (type 1)</p>
</li>
<li>
<p>Delegate registration (type 2)</p>
</li>
<li>
<p>Delegate vote (type 3)</p>
</li>
<li>
<p>Multisignature account registration (type 4)</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>For a complete list of all default transaction types, check out the
section <a href="https://lisk.io/documentation/lisk-protocol/transactions">Lisk
Transactions</a> of the Lisk Protocol.</strong></p>
</div>
<div class="paragraph">
<p>Furthermore, the Lisk SDK <a href="../start/tutorials.md">tutorials</a> include
simple code examples of custom transaction types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_what_is_the_lifecycle_of_a_transaction"><a class="anchor" href="#_what_is_the_lifecycle_of_a_transaction"></a>What is the lifecycle of a transaction?</h3>
<div class="paragraph">
<p>The lifecycle of a general transaction using the Lisk SDK can be
summarized in 7 steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>1. A transaction is created and signed (off-chain).</strong> The script to do
this is <code>src/create_and_sign.ts</code>.</p>
</li>
<li>
<p><strong>2. The transaction is sent to a network.</strong> This can be done by a third
party tool (like <code>curl</code> or <code>Postman</code>), but also using Lisk
Commander, Lisk Hub or Mobile. All of the tools need to be authorized to
access an HTTP API of a network node.</p>
</li>
<li>
<p><strong>3. A network node receives the transaction</strong> and after a lightweight
schema validation, adds it to a transaction pool.</p>
</li>
<li>
<p><strong>4. In the transaction pool, the transactions are firstly
<code>validated</code>.</strong> In this step, only static checks are performed. These
include schema validation and signature validation.</p>
</li>
<li>
<p><strong>5. Validated transactions go to the <code>prepare</code> step</strong> defined in the
transaction class, which to limit the I/O database operations, prepares
all the information relevant to properly <code>apply</code> or <code>undo</code> the
transaction. The store with the prepared data is a parameter of the
mentioned methods.</p>
</li>
<li>
<p><strong>6. Delegates forge the valid transactions into blocks</strong> and
broadcasting the blocks to the network. Each network node performs the
<code>apply</code> and <code>applyAsset</code> steps after the successful completion of
the <code>validate</code> step.</p>
</li>
<li>
<p><strong>7. Shortly after a block is applied, it’s possible that a node
performs the <code>undo</code> step</strong> (due to decentralized network conditions).
When this happens, the block containing all of the included transactions
get reverted in favor of a competing block.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>While implementing a custom transaction, it is necessary to complete
some of these steps. Often, a base transaction implements a default
behavior. With experience, you may decide to override some of these base
transaction methods, resulting in an implementation that is
well-tailored and provides the best possible performance for your use
case.</p>
</div>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">On this page:</h3>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
    <div class="footer__container">
        <div class="footer__copyright">
            <div class="institutional-links-2">
                <a class="institutional-links-2-item">© 2019 Lisk Foundation Gmbh</a>
                <a class="institutional-links-2-item">Terms & Conditions</a>
                <a class="institutional-links-2-item">Privacy Policy</a>
            </div>
            <p class="footer__copyright-text">Lisk is a foundation registered in England and Wales (No. 08804411). Lisk is authorised by the Financial Conduct Authority under the Electronic Money Regulations 2011, Reference 900562.</p>
        </div>
        <div class="footer__logo-container">
            <img src="./_/img/lisk-logo-light.svg" class="footer__lisk-logo"/>
        </div>
        <div class="community-section">
            <p class="community-section__text">Follow Lisk on: </p>
            <div class="community-section__icons">
                <a href="https://github.com/LiskHQ" target="_blank" class="icon icon-github"></a>
                <a href="https://www.youtube.com/channel/UCuqpGfg_bOQ8Ja4pj811PWg/featured" target="_blank" class="icon icon-youtube"></a>
                <a href="https://www.reddit.com/r/Lisk/" target="_blank" class="icon icon-reddit"></a>
                <a href="https://www.linkedin.com/company/lisk/" target="_blank" class="icon icon-linkedin"></a>
                <a href="https://twitter.com/LiskHQ" target="_blank" class="icon icon-twitter"></a>
                <a href="https://www.facebook.com/LiskHQ" target="_blank" class="icon icon-facebook"></a>
            </div>
        </div>
    </div>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3',
        collapseDepth: 6,
        positionFixedSelector: null,
        scrollSmooth: false
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>
  </body>
</html>
