= How to implement cross-chain communication
Mona Bärenfänger <mona@lightcurve.io>
:toc:
:idprefix:
:idseparator: -
:sectnums:
// URLs
:url_github_sdk_interop: https://github.com/LiskHQ/lisk-sdk/tree/release/6.0.0/examples/interop
:url_github_sdk_interop_cctransfer: {url_github_sdk_interop}#transfer-from-mainchain-to-sidechain-two
// Project URLs
:url_understand_interopcommunication: understand-blockchain/interoperability/communication.adoc
:url_build_createccm: build-blockchain/interoperable-module/create-ccm.adoc
:url_build_executeccm: build-blockchain/interoperable-module/execute-ccm.adoc

====
In this chapter, you'll learn how to:

* [x] Create CCM inside a command
* [x] Execute a CCM inside a cc_command
* [x] Test the implementation of an interoperable module by running the interop example scripts.
====

If a Lisk app intends to interact with other blockchains in the network, it needs to provide the required cross-chain commands that create and execute the corresponding CCMs.

NOTE: To learn more about the wat how sidechain communicate to each other via CCM, check out the page about xref:{url_understand_interopcommunication}[].

To show how interoperable modules are implemented, we will extend the Hello app with a very simple command, allowing other chains to react to Hello messages.

To keep it simple, the example only implements one reaction type: Likes.

The example can be extended to include more reaction types, like dislikes or replies for Hello messages, if desired.

== Creating interoperable modules

If two sidechain intend to interact with each other, for example, if a sidechain A wishes to utilize services that a sidechain B provides, this can be achieved via *interoperable modules*.

In this context, sidechain A would be the sending chain, and sidechain B would be the receiving chain.

To achieve cross-chain communication, the two sidechains need to fulfil the following requirements:

. *Both* the sending-, and the receiving chain need to be *registered as sidechains* to the same mainchain.
. *Both* the sending-, and the receiving chain need to be *active sidechains*, with at least one relayer node connected to the mainchain.
. The *sending chain* needs to implement a module command that is *creating* and *sending a CCM*.
. The *receiving chain* needs to implement a module cc_command that is *accepting* and *executing the CCM*.

TIP: The {url_github_sdk_interop}[interop example^] fulfils already all requirements after setup, if you simply want to try it out, refer to the next section <<testing-interoperable-modules>>.

To learn the details about the implementation of the required module commands, check out the following dedicated guides:

* xref:{url_build_createccm}[]
* xref:{url_build_executeccm}[]


== Testing interoperable modules

As interaction between two sidechains always involves three chain (sending chain, receiving chain, and mainchain), it is quite complicated to test newly implemented interoperable modules locally.

To simplify the process, the `lisk-sdk` provides useful example scripts that can be easily adjusted to try out new interoperable modules.

=== The `interop` example of the `lisk-sdk` repository

[.float-group]
--
[role="right"]
.The blockchain network of the interop example
image:build-blockchain/interop-example.png[,300,role="right"]

To try out the cross-chain communication of interoperable modules locally, go the {url_github_sdk_interop}[interop/example] in the `lisk-sdk` repository.

Here, you find a `README.md` which is describing all required steps to set up a simple interoperability example, as illustrated in _Figure 1_.

Additionally, you find examples how to execute cross-chaon token transfers between the chains.

Follow the instructions until {url_github_sdk_interop_cctransfer}[here^], where you successfully sent tokens from the mainchain to both sidechains.

Now, to test the newly implemented interoperable modules, perform the following steps:

--
=== Create Hello message on sidechain 1
=== Create Reaction on sidechain 2
=== Observe execution of the CCM
