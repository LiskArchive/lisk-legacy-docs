<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating a new module :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/build-blockchain/create-module.html">
    <link rel="prev" href="create-blockchain-app.html">
    <link rel="next" href="create-asset.html">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../_/css/dark-site.css">

<script>var uiRootPath = '../_'</script>
<script src="../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href=".." class="lisk-logo"></a>
        <a href=".." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../index.html">Lisk Documentation</a>
        <a class="component" href="../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">default</button>
  <div class="version-menu">
    <a class="version is-current" href="create-module.html">default</a>
    <a class="version is-missing" href="../beta/index.html">beta</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Documentation</a></li>
    <li><a href="index.html">Build Blockchain</a></li>
    <li><a href="create-module.html">Creating a new module</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/main/docs/modules/ROOT/pages/build-blockchain/create-module.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/index.html">Understand Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/architecture.html">SDK Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/block-life-cycle.html">Block life cycle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/modules-assets.html">Modules and assets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/endpoints.html">RPC endpoints of a Lisk node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/reducers.html">Reducers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/codec-schema.html">Codec &amp; schema</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/index.html">Lisk Protocol</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Build Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="create-blockchain-app.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="create-module.html">Creating a new module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="create-asset.html">Creating a new asset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="create-plugin.html">Creating a new plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configure-app.html">How to configure a blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="test-app.html">Testing the blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="using-dashboard.html">Using dashboard with the blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enable-faucet.html">How to enable a faucet for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="launch-test-network.html">Launching a public test network</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../run-blockchain/index.html">Run Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/blockchain-reset.html">Resetting and snapshotting the blockchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/forging-node-protection.html">Protecting a forging node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integrate-blockchain/index.html">Integrate Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/calculating-min-fee.html">Calculating the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/create-send-transactions.html">How to send a transaction to the network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/create-user-interface.html">Creating a user interface</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tutorial/index.html">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial/nft.html">Non-fungible token (NFT) Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../tutorial/srs.html">Social Recovery System (SRS) Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../tutorial/lns/index.html">Lisk Name Service (LNS) Tutorial</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tutorial/lns/1-blockchain.html">Chapter 1: Blockchain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tutorial/lns/2-frontend.html">Chapter 2: Frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tutorial/lns/3-cli.html">Chapter 3: CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../tutorial/lns/4-tests.html">Chapter 4: Tests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-node-http.html">HTTP API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-service-http.html">Mainnet HTTP API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-service-rpc.html">RPC endpoints (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-service-pubsub.html">Publish/Subscribe API (Lisk Service)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lisk-sdk/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lisk-service/index.html">Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lisk-core/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-core/index.html">3.1.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-core/v4/index.html">4.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
        <li class="version">
          <a href="../beta/index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-service/index.html">0.6.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-service/0.7/index.html">0.7 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Creating a new module</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>How to create a new <a href="../understand-blockchain/modules-assets.html" class="xref page">module</a> for a blockchain application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Sample code</div>
<div class="paragraph">
<p>View the complete sample code of this guide on GitHub in the <a href="https://github.com/LiskHQ/lisk-sdk-examples/tree/development/guides/02-module/hello_app" target="_blank" rel="noopener">Lisk SDK examples repository</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you wish to view an example of a module in a more complex blockchain application, check out the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/nft/blockchain_app/nft_module/index.js">NFT module</a> from the <a href="../tutorial/nft.html" class="xref page">Non-fungible token (NFT) Tutorial</a></p>
</li>
<li>
<p>the <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/social-recovery/blockchain_app/srs_module/index.js">SRS module</a> from the <a href="../tutorial/srs.html" class="xref page">Social Recovery System (SRS) Tutorial</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>As defined in the <a href="create-blockchain-app.html#the-hello-world-application" class="xref page">Hello World application overview</a>, the module shall provide the following functionalities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A hello message shall be stored in the user accounts.</p>
<div class="ulist">
<ul>
<li>
<p>The hello message has to be of type <code>string</code>.</p>
</li>
<li>
<p>The hello message has a maximum length of 64 characters.</p>
</li>
</ul>
</div>
</li>
<li>
<p>A counter, counting the total number of sent hello messages.
Anyone can request the current value of the hello counter.</p>
</li>
<li>
<p>All users can be notified immediately if a new hello message was sent.
The notification includes information about the sender andress and the sent hello message.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Prerequisites</div>
<div class="paragraph">
<p>To use this guide, the following criteria is assumed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Lisk Commander is installed, and a basic blockchain application is already initialized, as explained in the previous guide <a href="create-blockchain-app.html" class="xref page">Creating a new blockchain application</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#generating-the-module-skeleton">1. Generating the module skeleton</a></li>
<li><a href="#the-module-class">2. The module class</a></li>
<li><a href="#defining-an-account-schema">3. Defining an account schema</a></li>
<li><a href="#assets">4. Assets</a></li>
<li><a href="#events">5. Events</a></li>
<li><a href="#lifecycle-hooks">6. Lifecycle Hooks</a></li>
<li><a href="#actions">7. Actions</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="generating-the-module-skeleton"><a class="anchor" href="#generating-the-module-skeleton"></a>1. Generating the module skeleton</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While in the root folder of your blockchain application, generate a skeleton for the new module with Lisk Commander.</p>
</div>
<div class="paragraph">
<p>The command <code>lisk generate:module</code> expects 2 arguments:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <a href="../understand-blockchain/modules-assets.html#module-name" class="xref page">module name</a>.</p>
</li>
<li>
<p>The <a href="../understand-blockchain/modules-assets.html#module-id" class="xref page">module ID</a>.
Needs to be unique within the application.
The minimum value is <code>1000</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For a complete overview of all available options of the <code>generate:module</code> command, visit the <a href="../lisk-sdk/references/lisk-commander/commands.html#generate-module" class="xref page">Lisk Commander command reference</a>.</p>
</div>
<div class="paragraph">
<p>As an example, we use the module name <code>hello</code> and the module ID <code>1000</code>:</p>
</div>
<div id="generate-module" class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk generate:module hello 1000</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will generate the following files:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Creating module skeleton with module name "hello" and module ID "1000"
Using template "lisk-ts"
Generating module skeleton.
Registering module...
identical .liskrc.json
   create src/app/modules/hello/hello_module.ts
   create test/unit/modules/hello/hello_module.spec.ts

No change to package.json was detected. No package manager install will be executed.

Your module is created and ready to use.</pre>
</div>
</div>
<div class="paragraph">
<p>It will also automatically register the module with the application, by adding it to <code>src/app/modules.ts</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Once the first module is added to the application, a manual change in <code>modules.ts</code> is required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remove the underscore from the <code>_app</code> parameter and change it to <code>app</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise, you will run into the following error, when trying to start the application:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>reference error : app is not defined</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">src/app/modules.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Application } from 'lisk-sdk';
import { HelloModule } from "./modules/hello/hello_module";

export const registerModules = (app: Application): void =&gt; {

    app.registerModule(HelloModule);
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Please be aware that once the <a href="#defining-an-account-schema">account schema</a> is implemented into the module, that the application will not start successfully anymore.
This is due to the fact that the accounts in the genesis block are not including the account schema for the new module yet.</p>
</div>
<div class="paragraph">
<p>In order to solve this, simply generate a new genesis block by using the application CLI, as explained in the next guide <a href="create-genesis-block.html" class="xref page">How to create a new genesis block</a>.</p>
</div>
<div class="paragraph">
<p>The file <code>hello_module.ts</code> contains the module skeleton and the file <code>hello_module.spec.ts</code> contains the related unit tests for the new module.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more information on how to write a unit test for the blockchain application, check out the <a href="test-app.html" class="xref page">Testing the blockchain application</a> guide.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The module skeleton can be viewed in <code>hello_module.ts</code>:</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {
    BaseModule,
    AfterBlockApplyContext,
    TransactionApplyContext,
    BeforeBlockApplyContext,
    AfterGenesisBlockApplyContext,
    // GenesisConfig
} from 'lisk-sdk';

export class HelloModule extends BaseModule {
    public actions = {
        // Example below
        // getBalance: async (params) =&gt; this._dataAccess.account.get(params.address).token.balance,
        // getBlockByID: async (params) =&gt; this._dataAccess.blocks.get(params.id),
    };
    public reducers = {
        // Example below
        // getBalance: async (
		// 	params: Record&lt;string, unknown&gt;,
		// 	stateStore: StateStore,
		// ): Promise&lt;bigint&gt; =&gt; {
		// 	const { address } = params;
		// 	if (!Buffer.isBuffer(address)) {
		// 		throw new Error('Address must be a buffer');
		// 	}
		// 	const account = await stateStore.account.getOrDefault&lt;TokenAccount&gt;(address);
		// 	return account.token.balance;
		// },
    };
    public name = 'hello';
    public transactionAssets = [];
    public events = [
        // Example below
        // 'hello:newBlock',
    ];
    public id = 1000;

    // public constructor(genesisConfig: GenesisConfig) {
    //     super(genesisConfig);
    // }

    // Lifecycle hooks
    public async beforeBlockApply(_input: BeforeBlockApplyContext) {
        // Get any data from stateStore using block info, below is an example getting a generator
        // const generatorAddress = getAddressFromPublicKey(_input.block.header.generatorPublicKey);
		// const generator = await _input.stateStore.account.get&lt;TokenAccount&gt;(generatorAddress);
    }

    public async afterBlockApply(_input: AfterBlockApplyContext) {
        // Get any data from stateStore using block info, below is an example getting a generator
        // const generatorAddress = getAddressFromPublicKey(_input.block.header.generatorPublicKey);
		// const generator = await _input.stateStore.account.get&lt;TokenAccount&gt;(generatorAddress);
    }

    public async beforeTransactionApply(_input: TransactionApplyContext) {
        // Get any data from stateStore using transaction info, below is an example
        // const sender = await _input.stateStore.account.getOrDefault&lt;TokenAccount&gt;(_input.transaction.senderAddress);
    }

    public async afterTransactionApply(_input: TransactionApplyContext) {
        // Get any data from stateStore using transaction info, below is an example
        // const sender = await _input.stateStore.account.getOrDefault&lt;TokenAccount&gt;(_input.transaction.senderAddress);
    }

    public async afterGenesisBlockApply(_input: AfterGenesisBlockApplyContext) {
        // Get any data from genesis block, for example get all genesis accounts
        // const genesisAccoounts = genesisBlock.header.asset.accounts;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command <code>generate:module</code> already created the class <code>HelloModule</code> which contains skeletons for the most important components of a module.
The only properties which are set at this point are the module ID and the module name, which were defined previously while <a href="#generate-module">generating the module skeleton</a>.</p>
</div>
<div class="paragraph">
<p>In fact it can be stated that with these 2 properties, it is already a complete module that can be registered with the application.
However, this module is not performing any functions yet.
To give the module a purpose, it is necessary to implement certain logic inside of the module.</p>
</div>
<div class="paragraph">
<p>The following sections explain how the different components of a module can be used to implement the desired logic for the module.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-module-class"><a class="anchor" href="#the-module-class"></a>2. The module class</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module class always extends from the <code>BaseModule</code>, which is imported from the <code>lisk-sdk</code> package.</p>
</div>
<div class="paragraph">
<p>The properties <code>name</code> and <code>id</code> are pre-filled by the values that were used when <a href="#generate-module">generating the module skeleton</a> in the previous step.</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {

    // ...

    public name = 'hello';
    public id = 1000;

    // ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="defining-an-account-schema"><a class="anchor" href="#defining-an-account-schema"></a>3. Defining an account schema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some cases, the new module will require storing some new data in the user accounts.
If that is the case, then it is required to define the corresponding account schema in the module.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more information about the account schema in modules, check out the section that covers the account schemas in the <a href="../understand-blockchain/modules-assets.html#account-schema" class="xref page">Modules</a> introduction page.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For the Hello application, it is required to store a hello message in each user account, as defined in the application overview of the guide <a href="create-blockchain-app.html#the-hello-world-application" class="xref page">Creating a new blockchain application</a>.
The hello message should be of type <code>string</code> and it should have a minium length of 3, and a maximum length of 64 characters.
All of this can be defined in the account schema.</p>
</div>
<div class="paragraph">
<p>The account schema for the Hello module is defined as follows:</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {

    // ...

    public accountSchema = {
        type: 'object',
        properties: {
            helloMessage: {
                fieldNumber: 1,
                dataType: 'string',
                maxLength: 64,
            },
        },
        default: {
            helloMessage: '',
        },
    };

    // ...
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If a module includes an account schema, it is necessary to <a href="create-genesis-block.html" class="xref page">update the genesis block</a> after registering the module to the application.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assets"><a class="anchor" href="#assets"></a>4. Assets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A module can include various assets, each allowing the module to handle a new transaction type.</p>
</div>
<div class="paragraph">
<p>Before a new asset can be added, it is first required to create the custom asset as described in the <a href="create-asset.html" class="xref page">Creating a new asset</a> guide.</p>
</div>
<div class="paragraph">
<p>Assuming an asset <code>CreateHelloAsset</code> has been created for the module, then it will be included in the module as shown below:</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseModule } from 'lisk-sdk';
const { CreateHelloAsset } = require('./assets/create_hello_asset');

export class HelloModule extends BaseModule {

    // ...

    public transactionAssets = [
       new CreateHelloAsset()
    ];

    // ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="events"><a class="anchor" href="#events"></a>5. Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A list of events that this module is able to emit is covered here.</p>
</div>
<div class="paragraph">
<p>Modules, plugins, and external services can subscribe to these events.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the <a href="../understand-blockchain/modules-assets.html#events" class="xref page">Events</a> section of the "Modules" introduction page and the <a href="../understand-blockchain/endpoints.html#aliases" class="xref page">Aliases</a> section of the "Communication" page for more information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add a new event <code>newHello</code>.
This event shall be published every time a user is updating their hello message.
The <code>events</code> defined can be published to the application in the <a href="#lifecycle-hooks">Lifecycle Hooks</a> of the module.</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {

    // ...
    public events = ['newHello'];

    // ...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="lifecycle-hooks"><a class="anchor" href="#lifecycle-hooks"></a>6. Lifecycle Hooks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lifecycle hooks allow a module to execute certain logic, before or after blocks or transactions are applied to the blockchain.</p>
</div>
<div class="paragraph">
<p>Inside of the lifecycle hooks, it&#8217;s possible to <strong>publish</strong> the above defined events to the application and to filter for certain transactions and blocks, before applying the logic.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the "Lifecycle Hooks" section of the <a href="../understand-blockchain/modules-assets.html#lifecycle-hooks" class="xref page">Modules</a> introduction page for more information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the hello module, two different lifecycle hooks are defined.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">afterTransactionApply</dt>
<dd>
<p>Publishes a new event <code>hello:newHello</code> for every applied <code>hello</code> transaction asset, and adds information about the sender of the transaction, and the corresponding hello message.</p>
</dd>
<dt class="hdlist1">afterGenesisBlockApply</dt>
<dd>
<p>If the genesis block is applied, it will set the counter for posted hello transactions to zero.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {

    // ...

     // Lifecycle hooks
    public async afterTransactionApply(_input: TransactionApplyContext) {
        // Publish a `newHello` event for every received hello transaction
        // 1. Check for correct module and asset IDs
        if (_input.transaction.moduleID === this.id &amp;&amp; _input.transaction.assetID === 0) {

            // 2. Decode the transaction asset
            const helloAsset = codec.decode(
                helloAssetSchema,
                _input.transaction.asset
            );

            // 3. Publish the event 'hello:newHello' and
            // attach information about the sender address and the posted hello message.
            this._channel.publish('hello:newHello', {
                sender: _input.transaction._senderAddress.toString('hex'),
                hello: helloAsset.helloString
            });
        }
    }

    public async afterGenesisBlockApply(_input: AfterGenesisBlockApplyContext) {
        // Set the hello counter to zero after the genesis block is applied
        await _input.stateStore.chain.set(
            CHAIN_STATE_HELLO_COUNTER,
            codec.encode(helloCounterSchema, { helloCounter: 0 })
        );
    }

    // ...
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is recommended to store the different schemas in a separate file, e.g. <code>schemas.js</code>, and import them in to the module and asset where required.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more information about schemas, check out the <a href="../understand-blockchain/codec-schema.html" class="xref page">Codec &amp; schema</a> page.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following schemas are used in the lifecycle hooks:</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/schemas.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">// This key is used to save the data for the hello counter in the database
const CHAIN_STATE_HELLO_COUNTER = "hello:helloCounter";

// This schema is used to decode/encode the data of the hello counter from/for the database
const helloCounterSchema = {
  $id: "lisk/hello/counter",
  type: "object",
  required: ["helloCounter"],
  properties: {
    helloCounter: {
      dataType: "uint32",
      fieldNumber: 1,
    },
  },
};

// This schema is used to decode/encode the data of the asset of the hello transaction from/for the database
const helloAssetSchema = {
  $id: "lisk/hello/asset",
  type: "object",
  required: ["helloString"],
  properties: {
    helloString: {
      dataType: "string",
      fieldNumber: 1,
    },
  },
};

module.exports = {
  CHAIN_STATE_HELLO_COUNTER,
  helloCounterSchema,
  helloAssetSchema
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="actions"><a class="anchor" href="#actions"></a>7. Actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A list of actions that plugins and external services can invoke.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the "Actions" section of the <a href="../understand-blockchain/modules-assets.html#actions" class="xref page">Modules</a> introduction page for more information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Add a new action <code>amountOfHellos</code>.</p>
</div>
<div class="paragraph">
<p>If the action is invoked, it will return the total amount of sent hello messages in the network.
The hello counter is set to zero after applying the genesis block in the <a href="#lifecycle-hooks">Lifecycle Hooks</a>, and incremented in the <a href="#transaction-assets">asset</a>.
This action simply returns the current value of the hello counter, which is retrieved from the database.</p>
</div>
<div class="listingblock">
<div class="title">src/app/modules/hello/hello_module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {

    // ...

    public actions = {
        amountOfHellos: async () =&gt; {
            const res = await this._dataAccess.getChainState(CHAIN_STATE_HELLO_COUNTER);
            const count = codec.decode(
                helloCounterSchema,
                res
            );
            return count;
        },
    };

    // ...
}</code></pre>
</div>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="create-blockchain-app.html">Creating a new blockchain application</a></span>
  <span class="next"><a href="create-asset.html">Creating a new asset</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>Â© 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/glossary.js"></script>
<script async src="../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../_/js/vendor/swagger-ui.js"></script>
<script async src="../_/js/vendor/component-versions.js"></script>
<script src="../_/js/vendor/custom.js"></script>

  </body>
</html>
