<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Create a custom transaction :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/lisk-sdk/v4/guides/app-development/custom-transactions.html">
    <link rel="prev" href="configuration.html">
    <link rel="next" href="test-transaction.html">
    <meta name="description" content="How to create &amp; register custom transactions including fees, the base transaction interface and the store comprising of caching &amp; filtering can be found here.">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../../../_/css/dark-site.css">

    <script>var uiRootPath = '../../../../_'</script>
    <script src="../../../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://lisk.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
    <!-- Matomo Tag Manager -->
    <script>
      var _mtm = window._mtm = window._mtm || [];
      _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
    </script>
    <!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../../.." class="lisk-logo"></a>
        <a href="../../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
        <div id="docsearch" class="navbar-menu search-box hide-for-print">
          <!--<input id="search-input-toolbar" type="text" placeholder="Search me ...">-->
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk SDK</button>
    <div class="component-menu">
        <a class="component" href="../../../../lisk-core/v2/index.html">Lisk Core</a>
        <a class="component" href="../../../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component" href="../../../../beta/index.html">Lisk Documentation</a>
        <a class="component is-current" href="../../../v6/index.html">Lisk SDK</a>
        <a class="component" href="../../../../lisk-service/v0.7/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.0.0</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../../v6/index.html">6.0.0 (beta)</a>
    <a class="version is-current" href="custom-transactions.html">4.0.0</a>
    <a class="version" href="../../../v3/guides/app-development/custom-transactions.html">3.0.2</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
  <a href="../../../../beta/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk SDK</a></li>
    <li><a href="../index.html">Guides</a></li>
    <li>Application development</li>
    <li><a href="custom-transactions.html">Create a custom transaction</a></li>
  </ul>
</nav>
    <div id="docsearch-toolbar" class="search-box hide-for-print toolbar-search">
      <!--<input id="search-input" type="text" placeholder="Search me ...">-->
    </div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk-4.0.0/modules/ROOT/pages/guides/app-development/custom-transactions.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="v4">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../setup.html">Prerequisites</a>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../explanations/consensus.html">Consensus in Lisk</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../index.html">Guides</a>
        </span>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Application development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configuration.html">Configure a blockchain application</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="custom-transactions.html">Create a custom transaction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="test-transaction.html">Test a transaction</a>
  </li>
  <li class="nav-item parent" data-depth="3">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="interact-with-api.html">Interact with the API</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="broadcast.html">Broadcast a transaction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="frontend.html">Connect a frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="launch.html">Launch a blockchain application</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Node management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/managing-accounts.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/forging.html">Enable forging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/api-access.html">API access</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/enable-ssl.html">Enable SSL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/logging.html">Logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../tutorials/index.html">Tutorials</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorials/hello-world.html">Hello World</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../tutorials/supply-chain/index.html">Supply Chain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part1.html">Part 1: Installation &amp; setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part2.html">Part 2: Track a packet on the blockchain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part3.html">Part 3: A simple supply chain management system</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part4.html">Part 4: How to publish the application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/index.html">References</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/api-specification.html">API specification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/config.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/changelog.html">ChangeLog 3.x to 4.x</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/lisk-commander/index.html">Lisk Commander</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/commands.html">Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/lisk-core-commands.html">Lisk Core commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/lisk-elements/index.html">Lisk Elements</a>
        </span>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="3">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/lisk-elements/api-client.html">API client</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/accounts.html">Accounts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/blocks.html">Blocks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/dapps.html">DApps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/delegates.html">Delegates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/node.html">Node</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/peers.html">Peers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/voters.html">Voters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/votes.html">Votes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/bft.html">BFT</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/chain.html">Chain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/client.html">Client</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/constants.html">Constants</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/dpos.html">DPoS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/p2p.html">P2P</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/transaction-pool.html">Transaction pool</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/validator.html">Validator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/lisk-framework/index.html">Lisk Framework</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">4.0.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../lisk-core/v2/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../../lisk-core/v4/index.html">4.0.0-beta.0</a>
        </li>
        <li class="version is-latest">
          <a href="../../../../lisk-core/v2/index.html">2.1.7</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../beta/index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../beta/index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../v6/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../v6/index.html">6.0.0 (beta)</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../../../v3/index.html">3.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../lisk-service/v0.7/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../lisk-service/v0.7/index.html">0.7.0 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Create a custom transaction</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#custom-transactions">Custom transactions</a>
<ul class="sectlevel2">
<li><a href="#hello_transaction">.1. Example of a custom transaction: The <code>HelloTransaction</code></a></li>
<li><a href="#creating-an-instance-of-a-transaction">.2. Creating an instance of a transaction</a></li>
<li><a href="#registering-a-custom-transaction">.3. Registering a custom transaction</a></li>
</ul>
</li>
<li><a href="#fees">Fees</a>
<ul class="sectlevel2">
<li><a href="#fee-distribution">Fee distribution</a></li>
<li><a href="#choosing-the-right-fee-for-a-transaction">Choosing the right fee for a transaction</a></li>
<li><a href="#how-to-invalidate-a-transaction">How to invalidate a transaction</a></li>
</ul>
</li>
<li><a href="#default_transactions">Default transaction types</a></li>
<li><a href="#interface">The BaseTransaction interface</a>
<ul class="sectlevel2">
<li><a href="#required-properties">Required properties</a></li>
<li><a href="#required-methods">Required methods</a></li>
<li><a href="#additional-methods-properties">Additional methods &amp; properties</a></li>
</ul>
</li>
<li><a href="#best-practice-always-extend-a-custom-transaction-from-the-basetransaction">Best practice: Always extend a custom transaction from the <code>BaseTransaction</code></a></li>
<li><a href="#store">The Store</a>
<ul class="sectlevel2">
<li><a href="#cache">Cache</a></li>
<li><a href="#filters">Filters</a></li>
<li><a href="#getter">Getter</a></li>
<li><a href="#setter">Setter</a></li>
</ul>
</li>
<li><a href="#what-is-the-lifecycle-of-a-transaction">What is the lifecycle of a transaction?</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="custom-transactions"><a class="anchor" href="#custom-transactions"></a>Custom transactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Transactions are an essential part of blockchain applications that are created using the Lisk SDK, as they define the set of actions that can be performed by users in the network.
Each transaction belongs to a specific <strong>transaction type</strong> that is registered in the network.</p>
</div>
<div class="paragraph">
<p>The Lisk SDK provides a <a href="#interface">BaseTransaction interface</a> from which developers can extend from, in order to create custom transactions.</p>
</div>
<div class="listingblock">
<div class="title">Skeleton of a custom transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const {
    BaseTransaction
} = require('@liskhq/lisk-transactions');

class MyCustomTransaction extends BaseTransaction {
  static get TYPE = /* ... */

  async prepare(store) { /* ... */ }
  validateAsset() { /* ... */ }
  async applyAsset(store) { /* ... */ }
  async undoAsset(store) { /* ... */ }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="hello_transaction"><a class="anchor" href="#hello_transaction"></a>.1. Example of a custom transaction: The <code>HelloTransaction</code></h3>
<div class="listingblock">
<div class="title">Contents of transactions/hello_transaction.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const {
    BaseTransaction,
    TransactionError
} = require('@liskhq/lisk-transactions');

class HelloTransaction extends BaseTransaction {

    /**
    * Set the `HelloTransaction` transaction TYPE to `20`.
    * Every time a transaction is received, it is differentiated by the type.
    */
    static get TYPE () {
        return 20;
    }

    /**
    * Prepares the necessary data for the `apply` and `undo` step.
    * The "hello" property will be added only to the sender's account, therefore it is the only resource required in the `applyAsset` and `undoAsset` steps.
    */
	async prepare(store) {
		await store.account.cache([
			{
				address: this.senderId,
			},
		]);
	}

    /**
    * Validation of the value of the "hello" property, defined by the `HelloTransaction` transaction signatory.
    * In the implementation shown below, it checks that the value of the "hello" property needs to be a string which does not exceed 64 characters.
    */
	validateAsset() {
		const errors = [];
		if (!this.asset.hello || typeof this.asset.hello !== 'string' || this.asset.hello.length &gt; 64) {
			errors.push(
				new TransactionError(
					'Invalid "asset.hello" defined on transaction',
					this.id,
					'.asset.hello',
					this.asset.hello,
					'A string value no longer than 64 characters',
				)
			);
		}
		return errors;
	}

    /**
    * applyAsset is where the custom logic of the Hello World app is implemented.
    * applyAsset() and undoAsset() uses the information about the sender's account from the `store`.
    * Here it is possible to store additional information regarding the accounts using the `asset` field. The content property of "hello" transaction's asset is saved into the "hello" property of the account's asset.
    */
	async applyAsset(store) {
        const errors = [];
        const sender = await store.account.get(this.senderId);
        if (sender.asset &amp;&amp; sender.asset.hello) {
            errors.push(
                new TransactionError(
                    'You cannot send a hello transaction multiple times',
                    sender.asset.hello,
                    '.asset.hello',
                    this.asset.hello
                )
            );
        } else {
	        sender.asset = { hello: this.asset.hello };
            store.account.set(sender.address, sender);
        }
        return errors; // array of TransactionErrors, returns empty array if no errors are thrown
	}

    /**
    * Inverse of `applyAsset`.
    * Undoes the changes made in applyAsset() step - reverts to the previous value of "hello" property, if not previously set this will be null.
    */
	async undoAsset(store) {
		const sender = await store.account.get(this.senderId);
		sender.asset = null;
		store.account.set(sender.address, sender);
		return [];
	}
}

module.exports = HelloTransaction;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-an-instance-of-a-transaction"><a class="anchor" href="#creating-an-instance-of-a-transaction"></a>.2. Creating an instance of a transaction</h3>
<div class="listingblock">
<div class="title">How to create and sign a transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">import {
    HelloTransaction,
} from 'lisk-hello-transactions';

const helloTransaction = new HelloTransaction({
    asset: {
        hello: this.state.hello,
    },
    fee: utils.convertLSKToBeddows('0.1').toString(),
    nonce: this.state.nonce.toString(),
});

helloTransaction.sign(networkIdentifier,this.state.passphrase);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="registering-a-custom-transaction"><a class="anchor" href="#registering-a-custom-transaction"></a>.3. Registering a custom transaction</h3>
<div class="paragraph">
<p>Add a custom transaction to a blockchain application by registering it to the application instance as shown below:</p>
</div>
<div class="listingblock">
<div class="title">Contents of index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { Application, genesisBlockDevnet, configDevnet} = require('lisk-sdk');
const HelloTransaction = require('./hello_transaction'); <i class="conum" data-value="1"></i><b>(1)</b>

configDevnet.label = 'hello-world-blockchain-app';
//configDevnet.components.storage.user = 'lisk';
//configDevnet.components.storage.password = 'password';

const app = new Application(genesisBlockDevnet, configDevnet);
app.registerTransaction(HelloTransaction); <i class="conum" data-value="2"></i><b>(2)</b>

app
    .run()
    .then(() =&gt; app.logger.info('App started...'))
    .catch(error =&gt; {
        console.error('Faced error in application', error);
        process.exit(1);
    });</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Imports the custom transaction.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Registers the custom transaction with the application.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more information on creating your own custom transactions, please refer to the following guides:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="interact-with-api.html" class="xref page">Interact with the API</a></p>
</li>
<li>
<p><a href="broadcast.html" class="xref page">Broadcast a transaction</a></p>
</li>
<li>
<p><a href="frontend.html" class="xref page">Connect a frontend</a></p>
</li>
<li>
<p>Alternatively <a href="../../tutorials/index.html" class="xref page">follow the tutorials</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fees"><a class="anchor" href="#fees"></a>Fees</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A transaction fee is a specific amount of tokens that needs to be paid by the sender of a transaction.</p>
</div>
<div class="paragraph">
<p>The fees for every transaction can be defined dynamically, however there is always a minimum amount that needs to be paid for a transaction.
We define this minimum fee per transaction as shown below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>trs.minFee = trs.NAME_FEE + trs.MIN_FEE_PER_BYTE * trs.getBytes().length</pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name space fee - <code>NAME_FEE</code></dt>
<dd>
<p>Defines a specific amount of tokens that always need to be paid as a transaction fee, in addition to the fees generated by the <code>MIN_FEE_PER_BYTE</code> property.
It defaults to <code>0</code>, but can be overwritten as desired.
Amongst the Lisk default transactions, only one transaction has a custom <code>NAME_FEE</code>: the delegate registration (Type 10) and with a <code>NAME_FEE</code> of <code>1000000000</code>.</p>
</dd>
<dt class="hdlist1">Minimum fee per byte - <code>MIN_FEE_PER_BYTE</code></dt>
<dd>
<p>Defines the minimum amount of tokens that need to paid per byte of a particular transaction type.
It defaults to <code>1000</code>, but can be overwritten as desired.</p>
</dd>
</dl>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The right choice of the minimum fee per byte <code>MIN_FEE_PER_BYTE</code>, will have a significant impact in the network.
If the minimum required fee were too high, users would be discouraged from using the network.
If the value were too low, attackers would be able to broadcast many valid transactions at a very low cost and congest the network.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="fee-distribution"><a class="anchor" href="#fee-distribution"></a>Fee distribution</h3>
<div class="paragraph">
<p>The specified fee is automatically deducted from the account of the sender, after the transaction is included in a block.
The <code>trs.fee</code>, <code>trs.minFee</code> is burnt, whereas the <code>trs.fee - trs.minFee</code> is assigned to the delegate forging the block.</p>
</div>
</div>
<div class="sect2">
<h3 id="choosing-the-right-fee-for-a-transaction"><a class="anchor" href="#choosing-the-right-fee-for-a-transaction"></a>Choosing the right fee for a transaction</h3>
<div class="paragraph">
<p>Transactions with higher fees will often be included faster into the blockchain, as forging delegates prefer to include transactions in their block, that provide them with a high amount of transaction fees.
This is often the case if there are many transactions in the transaction pool, as it is not possible to include all of them in a single block.
Transactions with lower fees in this case might remain in the transaction pool a little longer, until the transaction pool is less crowded.</p>
</div>
<div class="sect3">
<h4 id="fee-estimation-algorithm"><a class="anchor" href="#fee-estimation-algorithm"></a>Fee estimation algorithm</h4>
<div class="paragraph">
<p>The user needs to be aware of the current suitable fee for transactions, which is related to the immediate past state of the network.
Hence, it is reasonable to develop a fee estimation algorithm to recommend the fee that the users should include in their transaction, for it to be included in a block after a certain period of time.</p>
</div>
<div class="paragraph">
<p>Most frontend applications should assist the user by finding the right fee for a particular transaction.
A simple code example demonstrating how to validate a transaction fee can be found in the <a href="broadcast.html#fee" class="xref page">Broadcast a transaction</a> guide.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="how-to-invalidate-a-transaction"><a class="anchor" href="#how-to-invalidate-a-transaction"></a>How to invalidate a transaction</h3>
<div class="paragraph">
<p>In the case whereby a transaction remains in the transaction pool for a long time because of a fee that was too low, it is possible to send a new transaction with identical values, except the fee which of course should be increased.
The new transaction with a higher fee will soon be included in a block, and therefore invalidate the old transaction with a low fee.</p>
</div>
<div class="sect3">
<h4 id="is-it-possible-to-create-transactions-with-no-transaction-fees"><a class="anchor" href="#is-it-possible-to-create-transactions-with-no-transaction-fees"></a>Is it possible to create transactions with no transaction fees?</h4>
<div class="paragraph">
<p>Yes, it is still possible to develop custom transactions with no transaction fees by overriding the <code>MIN_FEE_PER_BYTE</code> property of a custom transaction to <code>MIN_FEE_PER_BYTE=0</code>.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please be aware that this is generally not recommended, as it makes the network vulnerable to spam attacks.
If you choose to set <code>MIN_FEE_PER_BYTE</code> to <code>0</code> or to a very low amount, think of alternative ways how to avoid spam attacks.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="default_transactions"><a class="anchor" href="#default_transactions"></a>Default transaction types</h2>
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Transaction types 0-15 are reserved for the <a href="../../../../beta/understand-blockchain/lisk-protocol/index.html" class="xref page">Lisk protocol</a>.
Do not use these to register custom transactions.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each default transaction type implements a different use case of the Lisk network.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">transfer transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">register delegate transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">multisignature transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">vote transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">13</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">unlock transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">proof of misbehaviour transaction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more detailed explanations of all default transaction types, please see the section <a href="../../../../beta/understand-blockchain/lisk-protocol/transactions.html" class="xref page">transactions of the Lisk protocol</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="interface"><a class="anchor" href="#interface"></a>The BaseTransaction interface</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>BaseTransaction</code> class is the interface that all other transaction types need to inherit from, including the <a href="#default_transactions">default transaction types</a>, in order to be compatible with the Lisk SDK.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the <a href="https://github.com/LiskHQ/lisk-sdk/blob/v4.0.0/elements/lisk-transactions/src/base_transaction.ts" target="_blank" rel="noopener">BaseTransaction</a> in the <code>lisk-sdk</code> repository on Github.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="required-properties"><a class="anchor" href="#required-properties"></a>Required properties</h3>
<div class="paragraph">
<p>The following properties and methods need to be implemented by a custom transaction, when extending from the <code>BaseTransaction</code>:</p>
</div>
<div class="sect3">
<h4 id="type"><a class="anchor" href="#type"></a>TYPE</h4>
<div class="paragraph">
<p>The type is a unique identifier for your custom transaction within your own blockchain application.
This can be thought of as the hallmark of a transaction. Set this constant to any number, except 0-12, which are reserved for the default transactions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">static TYPE: number</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="required-methods"><a class="anchor" href="#required-methods"></a>Required methods</h3>
<div class="sect3">
<h4 id="prepare"><a class="anchor" href="#prepare"></a>prepare</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store: StateStorePrepare): Promise&lt;void&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>In <code>prepare()</code> the data from the database is filtered and cached, that is needed in the <code>applyAsset</code> and <code>undoAsset</code> functions later.</p>
</div>
</div>
<div class="sect3">
<h4 id="validateasset"><a class="anchor" href="#validateasset"></a>validateAsset</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">validateAsset(): ReadonlyArray&lt;TransactionError&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Before a transaction reaches the apply step it is validated.
Check the transaction’s asset correctness from the schema perspective, (no access to StateStore here).
Invalidate the transaction by pushing an error into the result array.
Prepare the relevant information about the accounts, which will be accessible in the later steps during the <code>apply</code> and <code>undo</code> steps.</p>
</div>
</div>
<div class="sect3">
<h4 id="applyasset"><a class="anchor" href="#applyasset"></a>applyAsset</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async applyAsset(store: StateStore): Promise&lt;ReadonlyArray&lt;TransactionError&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The business logic of a transaction is implemented in the <code>applyAsset</code> method.
It applies all of the necessary changes from the received transaction to the affected account(s), by calling <code>store.set</code>.
Calling <code>store.get</code> will acquire all of the relevant data.
The transaction that is currently processing is the function’s context, (e.g. <code>this.amount</code>).
This transaction can be invalidated by pushing an error into the result array.</p>
</div>
</div>
<div class="sect3">
<h4 id="undoasset"><a class="anchor" href="#undoasset"></a>undoAsset</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async undoAsset(store: StateStore): Promise&lt;ReadonlyArray&lt;TransactionError&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The inversion of the <code>applyAsset</code> method.
Undoes all of the changes to the accounts applied by the <code>applyAsset</code> step.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="additional-methods-properties"><a class="anchor" href="#additional-methods-properties"></a>Additional methods &amp; properties</h3>
<div class="paragraph">
<p>It&#8217;s possible to override the default values of <code>MIN_FEE_PER_BYTE</code>, <code>NAME_FEE</code> properties of a custom transaction depending on the use case.</p>
</div>
<div class="paragraph">
<p>The <code>BaseTransaction</code> provides the default implementation of the methods revolving around the signatures.
As your application matures it is possible to implement custom methods of how your transaction’s signature is derived: <code>sign</code>, <code>getBytes</code>, <code>assetToBytes</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="best-practice-always-extend-a-custom-transaction-from-the-basetransaction"><a class="anchor" href="#best-practice-always-extend-a-custom-transaction-from-the-basetransaction"></a>Best practice: Always extend a custom transaction from the <code>BaseTransaction</code></h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is also possible to extend from one of the default transactions or other custom transactions, in order to extend or modify them.</p>
</div>
<div class="paragraph">
<p>In most cases though, this is not recommended because updates in the logic of the inherited transaction can break the logic of the custom transaction.</p>
</div>
<div class="paragraph">
<p>To avoid the possibility of incompatibilities, always extend from the <code>BaseTransaction</code>:</p>
</div>
<div class="listingblock">
<div class="title">Extending from the <code>BaseTransaction</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const {
    BaseTransaction,
    TransactionError
} = require('@liskhq/lisk-transactions');

class HelloTransaction extends BaseTransaction {
[...]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="store"><a class="anchor" href="#store"></a>The Store</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Store is responsible for the caching and accessing transaction and account data.
The <code>store</code> is available inside the <code>prepare()</code>, <code>applyAsset()</code>, and <code>undoAsset()</code> methods and provides methods to get and set the data from the database.</p>
</div>
<div class="sect2">
<h3 id="cache"><a class="anchor" href="#cache"></a>Cache</h3>
<div class="listingblock">
<div class="title">How to cache data from the database</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    await store.account.cache([
        {
            address: this.senderId,
        },
    ]);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="filters"><a class="anchor" href="#filters"></a>Filters</h3>
<div class="paragraph">
<p>Depending on the datatype, there are different filters that can be applied when caching accounts or transactions from the database.</p>
</div>
<div class="paragraph">
<p>The following table provides an overview of which filters are available, depending on the datatype of the filtered data.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Filter Type</th>
<th class="tableblock halign-left valign-top">Filter Suffixes</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BOOLEAN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_eql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that match the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_ne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that do not match the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TEXT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_eql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that match the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_ne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that do not match the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that match any of values from the list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_like</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that match the pattern</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUMBER</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_eql</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that match the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_ne</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that do not match the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_gt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries greater than the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_gte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries greater than or equal to the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_lt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries less than the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_lte</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries less than or equal to the value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">_in</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">returns entries that match any of values from the list</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">All available filters on GitHub</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/LiskHQ/lisk-sdk/blob/v4.0.0/framework/src/components/storage/entities/transaction.js" target="_blank" rel="noopener">Filter for transactions</a></p>
</li>
<li>
<p><a href="https://github.com/LiskHQ/lisk-sdk/blob/v4.0.0/framework/src/components/storage/entities/account.js" target="_blank" rel="noopener">Filter for accounts</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Caches all accounts in the list</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    await store.account.cache({
	    address_in: [
            "16152155423726476379L",
            "12087516173140285171L",
        ],
    });
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Join different filters with OR combinator</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    await store.account.cache([
        {
            isDelegate_eq: false,
        },
        {
            balance_gt: 0,
        }
    ]);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Join different filters with AND combinator</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    await store.account.cache([
        {
            isDelegate_eq: false,
            balance_gt: 0,
        }
    ]);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Caches accounts based on data from the db</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    /**
     * Get packet account.
     */
    await store.account.cache([
        {
            address: this.recipientId,
        }
    ]);
    /**
     * Get sender and recipient accounts of the packet.
     */
    const pckt = await store.account.get(this.recipientId);
    await store.account.cache([
        {
            address_in: [
                pckt.asset.carrier, pckt.asset.sender
            ]
        },
    ]);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Two very useful filters for the accounts are <code>asset_contains</code> and <code>asset_exists</code>:</p>
</div>
<div class="listingblock">
<div class="title">Caches all accounts that contain the asset key "foo"</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    await store.account.cache([
        {
            asset_exists: "foo",
        },
    ]);
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Caches all accounts that contain the value "bar" in their asset</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">async prepare(store) {
    await store.account.cache([
        {
            asset_contains: "bar",
        },
    ]);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="getter"><a class="anchor" href="#getter"></a>Getter</h3>
<div class="paragraph">
<p>A getter retrieves a single element from the StateStore and requests an account object.</p>
</div>
<div class="paragraph">
<p>Getters are used inside of the <code>applyAsset()</code> and <code>undoAsset()</code> functions of a custom transaction.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>get(key) — Retrieve a single element from the store. The key here accepts an address.</p>
</li>
<li>
<p>getOrDefault(key) — Get account object from store or create default account if it does not exist.</p>
</li>
<li>
<p>find(fn) — Accepts a lambda expression for finding the data that matches the expression.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Gets the account of the sender</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const sender = await store.account.get(this.senderId);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setter"><a class="anchor" href="#setter"></a>Setter</h3>
<div class="paragraph">
<p>A setter allows changes to be made to the overall StateStore, e.g. updating and saving a property for an amount object.</p>
</div>
<div class="paragraph">
<p>Setters are used inside of the <code>applyAsset()</code> and <code>undoAsset()</code> functions of a custom transaction.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>set(key, updatedObject) — Allows the updating of an account in the database (account is only read-write store).</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">store.account.set(sender.address, sender);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-is-the-lifecycle-of-a-transaction"><a class="anchor" href="#what-is-the-lifecycle-of-a-transaction"></a>What is the lifecycle of a transaction?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lifecycle of a general transaction using the Lisk SDK can be summarized in the following 7 steps below:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>A transaction is created and signed, (off-chain).</strong>
The script to execute this is as follows: <code>src/create_and_sign.ts</code>.</p>
</li>
<li>
<p><strong>The transaction is sent to a network.</strong>
This can be performed by using a third party tool, (such as <code>curl</code> or <code>Postman</code>).
However, this can also be achieved by using Lisk Commander, Lisk Desktop or Mobile.
All of the tools need to be authorized to access an HTTP API of a network node.</p>
</li>
<li>
<p><strong>A network node receives the transaction</strong> and after a lightweight schema validation, adds it to a transaction pool.</p>
</li>
<li>
<p><strong>In the <a href="../../../../beta/understand-blockchain/lisk-protocol/network.html#pool" class="xref page">transaction pool</a>, firstly the transactions are <code>validated</code>.</strong>
In this step, only static checks are performed, which include schema validation and signature validation.</p>
</li>
<li>
<p><strong>Validated transactions go to the <code>prepare</code> step</strong>, as defined in the transaction class, which to limit the I/O database operations, prepares all the information relevant to properly <code>apply</code> or <code>undo</code> the transaction.
The store with the prepared data is a parameter of the afore-mentioned methods.</p>
</li>
<li>
<p><strong>Delegates forge the valid transactions into blocks</strong> and broadcasts the blocks to the network.
Each network node performs the <code>apply</code> and <code>applyAsset</code> steps, after the successful completion of the <code>validate</code> step.</p>
</li>
<li>
<p><strong>Shortly after a block is applied, it is possible that a node performs the <code>undo</code> step</strong>; (due to decentralized network conditions).
If this occurs, then the block containing all of the included transactions is reverted in favor of a competing block.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>While implementing a custom transaction, it is necessary to complete some of these steps.
Often, a base transaction implements a default behavior.
With experience, you may decide to override some of these base transaction methods, resulting in an implementation that is well-tailored and provides the best possible performance for your specific use case.</p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="configuration.html">Configure a blockchain application</a></span>
  <span class="next"><a href="test-transaction.html">Test a transaction</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../../_/js/vendor/component-versions.js"></script>
<script src="../../../../_/js/vendor/custom.js"></script>
  <script src="../../../../_/js/vendor/docsearch.js"></script>
  <!--<script src="../../../../_/js/vendor/docsearch.min.js"></script>-->
  <!--<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>-->
  <script>
    docsearch({
      container: '#docsearch',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
    docsearch({
      container: '#docsearch-toolbar',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
  </script>
  <!--<script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>-->
<!--  <script>
    function focusSearchInputToolbar () { document.querySelector('#search-input-toolbar').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input-toolbar',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInputToolbar()
    window.addEventListener('load', focusSearchInputToolbar)
  </script>-->
  </body>
</html>
