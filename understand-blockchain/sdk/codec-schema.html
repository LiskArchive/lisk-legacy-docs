<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Codec &amp; schema :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/understand-blockchain/sdk/codec-schema.html">
    <link rel="prev" href="rpc.html">
    <link rel="next" href="../../build-blockchain/index.html">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../_/css/dark-site.css">

    <script>var uiRootPath = '../../_'</script>
    <script src="../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>

<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../.." class="lisk-logo"></a>
        <a href="../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../index.html">Lisk Documentation</a>
        <a class="component" href="../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
      </div>
  <span></span>
  <span></span>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk Documentation</a></li>
    <li><a href="../index.html">Understand Lisk Blockchain</a></li>
    <li><a href="codec-schema.html">Codec &amp; schema</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1614-Update-RPC-Endpoints-Events/docs/modules/ROOT/pages/understand-blockchain/sdk/codec-schema.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/blockchain-scalability.html">Blockchain Scalability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/lisk-products.html">Lisk products</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../index.html">Understand Lisk Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../state-machine.html">State machine</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../consensus/index.html">Consensus protocols</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/dpos-poa.html">Block generator selection algorithms</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/bft.html">Lisk BFT</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/certificates.html">Lisk Certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../interoperability/index.html">Lisk Interoperability</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interoperability/communication.html">Cross-chain communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interoperability/sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../blocks-txs.html">Blocks and Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="modules-commands.html">Modules and Commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rpc.html">Communicating to a Lisk node via RPC</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="codec-schema.html">Codec &amp; schema</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../build-blockchain/index.html">Build Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-blockchain-app.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/configuration.html">Sidechain client configuration</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../build-blockchain/module/index.html">How to create a module</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/configuration.html">1. How to create a module configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/stores.html">2. How to create stores</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/command.html">3. How to create a command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/endpoints-methods.html">4. How to create endpoints and methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/blockchain-event.html">5. How to create a blockchain event</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../build-blockchain/plugin/index.html">How to create a plugin</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/schema-types.html">1. Defining off-chain data structures</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/offchain-db.html">2. Setting up an Off-chain database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/configuring-plugin.html">3. Configuring a Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/plugin-class.html">4. Updating the Plugin Class</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/plugin-endpoints.html">5. Creating an endpoint &amp; Testing the plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../run-blockchain/index.html">Run Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/forging.html">Enabling forging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../integrate-blockchain/index.html">Integrate Blockchain</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-sdk/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-core/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">3.0.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v4/index.html">4.0.0-beta.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.6.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-service/v0.7/index.html">0.7.0 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Codec &amp; schema</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Schemas are used in various places in the Lisk SDK to encode and decode the data that is retrieved or pushed to the database.</p>
</div>
<div class="paragraph">
<p>Schemas are specifically used in the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>modules</strong> to define the <a href="modules-commands.html#account-schema" class="xref page">accountSchema</a>, which consists of module-specific properties that are added to each account by the module.</p>
</li>
<li>
<p><strong>assets</strong>, for the <a href="modules-commands.html#transaction-asset-schema" class="xref page">schema</a>, which defines the data structure and formats of the transaction asset.</p>
</li>
<li>
<p>modules and/or assets, to <a href="#decoding-and-encoding-data">decode/encode</a> other specific data from the database, such as blocks, transactions, account state, and chain state data.</p>
</li>
</ul>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#schema-format">Schema Format</a>
<ul class="sectlevel2">
<li><a href="#id">$id</a></li>
<li><a href="#type">type</a></li>
<li><a href="#required">required</a></li>
<li><a href="#properties">properties</a></li>
<li><a href="#default">default</a></li>
</ul>
</li>
<li><a href="#data-types">Data types</a></li>
<li><a href="#decoding-and-encoding-data">Decoding and encoding data</a>
<ul class="sectlevel2">
<li><a href="#with-the-api-client">With the API client</a></li>
<li><a href="#with-lisk-codec">With lisk-codec</a></li>
</ul>
</li>
<li><a href="#converting-between-formats">Converting between formats</a>
<ul class="sectlevel2">
<li><a href="#string-to-buffer">String to Buffer</a></li>
<li><a href="#buffer-to-string">Buffer to String</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="schema-format"><a class="anchor" href="#schema-format"></a>Schema Format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Schemas must be defined as shown below, which is a modified JSON (JavaScript Object Notation), schema (see the <a href="https://json-schema.org/specification.html" target="_blank" rel="noopener">JSON schema reference</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is required to use camelCase for the key naming.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the data type of a property is either an <code>object</code> or an <code>array</code>, the <code>type</code> property must be used instead of <code>dataType</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example of an account schema of a module</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">export const lnsAccountPropsSchema = {
	$id: 'lisk/lns/lnsAccount',
	type: 'object',
	required: ['ownNodes', 'reverseLookup'],
	properties: {
		reverseLookup: {
			dataType: 'bytes',
			fieldNumber: 1,
		},
		ownNodes: {
			type: 'array',
			fieldNumber: 2,
			items: {
				dataType: 'bytes',
			},
		},
	},
	default: {
		ownNodes: [],
		reverseLookup: EMPTY_BUFFER,
	},
};</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="id"><a class="anchor" href="#id"></a>$id</h3>
<div class="paragraph">
<p>Unique identifier of the schema throughout the system.</p>
</div>
<div class="paragraph">
<p>The $id property is directly inherited from the JSON-schema.
You can read more about the <code>id</code> property on <a href="https://json-schema.org/understanding-json-schema/structuring.html#id" class="bare" target="_blank" rel="noopener">https://json-schema.org/understanding-json-schema/structuring.html#id</a>.</p>
</div>
<div class="paragraph">
<p>In general, adhere to the following criteria:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use unique IDs across the system.</p>
</li>
<li>
<p>Use path like format for easy readability, (it is not an actual requirement).</p>
</li>
<li>
<p>in order to ensure no mixing of any schema with other registered schemas occurs, use one fixed identifier for your app in each ID.</p>
</li>
<li>
<p><code>`</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="type"><a class="anchor" href="#type"></a>type</h3>
<div class="paragraph">
<p>Root type of the schema must be type <code>object</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="required"><a class="anchor" href="#required"></a>required</h3>
<div class="paragraph">
<p>Required schema properties.</p>
</div>
<div class="paragraph">
<p>Regarding account and asset schemas:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If the schema is used for serialization it is recommended to put all properties as <code>required</code> to guarantee the <a href="https://github.com/LiskHQ/lips/blob/master/proposals/lip-0027.md#uniqueness-of-encoding" target="_blank" rel="noopener">uniqueness of encoding</a>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="properties"><a class="anchor" href="#properties"></a>properties</h3>
<div class="paragraph">
<p>Properties of the schema.</p>
</div>
</div>
<div class="sect2">
<h3 id="default"><a class="anchor" href="#default"></a>default</h3>
<div class="paragraph">
<p>Default property values.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Do not define any <code>default</code> properties for asset schemas.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="data-types"><a class="anchor" href="#data-types"></a>Data types</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The application data is stored in specific data types and structures in the database.</p>
</div>
<div class="paragraph">
<p>A schema always defines the data types that will be used in the database to store specific data.
When the data is retrieved from the database by a module or plugin of the blockchain application, it is returned as a JavaScript object or JSON, depending on the context:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">JavaScript object</dt>
<dd>
<p>These data types are used <strong>internally</strong> in the blockchain application to handle data from the database.</p>
</dd>
<dt class="hdlist1">JSON</dt>
<dd>
<p>Data that is provided by <strong>actions</strong> and <strong>events</strong> is always returned in JSON format.</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<caption class="title">Table 1. Table: Data types of the different data structures</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Data type</th>
<th class="tableblock halign-left valign-top">JavaScript object</th>
<th class="tableblock halign-left valign-top">JSON</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">sint64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">BigInt</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bytes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Buffer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string in hex format</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="decoding-and-encoding-data"><a class="anchor" href="#decoding-and-encoding-data"></a>Decoding and encoding data</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="with-the-api-client"><a class="anchor" href="#with-the-api-client"></a>With the API client</h3>
<div class="paragraph">
<p>Please refer to the dedicated guide <a href="../../integrate-blockchain/encode-decode.html" class="xref page">Decoding &amp; encoding data</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="with-lisk-codec"><a class="anchor" href="#with-lisk-codec"></a>With lisk-codec</h3>
<div class="paragraph">
<p>To conveniently decode and encode the data structures stored on the blockchain, such as blocks, transactions, account state, and chain state, use the <code>codec</code> library.
The library can be imported from the following NPM packages:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>lisk-sdk</code></p>
</li>
<li>
<p><code>@liskhq/lisk-client</code></p>
</li>
<li>
<p><code>@liskhq/lisk-codec</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example: Importing the <code>codec</code> library from the <code>lisk-sdk</code> package</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const {
    codec,
} = require('lisk-sdk');

const CHAIN_STATE_KEY = "myContext:moreContext";

const schema = {
    $id: "lisk/myContext/moreContext",
    type: "object",
    required: ["myCounter"],
    properties: {
        myCounter: {
            dataType: "uint32",
            fieldNumber: 1,
        },
    },
    default: {
      myCounter: 0
    }
};

// Get data from the database
let counterBuffer = await stateStore.chain.get(
    CHAIN_STATE_KEY
);

// Decode the retrieved data with the schema
let counter = codec.decode(
    schema,
    counterBuffer
);

// Mutate the retrieved data
counter.myCounter++;

// Post the data back to the database
await stateStore.chain.set(
    CHAIN_STATE_KEY,
    // Encode the data again before sending it to the DB
    codec.encode(schema, counter)
);</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="converting-between-formats"><a class="anchor" href="#converting-between-formats"></a>Converting between formats</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Account addresses are stored as binary data in the database.
However, in other parts of the application, the data is expected as a hexadecimal string, which is more human-readable.</p>
</div>
<div class="paragraph">
<p>On the other hand, the node API always returns the data such as blocks and transactions in hex string. However, please be aware that to decode transactions or blocks, they need to be in <code>Buffer</code> format.</p>
</div>
<div class="paragraph">
<p>In these cases, it is necessary to convert between <code>Buffer</code> and <code>String</code> as described below:</p>
</div>
<div class="sect2">
<h3 id="string-to-buffer"><a class="anchor" href="#string-to-buffer"></a>String to Buffer</h3>
<div class="paragraph">
<p>Use <code>Buffer.from(data, 'hex')</code> to convert a hex string to a Buffer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">this._channel.subscribe('app:block:new', async (data) =&gt; {
  const { block } = data;
  const { payload } = codec.decode(
    this.schemas.block,
    Buffer.from(block, 'hex'),
  );
  // ...
});</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="buffer-to-string"><a class="anchor" href="#buffer-to-string"></a>Buffer to String</h3>
<div class="paragraph">
<p>Use <code>.toString('hex')</code> to convert a Buffer to a hex string.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">this._channel.publish('srs:configCreated', {
  address: transaction._senderAddress.toString('hex'),
  // ...
});</code></pre>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="rpc.html">Communicating to a Lisk node via RPC</a></span>
  <span class="next"><a href="../../build-blockchain/index.html">Build Blockchain</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../_/js/vendor/component-versions.js"></script>
<script src="../../_/js/vendor/custom.js"></script>
  </body>
</html>
