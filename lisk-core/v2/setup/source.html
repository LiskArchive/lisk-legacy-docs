<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Source code setup :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/lisk-core/v2/setup/source.html">
    <link rel="prev" href="docker.html">
    <link rel="next" href="../management/application.html">
    <meta name="description" content="Describes all requirements and dependencies to install Lisk Core from Source.">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../../_/css/dark-site.css">

    <script>var uiRootPath = '../../../_'</script>
    <script src="../../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://lisk.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
    <!-- Matomo Tag Manager -->
    <script>
      var _mtm = window._mtm = window._mtm || [];
      _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
    </script>
    <!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../.." class="lisk-logo"></a>
        <a href="../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
        <div id="docsearch" class="navbar-menu search-box hide-for-print">
          <!--<input id="search-input-toolbar" type="text" placeholder="Search me ...">-->
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Core</button>
    <div class="component-menu">
        <a class="component is-current" href="../index.html">Lisk Core</a>
        <a class="component" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component" href="../../../beta/index.html">Lisk Documentation</a>
        <a class="component" href="../../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../../lisk-service/v0.7/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.1.7</button>
  <div class="version-menu">
    <a class="version" href="../../v4/setup/source.html">4.0.0-beta.0</a>
    <a class="version is-current" href="source.html">2.1.7</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
  <a href="../../../beta/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Core</a></li>
    <li>Setup</li>
    <li><a href="source.html">Source code</a></li>
  </ul>
</nav>
    <div id="docsearch-toolbar" class="search-box hide-for-print toolbar-search">
      <!--<input id="search-input" type="text" placeholder="Search me ...">-->
    </div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-core-v2/modules/ROOT/pages/setup/source.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="lisk-core" data-version="v2">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Core</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Lisk Core introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../interact-with-the-api.html">Interact with the API</a>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="application.html">Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="commander.html">Commander application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="docker.html">Docker image</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="source.html">Source code</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/application.html">Application commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/commander.html">Commander application commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/docker.html">Docker image commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/source.html">Source code commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/configuration.html">Handle config files</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/forging.html">Enable forging</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Update</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/application.html">Application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/commander.html">Commander application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/docker.html">Docker image</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/source.html">Source code</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/api-mainnet.html">API (Mainnet)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/api.html">API (Testnet)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/config.html">Configuration</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Core</span>
    <span class="version">2.1.7</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version">
          <a href="../../v4/index.html">4.0.0-beta.0</a>
        </li>
        <li class="version is-current is-latest">
          <a href="../index.html">2.1.7</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../beta/index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../beta/index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-service/v0.7/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-service/v0.7/index.html">0.7.0 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Source code setup</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#source_pre_install">Pre-install</a>
<ul class="sectlevel2">
<li><a href="#ports">Ports</a></li>
<li><a href="#create-a-new-user">Create a new user</a></li>
<li><a href="#toolchain-components">Toolchain components</a></li>
<li><a href="#git">Git</a></li>
<li><a href="#postgresql">PostgreSQL</a></li>
<li><a href="#node-js">Node.js</a></li>
<li><a href="#pm2-optional">PM2 (optional)</a></li>
<li><a href="#redis-optional">Redis (optional)</a></li>
</ul>
</li>
<li><a href="#install">Installation</a>
<ul class="sectlevel2">
<li><a href="#login-as-the-lisk-user">Login as the Lisk user</a></li>
<li><a href="#installing-lisk-from-source-code">Installing Lisk from Source code</a></li>
</ul>
</li>
<li><a href="#post-installation-optional">Post-installation (optional)</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This is designed for anyone wishing to develop on the Lisk Core codebase.
It also comes with an extensive test-suite which is described in the following <code>README.md</code>.
An installation performed from source code enables a developer to work on the latest codebase for Lisk Core, which may not have been tagged for a release yet.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="source_pre_install"><a class="anchor" href="#source_pre_install"></a>Pre-install</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To complete the installation it is necessary to fulfill some prerequisites.
If you have already performed these, please proceed to the <a href="#install">Installation</a> chapter.</p>
</div>
<div class="sect2">
<h3 id="ports"><a class="anchor" href="#ports"></a>Ports</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p><strong>Mandatory:</strong> Always open the <strong>WebSocket</strong> port of your desired network, to enable communication with other peer nodes.</p>
</div>
<div class="paragraph">
<p><strong>Optional:</strong> Open the corresponding HTTP port for your network, to make your node’s <a href="../reference/api.html" class="xref page">API</a> reachable.
For more information, see the diagram on the <a href="../interact-with-the-api.html" class="xref page">Interact with the API</a> page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To connect to the desired network with Lisk Core, please ensure that the corresponding ports listed below are open:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Network</th>
<th class="tableblock halign-left valign-top">HTTP</th>
<th class="tableblock halign-left valign-top">WebSocket</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mainnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Testnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">7001</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Devnet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4000</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These are the default ports for connecting with the network.
They can be altered later in the <a href="../management/configuration.html" class="xref page"><code>config.json</code></a> file.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-a-new-user"><a class="anchor" href="#create-a-new-user"></a>Create a new user</h3>
<div class="paragraph">
<p>To run and manage a Lisk Core node in the future, please create a separate <code>lisk</code> user as described below:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_ubuntu"></a>Ubuntu</p>
</li>
<li>
<p><a id="tabset1_macos"></a>MacOS</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_ubuntu">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>lisk</code> user itself <strong>does not need</strong> any <code>sudo</code> rights to run the Lisk Core.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo adduser lisk              <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a new user.</td>
</tr>
</table>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_macos">
<div class="paragraph">
<p>It is not necessarily required to set up a <code>lisk</code> user, especially when you are running a local instance for development purposes.</p>
</div>
<div class="paragraph">
<p>However, if it is required then it is recommended to create the user using the macOS GUI: <a href="https://support.apple.com/en-gb/guide/mac-help/mtusr001/mac" class="bare">https://support.apple.com/en-gb/guide/mac-help/mtusr001/mac</a></p>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="toolchain-components"><a class="anchor" href="#toolchain-components"></a>Toolchain components</h3>
<div class="paragraph">
<p>These are used for compiling dependencies.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_ubuntu"></a>Ubuntu</p>
</li>
<li>
<p><a id="tabset2_macos"></a>MacOS</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_ubuntu">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo apt update
sudo apt install -y libtool automake autoconf curl build-essential python-minimal</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_macos">
<div class="paragraph">
<p>Ensure that both <a href="https://developer.apple.com/xcode/">XCode</a> and <a href="https://brew.sh/">Homebrew</a> are installed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew install autoconf automake libtool</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="git"><a class="anchor" href="#git"></a>Git</h3>
<div class="paragraph">
<p><a href="https://github.com/git/git">Git</a> is used for cloning and updating Lisk.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_ubuntu"></a>Ubuntu</p>
</li>
<li>
<p><a id="tabset3_macos"></a>MacOS</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_ubuntu">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo apt install -y git</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_macos">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew install git</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="postgresql"><a class="anchor" href="#postgresql"></a>PostgreSQL</h3>
<div class="paragraph">
<p>To install PostgreSQL please follow the instructions described below:</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
It is recommended to use PostgreSQL with Docker for a quick and straight forward setup of PostgreSQL, and also PostgreSQL system-wide for production environments.
</td>
</tr>
</table>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_postgressql-system-wide"></a>PostgresSQL system wide</p>
</li>
<li>
<p><a id="tabset4_postgressql-with-docker"></a>PostgresSQL with Docker</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_postgressql-system-wide">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See instructions for MacOS below.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Ubuntu</strong></p>
</div>
<div class="paragraph">
<p>Firstly, install PostgreSQL on your machine as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo apt-get purge -y postgres* <i class="conum" data-value="1"></i><b>(1)</b>
sudo sh -c 'echo "deb http://apt.postgresql.org/pub/repos/apt/ $(lsb_release -cs)-pgdg main" &gt; /etc/apt/sources.list.d/pgdg.list'
sudo apt install wget ca-certificates
wget --quiet -O - https://www.postgresql.org/media/keys/ACCC4CF8.asc | sudo apt-key add -
sudo apt update
sudo apt install postgresql-10</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Remove all already installed PostgresSQL versions.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After installation, it should be possible to see the PostgresSQL database cluster by executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pg_lsclusters</code></pre>
</div>
</div>
<div class="paragraph">
<p>Drop the existing database cluster, and replace it with a cluster with the locale <code>en_US.UTF-8</code> as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo pg_dropcluster --stop 10 main
sudo pg_createcluster --locale en_US.UTF-8 --start 10 main</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a new database user called <code>lisk</code> and grant it rights to create databases.
Then create the database with the Lisk user as the owner.
In the last step, define the password for the Lisk user as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo -u postgres -i createuser --createdb lisk
sudo -u postgres -i createdb lisk_&lt;NETWORK&gt; --owner lisk
sudo -u postgres psql -d lisk_&lt;NETWORK&gt; -c "alter user lisk with password 'password';"</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;NETWORK&gt;</code> may be <code>main</code> for Mainnet, <code>test</code> for Testnet or <code>dev</code> for Devnet.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Change <code>password</code> to a secure password of your choice.
Do not forget to update this password in the <a href="../management/configuration.html" class="xref page">Lisk Core configuration</a> later on.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>MacOS</strong></p>
</div>
<div class="paragraph">
<p>Install PostgresSQL version 10 by executing the following command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew install postgresql@10</code></pre>
</div>
</div>
<div class="paragraph">
<p>Execute the following to have PostgreSQL commands, (e.g. <code>psql</code>) in your PATH as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">echo 'export PATH="/usr/local/opt/postgresql@10/bin:$PATH"' &gt;&gt; ~/.bash_profile
source ~/.bash_profile</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start PostgreSQL, create the <code>lisk</code> user and the database by executing the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pg_ctl -D /usr/local/var/postgresql@10 start
createuser lisk
createdb --owner=lisk lisk_&lt;NETWORK&gt;
psql --dbname=lisk_&lt;NETWORK&gt; --command="ALTER USER lisk WITH PASSWORD 'password';"</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>&lt;NETWORK&gt;</code> may be <code>main</code> for Mainnet, <code>test</code> for Testnet or <code>dev</code> for Devnet.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Change <code>password</code> to a secure password of your choice.
Do not forget to update this password in the <a href="../management/configuration.html" class="xref page">Lisk Core configuration</a> later on.
</td>
</tr>
</table>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_postgressql-with-docker">
<div class="paragraph">
<p>Running PostgresSQL inside a Docker container will setup the correct version of PostgresSQL, and containerize it away from any existing versions you may have locally on your machine.
Choose this setup if you are unfamiliar with PostgresSQL, or if other issues occur with a previously installed version of PostgresSQL.
To perform the command below successfully, install Docker as described in the <a href="#{url_docker_setup]">Lisk Core Docker image set up</a>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If you have other versions of PostgreSQL installed on your machine, ensure they are stopped before starting the Docker container.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker run --name lisk_core_db -p 5432:5432 -e POSTGRES_USER=lisk -e POSTGRES_PASSWORD=password -e POSTGRES_DB=lisk_&lt;NETWORK&gt; -d postgres:10</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command above will install PostgreSQL version 10 (<code>postgres:10</code>) in a container with the name <code>lisk_core_db</code>, and binds the port <code>5432</code> of the container with the same port of the machine.
As environment variables we expose <code>POSTGRES_USER=lisk</code> to create the lisk user and <code>POSTGRES_PASSWORD=password</code> to set the password for the Lisk user.
Finally, the environment variable <code>POSTGRES_DB</code> creates the database <code>lisk_&lt;NETWORK&gt;</code> with the <code>lisk</code> user as the owner.</p>
</div>
<div class="paragraph">
<p>The above commands should be enough to set up the database ready to use with Lisk Core.
To manage the Docker container, execute the following commands below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker stop lisk_core_db <i class="conum" data-value="1"></i><b>(1)</b>
docker start lisk_core_db <i class="conum" data-value="2"></i><b>(2)</b>
docker restart lisk_core_db <i class="conum" data-value="3"></i><b>(3)</b>
docker rm lisk_core_db <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Stop the container.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Start the container.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Restart the container.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Remove the container.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case it is required to access PostgresSQL inside the container via the CLI, execute the following command below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker exec --tty --interactive lisk_core_db psql -h localhost -U lisk -d postgres</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="node-js"><a class="anchor" href="#node-js"></a>Node.js</h3>
<div class="paragraph">
<p><a href="https://nodejs.org/">Node.js</a> serves as the underlying engine for code execution.
There are several different methods and version managers to install Node.js on your system.
It is recommended to utilise one of the following two options shown below:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset5_option-a---node-version-manager"></a>Option A - Node version manager</p>
</li>
<li>
<p><a id="tabset5_option-b---node-js-package"></a>Option B - Node.js package</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset5_option-a---node-version-manager">
<div class="paragraph">
<p>It is recommended to use a node version manager such as <a href="https://github.com/creationix/nvm">NVM</a>.
NVM is a bash script that enables the management of multiple active Node.js versions.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install NVM by following these <a href="https://github.com/creationix/nvm#install&#8212;&#8203;update-script">official instructions</a>.</p>
</li>
<li>
<p>Install the correct version of Node.js using NVM by executing the following command below:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">nvm install 10.15.3</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset5_option-b---node-js-package">
<div class="paragraph">
<p>If it is not required to use NVM or other package managers, it is possible to install
the node package globally on your system as shown below:</p>
</div>
<div class="paragraph">
<p><strong>Ubuntu</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
sudo apt-get install -y nodejs</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>MacOS</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew install node@10.15.3</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pm2-optional"><a class="anchor" href="#pm2-optional"></a>PM2 (optional)</h3>
<div class="paragraph">
<p>Install <a href="https://github.com/Unitech/pm2">PM2</a> for managing the start and stop of the application process in the background by executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm install pm2 -g</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="redis-optional"><a class="anchor" href="#redis-optional"></a>Redis (optional)</h3>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset6_ubuntu"></a>Ubuntu</p>
</li>
<li>
<p><a id="tabset6_macos"></a>MacOS</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset6_ubuntu">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo apt install redis-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start Redis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo service redis-server start</code></pre>
</div>
</div>
<div class="paragraph">
<p>Stop Redis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo service redis-server stop</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset6_macos">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew install redis</code></pre>
</div>
</div>
<div class="paragraph">
<p>Start Redis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew services start redis</code></pre>
</div>
</div>
<div class="paragraph">
<p>Stop Redis:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">brew services stop redis</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Lisk does not run on the Redis default port of <code>6379</code>.
Instead it is configured to run on port: <code>6380</code>.
Therefore in order to run Lisk, there are two options available which are shown below:</p>
</div>
</td>
</tr>
</table>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset7_a---change-the-lisk-configuration"></a>A - Change the Lisk configuration</p>
</li>
<li>
<p><a id="tabset7_b---change-the-redis-launch-configuration"></a>B - Change the Redis launch configuration</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset7_a---change-the-lisk-configuration">
<div class="paragraph">
<p>In the next installation phase, remember to update the Redis port configuration in <code>config.json</code>.</p>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset7_b---change-the-redis-launch-configuration">
<div class="paragraph">
<p>Update the launch configuration file on your system.
Note that there are numerous methods to perform this.</p>
</div>
<div class="paragraph">
<p>The following is one example:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Stop the Redis-server</p>
</li>
<li>
<p>Edit the file <code>redis.conf</code> and change: <code>port 6379</code> to <code>port 6380</code></p>
<div class="ulist">
<ul>
<li>
<p>Ubuntu/Debian: <code>/etc/redis/redis.conf</code></p>
</li>
<li>
<p>MacOS: <code>/usr/local/etc/redis.conf</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Start the Redis-server</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now confirm that Redis is running on <code>port 6380</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">redis-cli -p 6380
ping</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following result should now be visible: <code>PONG</code>.</p>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>If all of the above steps have been successfully completed, then your system is ready for the installation of Lisk Core.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="install"><a class="anchor" href="#install"></a>Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers how to install Lisk Core from Source code.
When completed, you will have a functioning node on the Lisk Network.
If it is required to upgrade your current Lisk Core installation, please see <a href="../update/source.html" class="xref page">Update Source code</a>.</p>
</div>
<div class="sect2">
<h3 id="login-as-the-lisk-user"><a class="anchor" href="#login-as-the-lisk-user"></a>Login as the Lisk user</h3>
<div class="paragraph">
<p>This user was created in the <a href="#source_pre_install">pre-installation steps</a>.
If you are already logged in to this user, please skip this following step:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sudo -u lisk -i</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="installing-lisk-from-source-code"><a class="anchor" href="#installing-lisk-from-source-code"></a>Installing Lisk from Source code</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/LiskHQ/lisk-core.git <i class="conum" data-value="1"></i><b>(1)</b>
cd lisk-core                  <i class="conum" data-value="2"></i><b>(2)</b>
git checkout v2.1.7 -b v2.1.7 <i class="conum" data-value="3"></i><b>(3)</b>
npm ci                        <i class="conum" data-value="4"></i><b>(4)</b>
npm run build                 <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Clone the repository.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Navigate into the lisk-core root folder.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Check out the latest release tag.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Install dependencies.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Compile packages.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Please check for the latest release in <a href="https://github.com/LiskHQ/lisk-core/releases">Core releases</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To test that Lisk Core is built and configured correctly, execute the following commands to connect to the network:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">node dist/index.js <i class="conum" data-value="1"></i><b>(1)</b>
LISK_NETWORK=[network] node dist/index.js <i class="conum" data-value="2"></i><b>(2)</b>
node dist/index.js --network [network] <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Default: connect to Devnet.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use environment variables to overwrite config values, (recommended).</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use flags to overwrite config values.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Where <code>[network]</code> might be either <code>devnet</code> (default), <code>alphanet</code>, <code>betanet</code>, <code>testnet</code> or <code>mainnet</code>.</p>
</div>
<div class="paragraph">
<p>It is recommended to overwrite the config values with environment variables if necessary.
Useable variables will always start with <code>LISK_</code> prefix.
Alternatively, the user may define a custom <code>config.json</code>, as described in <a href="../management/configuration.html" class="xref page">Configuration of Lisk Core</a> .
You can view a <a href="docker.html#environment_variables" class="xref page">list of available environment variables</a> here.</p>
</div>
<div class="paragraph">
<p>If the process is running correctly, no errors are thrown in the logs.
By default, errors will be logged in <code>logs/[network]/lisk.log</code>.
Once the process is verified as running correctly, press <code>CTRL+C</code> and start the process with <code>pm2</code>.
This will fork the process into the background and automatically recover the process if it fails.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pm2 start --name lisk dist/index.js -- --network [network]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>[network]</code> might be either <code>devnet</code> (default), <code>alphanet</code>, <code>betanet</code>, <code>testnet</code> or <code>mainnet</code>.</p>
</div>
<div class="paragraph">
<p>If you are not running Lisk locally, you will need to follow the <a href="#v3@lisk-sdk::guides/node-management/api-access.adoc" class="xref unresolved">API access</a> guide to enable access.</p>
</div>
<div class="paragraph">
<p>In case you wish to configure your node further, e.g. if enabling forging is required, then please see the <a href="../management/configuration.html" class="xref page">Configuration</a> documentation.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="post-installation-optional"><a class="anchor" href="#post-installation-optional"></a>Post-installation (optional)</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Recommended: Set up a <a href="../management/configuration.html" class="xref page">logrotation</a></p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="docker.html">Docker image</a></span>
  <span class="next"><a href="../management/application.html">Application commands</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../_/js/vendor/component-versions.js"></script>
<script src="../../../_/js/vendor/custom.js"></script>
  <script src="../../../_/js/vendor/docsearch.js"></script>
  <!--<script src="../../../_/js/vendor/docsearch.min.js"></script>-->
  <!--<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>-->
  <script>
    docsearch({
      container: '#docsearch',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
    docsearch({
      container: '#docsearch-toolbar',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
  </script>
  <!--<script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>-->
<!--  <script>
    function focusSearchInputToolbar () { document.querySelector('#search-input-toolbar').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input-toolbar',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInputToolbar()
    window.addEventListener('load', focusSearchInputToolbar)
  </script>-->
  </body>
</html>
