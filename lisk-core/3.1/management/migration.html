<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Testnet and Mainnet v3 migration guide :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/lisk-core/management/migration.html">
    <link rel="prev" href="enabling-misbehavior-report.html">
    <link rel="next" href="../update/npm.html">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../../../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../../../_/css/dark-site.css">

<script>var uiRootPath = '../../../_'</script>
<script src="../../../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../.." class="lisk-logo"></a>
        <a href="../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Core</button>
    <div class="component-menu">
        <a class="component is-current" href="../../index.html">Lisk Core</a>
        <a class="component" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component" href="../../../index.html">Lisk Documentation</a>
        <a class="component" href="../../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">3.1</button>
  <div class="version-menu">
    <a class="version" href="../../management/migration.html">4.0 (latest)</a>
    <a class="version is-current" href="migration.html">3.1</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../../../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Core</a></li>
    <li>Management</li>
    <li><a href="migration.html">Testnet and Mainnet v3 migration guide</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1926-update-corev3-links/modules/ROOT/pages/management/migration.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="lisk-core" data-version="3.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Core</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Lisk Core</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/npm.html">NPM setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/snap.html">Snap setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/binary.html">Binary setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/docker.html">Docker setup</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/source.html">Source code setup</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="pm2.html">Process management with pm2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enabling-misbehavior-report.html">How to enable the "Report Misbehavior" plugin</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="migration.html">Testnet and Mainnet v3 migration guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Update</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/npm.html">Update Lisk Core (NPM)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/binary.html">Update Lisk Core (Binary)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../update/source.html">Update Lisk Core (source code)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/api.html">API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/cli.html">Command line interface</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../reference/legacy-account-module.html">Legacy account module</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Core</span>
    <span class="version">3.1</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">4.0 (latest)</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">3.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">default</a>
        </li>
        <li class="version">
          <a href="../../../lisk-v3/index.html">lisk-v3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-sdk/index.html">6.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-sdk/5.2/index.html">5.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-service/index.html">0.7 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-service/0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Testnet and Mainnet v3 migration guide</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide explains how to migrate a Lisk Core v2.1.7 node to Lisk Core v3.x using the Lisk migrator.</p>
</div>
<div class="paragraph">
<p>The Lisk migrator CLI will generate a new genesis block for Lisk Core v3.
The new genesis block is created based on a snapshot of the old blockchain (running on Lisk Core v2.1.7) at a given height.
The Lisk migrator will not install Lisk Core v3, nor will it uninstall Lisk Core v2.1.7, these are steps that need to be done manually as described below.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All actively forging delegates on the Lisk Mainnet and the Lisk Testnet need to follow this guide to correctly migrate their nodes to the new network, in order to not miss any blocks after the network hard fork.</p>
</div>
<div class="paragraph">
<p>Optionally, anyone running a Lisk Core v2.1.7 who is not an actively forging delegate can participate in the migration process.
In this case, the following steps 1.4, 2.7, 2.8, and 2.9 in this guide can be skipped, as they are only relevant for delegates.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#preparation">1. Preparation</a>
<ul class="sectlevel2">
<li><a href="#preparing-lisk-core-v2-1-7">1.1. Preparing Lisk Core v2.1.7</a></li>
<li><a href="#setting-up-the-lisk-migrator">1.2. Setting up the Lisk migrator</a></li>
<li><a href="#setting-up-lisk-core-v3">1.3. Setting up Lisk Core v3</a></li>
<li><a href="#create-a-custom-config-with-your-delegate-information">1.4. Create a custom config with your delegate information</a></li>
</ul>
</li>
<li><a href="#migration-steps">2. Migration steps</a>
<ul class="sectlevel2">
<li><a href="#check-the-announced-snapshot-height">2.1. Check the announced snapshot height</a></li>
<li><a href="#ensure-lisk-core-v2-1-7-is-fully-synced-with-the-network">2.2. Ensure Lisk Core v2.1.7 is fully synced with the network</a></li>
<li><a href="#run-lisk-migrator">2.3. Run lisk migrator</a></li>
<li><a href="#wait-until-the-network-reaches-the-snapshot-height">2.4. Wait until the network reaches the snapshot height</a></li>
<li><a href="#stop-lisk-core-v2-1-7">2.5. Stop Lisk Core v2.1.7</a></li>
<li><a href="#start-lisk-core-v3">2.6. Start Lisk Core v3</a></li>
<li><a href="#check-new-account-address">2.7. Check new account address</a></li>
<li><a href="#self-voting">2.8. Self-voting</a></li>
<li><a href="#enable-forging">2.9. Enable forging</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="preparation"><a class="anchor" href="#preparation"></a>1. Preparation</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">System requirements</div>
<div class="paragraph">
<p>The following system requirements are recommended for running the migration script:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Memory</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Machines with a minimum of 4 GB RAM for the Mainnet.</p>
</li>
<li>
<p>Machines with a minimum of 2 GB RAM for the Testnet.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">OS</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Ubuntu 20.04</p>
</li>
<li>
<p>Ubuntu 18.04</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>If you have Node.js installed ensure to use version 18.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="preparing-lisk-core-v2-1-7"><a class="anchor" href="#preparing-lisk-core-v2-1-7"></a>1.1. Preparing Lisk Core v2.1.7</h3>
<div class="sect3">
<h4 id="ensure-you-are-running-the-binary-distribution-of-lisk-core"><a class="anchor" href="#ensure-you-are-running-the-binary-distribution-of-lisk-core"></a>1.1.1. Ensure you are running the binary distribution of Lisk Core</h4>
<div class="paragraph">
<p>If you are using a different distribution of Lisk Core v2.1.7, such as Docker, Commander or Source, it will be necessary to install the application/binary distribution.</p>
</div>
</div>
<div class="sect3">
<h4 id="ensure-you-are-running-version-2-1-7-of-lisk-core"><a class="anchor" href="#ensure-you-are-running-version-2-1-7-of-lisk-core"></a>1.1.2. Ensure you are running version 2.1.7 of Lisk Core</h4>
<div class="paragraph">
<p>Ensure you are running version 2.1.7 of Lisk Core to be able to seamlessly migrate to Lisk Core 3.0.0.</p>
</div>
<div class="paragraph">
<p>Open <code>package.json</code> to check the <code>version</code> of your Lisk Core node.
If your version is lower than 2.1.7, ensure to update Lisk Core before proceeding with the migration.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-the-lisk-migrator"><a class="anchor" href="#setting-up-the-lisk-migrator"></a>1.2. Setting up the Lisk migrator</h3>
<div class="sect3">
<h4 id="download-the-migration-script"><a class="anchor" href="#download-the-migration-script"></a>1.2.1. Download the migration script</h4>
<div class="paragraph">
<p>Download the migration script by running the following command in the terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -o lisk-migrator-v1.0.2-linux-x64.tar.gz https://downloads.lisk.com/lisk-migrator/lisk-migrator-v1.0.2-linux-x64.tar.gz</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="download-checksum-and-verify"><a class="anchor" href="#download-checksum-and-verify"></a>1.2.2. Download checksum and verify</h4>
<div class="paragraph">
<p>Download the checksum and verify the successful download of lisk-migrator.</p>
</div>
<div class="paragraph">
<p>A) Download the checksum.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -o lisk-migrator-v1.0.2-linux-x64.tar.gz.SHA256 https://downloads.lisk.com/lisk-migrator/lisk-migrator-v1.0.2-linux-x64.tar.gz.SHA256</code></pre>
</div>
</div>
<div class="paragraph">
<p>B) Run the following command in the terminal and ensure the output is <code>sha256sum: &lt;file name&gt;: OK</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sha256sum -c lisk-migrator-v1.0.2-linux-x64.tar.gz.SHA256</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="extract-and-add-to-path"><a class="anchor" href="#extract-and-add-to-path"></a>1.2.3. Extract and add to PATH</h4>
<div class="paragraph">
<p>Unpack it, and then add it to the system path, in order to use it in the terminal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">tar -xf ./lisk-migrator-v1.0.2-linux-x64.tar.gz</code></pre>
</div>
</div>
<div class="paragraph">
<p>Make the <code>lisk-migrator</code> command available in the PATH, e.g. by executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export PATH="$PATH:$HOME/lisk-migrator/bin" <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace <code>$HOME</code> with the absolute path of where the <code>lisk-migrator</code> folder is located, in case it was extracted somewhere else other than in your home directory.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-lisk-core-v3"><a class="anchor" href="#setting-up-lisk-core-v3"></a>1.3. Setting up Lisk Core v3</h3>
<div class="paragraph">
<p>Follow the guide how to <a href="../setup/binary.html" class="xref page">setup Lisk Core v3</a> for the binary distribution.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Don&#8217;t start Lisk Core v3 yet.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="create-a-custom-config-with-your-delegate-information"><a class="anchor" href="#create-a-custom-config-with-your-delegate-information"></a>1.4. Create a custom config with your delegate information</h3>
<div class="paragraph">
<p>First copy the existing config file for the respective network.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset1_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_mainnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cp ~/lisk-core/config/mainnet/config.json ~/lisk-core/config/mainnet/custom-config.json <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_testnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cp ~/lisk-core/config/testnet/config.json ~/lisk-core/config/testnet/custom-config.json <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Next, use the CLI of Lisk Core v3 to generate the delegate configuration data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core forging:config --output custom-forging.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>After running the command, you will be prompted for your delegate passphrase and for the password that will be used to encrypt the passphrase, so it can be stored securely in the delegate configuration data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>? Please enter passphrase:  [hidden]
? Please re-enter passphrase:  [hidden]
? Please enter password:  [hidden]
? Please re-enter password:  [hidden]</pre>
</div>
</div>
<div class="paragraph">
<p>After providing the required inputs, the delegate configuration data will be saved in the file <code>custom-forging.json</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example of custom-forging.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  forging: {
    delegates: [ <i class="conum" data-value="1"></i><b>(1)</b>
        {
            address: "86555265f0110b4ed5a8cb95dbc732e77732c474",
            encryptedPassphrase: "iterations=1&amp;salt=476d4299531718af8c88156aab0bb7d6&amp;cipherText=663dde611776d87029ec188dc616d96d813ecabcef62ed0ad05ffe30528f5462c8d499db943ba2ded55c3b7c506815d8db1c2d4c35121e1d27e740dc41f6c405ce8ab8e3120b23f546d8b35823a30639&amp;iv=1a83940b72adc57ec060a648&amp;tag=b5b1e6c6e225c428a4473735bc8f1fc9&amp;version=1",
            hashOnion: {
                "count": 1000000,
                "distance": 1000,
                "hashes": [
                    "ff2156e33c4aefa4a5a790edbe329f4a",
                    "5f86db180d4e63be6412d42d444dfb49",
                    "10fc37bb42d7f77030138e45795fef65",
                    "f04a306a73c5d7d94cc4f262b4d5ebb4",
                    //[...]
                    "ca41d52225f4b76140fc7f277731d326",
                    "fde61109609b74ba16d5ebd72a8b446f",
                    "9752dc2228492466d7c2046354d5fdfd"
                ]
            }
        }
    ]
  }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The list of delegates who are allowed to forge on this node.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Merge the forging config with the created custom config as shown in <a href="#create-a-custom-config-with-your-delegate-information">step 1.4</a> above, to add the delegate information to the application configuration:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset2_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_mainnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">TEMP_FILE=$( mktemp )
jq --slurp '.[0] * .[1]' ~/lisk-core/config/mainnet/custom-config.json ./custom-forging.json &gt;$TEMP_FILE
mv $TEMP_FILE ~/lisk-core/config/mainnet/custom-config.json</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_testnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">TEMP_FILE=$( mktemp )
jq --slurp '.[0] * .[1]' ~/lisk-core/config/testnet/custom-config.json ./custom-forging.json &gt;$TEMP_FILE
mv $TEMP_FILE ~/lisk-core/config/testnet/custom-config.json</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="migration-steps"><a class="anchor" href="#migration-steps"></a>2. Migration steps</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="check-the-announced-snapshot-height"><a class="anchor" href="#check-the-announced-snapshot-height"></a>2.1. Check the announced snapshot height</h3>
<div class="ulist">
<ul>
<li>
<p>For Mainnet: <code>16270292</code><br>
For more information check the <a href="https://lisk.com/blog/development/announcing-lisk-mainnet-v3-migration" target="_blank" rel="noopener">Mainnet migration announcement</a>.</p>
</li>
<li>
<p>For Testnet: <code>14075259</code><br>
For more information check the <a href="https://lisk.com/blog/development/announcing-lisk-testnet-v3-migration" target="_blank" rel="noopener">Testnet migration announcement</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The height is needed by <code>lisk-migrator</code> in the next step.
A snapshot of the blockchain will be created at this particular height, which will then be used to create the genesis block for the new blockchain.</p>
</div>
</div>
<div class="sect2">
<h3 id="ensure-lisk-core-v2-1-7-is-fully-synced-with-the-network"><a class="anchor" href="#ensure-lisk-core-v2-1-7-is-fully-synced-with-the-network"></a>2.2. Ensure Lisk Core v2.1.7 is fully synced with the network</h3>
<div class="paragraph">
<p>Check the current block height of your node directly in the terminal by running the following command:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset3_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_mainnet">
<div class="listingblock">
<div class="title">/home/lisk/lisk-main</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ bash lisk.sh status
Lisk configured for mainnet
[+] Lisk is running as PID: 24468
Current Block Height:   14992772</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_testnet">
<div class="listingblock">
<div class="title">/home/lisk/lisk-test</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ bash lisk.sh status
Lisk configured for testnet
[+] Lisk is running as PID: 24751
Current Block Height:  13279765</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Compare the current height of your node to the network height in <a href="https://lisk.com/wallet" target="_blank" rel="noopener">Lisk Desktop</a>, which is shown on the <kbd>Network</kbd> or <kbd>Blocks</kbd> pages.</p>
</div>
<div class="paragraph">
<p>If both heights are equal, it is verified that your node is fully synched with the network.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To view the current height of the Lisk Testnet, use the network switcher of Lisk Desktop, which can be enabled in the settings.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="run-lisk-migrator"><a class="anchor" href="#run-lisk-migrator"></a>2.3. Run lisk migrator</h3>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<div class="title">When to start the migrator script?</div>
<p><code>lisk-migrator</code> can be started any time before the announced snapshot height.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you have added <code>lisk-migrator</code> to the PATH as described in the section <a href="#setting-up-the-lisk-migrator">Setting up the Lisk migrator</a>, you can start the migration script by running the following command <sup class="footnote" id="_footnote_snap_footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup> in the terminal:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset4_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_mainnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-migrator --snapshot-height ${snapshotHeight} --output ~/.lisk/lisk-core/config/mainnet/genesis_block.json --lisk-core-path ~/lisk-main</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_testnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-migrator --snapshot-height ${snapshotHeight} --output ~/.lisk/lisk-core/config/testnet/genesis_block.json --lisk-core-path ~/lisk-test</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><code>--snapshot-height</code>:
The height on which the blockchain snapshot will be performed.
The snapshot height will be announced separately.</p>
</li>
<li>
<p><code>--output</code>:
The absolute path to the directory, where the newly generated genesis block should be saved.</p>
</li>
<li>
<p><code>--lisk-core-path</code>:
The absolute path to the directory, where the Lisk Core v2.1.7 node is located.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>It is possible to use tools such as <code>screen</code> to run the Lisk migrator in the background.</p>
</div>
<div class="paragraph">
<p>With <code>screen</code> you can detach the current terminal window into the background:</p>
</div>
<div class="listingblock">
<div class="title">Example (Mainnet) <sup class="footnoteref">[<a class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">screen -dmSL migration lisk-migrator --snapshot-height ${snapshotHeight} --output ~/.lisk/lisk-core/config/mainnet/genesis_block.json --lisk-core-path ~/lisk-main</code></pre>
</div>
</div>
<div class="paragraph">
<p>Shortly before the migration occurs, it is possible to reattach to it in order to check if everything is working correctly.</p>
</div>
<div class="paragraph">
<p>First check the name of the detached screen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">screen -ls</code></pre>
</div>
</div>
<div class="paragraph">
<p>This returns a list of all detached screens with <code>screen</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>There is a screen on:
	1842.migration	(05/07/2021 12:35:59 PM)	(Detached)
1 Socket in /run/screen/S-lisk.</pre>
</div>
</div>
<div class="paragraph">
<p>Use <code>screen -r</code> and the name of the detached screen you want to connect to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">screen -r 1842.migration</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="wait-until-the-network-reaches-the-snapshot-height"><a class="anchor" href="#wait-until-the-network-reaches-the-snapshot-height"></a>2.4. Wait until the network reaches the snapshot height</h3>
<div class="paragraph">
<p>Observe if <code>lisk-migrator</code> finishes successfully, (this takes about 30-60 minutes from the snapshot height).</p>
</div>
<div class="paragraph">
<p>After the snapshot height is reached, delegates have approximately 2 hours time to start their Lisk Core v3 and enable forging, to ensure they will not miss any blocks after the hardfork.</p>
</div>
<div class="paragraph">
<p>If the node is started at a later point in time, it will simply sync to the current network height.
For delegates, this might result in them missing a block, for everyone else it will not have any impact.</p>
</div>
</div>
<div class="sect2">
<h3 id="stop-lisk-core-v2-1-7"><a class="anchor" href="#stop-lisk-core-v2-1-7"></a>2.5. Stop Lisk Core v2.1.7</h3>
<div class="paragraph">
<p>After the <code>lisk-migrator</code> script has finished and the announced snapshot height has passed, there is no reason to continue running Lisk Core v2.1.7 and therefore it is recommended to stop it.</p>
</div>
<div class="paragraph">
<p>First ensure, that Lisk Core will not start again by removing the existing cronjob:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">crontab -e</code></pre>
</div>
</div>
<div class="paragraph">
<p>Choose your favorite editor to open the <code>crontab</code> file and remove the following line:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>@reboot /bin/bash /home/lisk/lisk-test/lisk.sh start &gt; /home/lisk/lisk-test/cron.log 2&gt;&amp;1</pre>
</div>
</div>
<div class="paragraph">
<p>Save and close the <code>crontab</code> file again.</p>
</div>
<div class="paragraph">
<p>Navigate into the root folder of your Lisk Core v2.1.7 installation and run the following command to stop the old Lisk Core version:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">bash lisk.sh stop</code></pre>
</div>
</div>
<div class="paragraph">
<p>Last but not least, remove the folder with Lisk Core v2.1.7, e.g. by executing the following:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset5_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset5_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset5_mainnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">rm -r lisk-main</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset5_testnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">rm -r lisk-test</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="start-lisk-core-v3"><a class="anchor" href="#start-lisk-core-v3"></a>2.6. Start Lisk Core v3</h3>
<div class="paragraph">
<p>Use the Lisk Core CLI to start Lisk Core v3.</p>
</div>
<div class="paragraph">
<p>Run the following command in the terminal and check the logs in the console to verify that Lisk Core starts successfully:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset6_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset6_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset6_mainnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core start --network mainnet --api-ipc --config=/home/lisk/lisk-core/config/mainnet/custom-config.json</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset6_testnet">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core start --network testnet --api-ipc --config=/home/lisk/lisk-core/config/testnet/custom-config.json</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Press <kbd>CTRL</kbd> + <kbd>C</kbd> to stop the process again.</p>
</div>
<div class="paragraph">
<p>Install PM2 to run Lisk Core in the background:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm i -g pm2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a pm2 config as shown in the example below:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset7_mainnet"></a>Mainnet</p>
</li>
<li>
<p><a id="tabset7_testnet"></a>Testnet</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset7_mainnet">
<div class="listingblock">
<div class="title">~/lisk-core/pm2.conf.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "lisk-core",
  "script": "lisk-core start --api-ipc",
  "env": {
    "LISK_NETWORK": "mainnet",
    "LISK_CONFIG_FILE": "/home/lisk/lisk-core/config/mainnet/custom-config.json"
  }
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset7_testnet">
<div class="listingblock">
<div class="title">~/lisk-core/pm2.conf.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "lisk-core",
  "script": "lisk-core start --api-ipc",
  "env": {
    "LISK_NETWORK": "testnet",
    "LISK_CONFIG_FILE": "/home/lisk/lisk-core/config/testnet/custom-config.json"
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
All available options for <code>scripts</code> and <code>env</code> can be found in <code>lisk-core start --help</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>After creating the config, start it with the following command:</p>
</div>
<div class="listingblock">
<div class="title">/home/lisk/lisk-core/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">pm2 start pm2.conf.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will start Lisk Core in the background.</p>
</div>
<div class="paragraph">
<p>You can verify that the node is running correctly by executing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core node:info</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will return certain general node information, for example as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>{"version":"3.0.0.5e1a7cf","networkVersion":"2.0","networkIdentifier":"01e47ba4e3e57981642150f4b45f64c2160c10bac9434339888210a4fa5df097","lastBlockID":"a98f7027ee16c8f8169ba676a72679dd8e6f56d83e93fec813b8f3041fb9c03d","height":670287,"finalizedHeight":670148,"syncing":false,"unconfirmedTransactions":0,"genesisConfig":{"blockTime":10,"communityIdentifier":"Lisk","maxPayloadLength":15360,"bftThreshold":68,"minFeePerByte":1000,"baseFees":[{"moduleID":5,"assetID":0,"baseFee":"1000000000"}],"rewards":{"milestones":["500000000","400000000","300000000","200000000","100000000"],"offset":2160,"distance":3000000},"minRemainingBalance":"5000000","activeDelegates":101,"standbyDelegates":2,"delegateListRoundOffset":2},"registeredModules":[{"id":2,"name":"token","actions":[],"events":[],"reducers":["token:credit","token:debit","token:getBalance","token:getMinRemainingBalance"],"transactionAssets":[{"id":0,"name":"transfer"}]},{"id":3,"name":"sequence","actions":[],"events":[],"reducers":[],"transactionAssets":[]},{"id":4,"name":"keys","actions":[],"events":[],"reducers":[],"transactionAssets":[{"id":0,"name":"registerMultisignatureGroup"}]},{"id":5,"name":"dpos","actions":["dpos:getAllDelegates","dpos:getUnlockings"],"events":[],"reducers":[],"transactionAssets":[{"id":0,"name":"registerDelegate"},{"id":1,"name":"voteDelegate"},{"id":2,"name":"unlockToken"},{"id":3,"name":"reportDelegateMisbehavior"}]},{"id":1000,"name":"legacyAccount","actions":["legacyAccount:getUnregisteredAccount"],"events":[],"reducers":[],"transactionAssets":[{"id":0,"name":"reclaimLSK"}]}]}</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use the <code>--pretty</code> flag to return the response in formatted JSON: <code>lisk-core node:info --pretty</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="check-new-account-address"><a class="anchor" href="#check-new-account-address"></a>2.7. Check new account address</h3>
<div class="paragraph">
<p>It is necessary to know your new address to enable forging for your delegate in the new network.</p>
</div>
<div class="paragraph">
<p>Use the following command to view your new account address.
You will be prompted for your passphrase from which the other account details will be generated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core account:show</code></pre>
</div>
</div>
<div class="paragraph">
<p>After running the above command, you will be prompted for your delegate passphrase.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>? Please enter passphrase:  [hidden]
? Please re-enter passphrase:  [hidden]</pre>
</div>
</div>
<div class="paragraph">
<p>This will return an object including <code>privateKey</code>, <code>publicKey</code>, <code>address</code>, and <code>binaryAddress</code>.</p>
</div>
<div class="paragraph">
<p>The value under <code>binaryAddress</code> is used to self-vote for the delegate account and to enable forging in the next steps.</p>
</div>
</div>
<div class="sect2">
<h3 id="self-voting"><a class="anchor" href="#self-voting"></a>2.8. Self-voting</h3>
<div class="paragraph">
<p>In the new DPoS rules, delegates need to self-vote with a significant amount of tokens to be able to reach forging positions.</p>
</div>
<div class="paragraph">
<p>For more information how self-voting affects the vote weight, see <a href="../../../lisk-v3/understand-blockchain/lisk-protocol/consensus-algorithm.html#voting_and_weight" class="xref page">Delegates, voting, and delegate weight, (Lisk Protocol)</a>.</p>
</div>
<div class="sect3">
<h4 id="voting-with-lisk-desktop"><a class="anchor" href="#voting-with-lisk-desktop"></a>2.8.1. Voting with Lisk Desktop</h4>
<div class="paragraph">
<p>Use Lisk Desktop to cast the self-vote conveniently from a user interface.</p>
</div>
<div class="paragraph">
<p>Just login with your passphrase, after updating Lisk Desktop to the latest 2.x version.</p>
</div>
<div class="paragraph">
<p>See the two example videos below, which show how to vote with Lisk Desktop v2:</p>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/CKwf2u-QfuU?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="videoblock">
<div class="content">
<iframe src="https://www.youtube.com/embed/KAPor0lMz5U?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
</div>
<div class="sect3">
<h4 id="voting-via-lisk-core-cli"><a class="anchor" href="#voting-via-lisk-core-cli"></a>2.8.2. Voting via Lisk Core CLI</h4>
<div class="paragraph">
<p>Use the Lisk Core CLI to cast the self-vote with the desired amount of tokens from the command line.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ lisk-core transaction:create 5 1 100000000
? Please enter: votes(delegateAddress, amount):  89aa5fc8861d392f60662f76a379cc348fe97d28, 148000000000
? Want to enter another votes(delegateAddress, amount) No
? Please enter passphrase:  [hidden]
? Please re-enter passphrase:  [hidden]
{"transaction":"0805100118012080c2d72f2a2024350a05e078b181fa8f3c273ca9882a8f5ed6efbaf3d1537665f9480635273f321f0a1d0a1489aa5fc8861d392f60662f76a379cc348fe97d281080a0e6d7ce083a403aef0012b05f3d962e3bc4b1ba70d6cc4fea783e24c02c36bc644e283ef2dd7618ec072594505c7ab8ce2a1e22dda5e90c51be79d06ac4871daf8430ff6a330b"}
$ lisk-core transaction:send 0805100118012080c2d72f2a2024350a05e078b181fa8f3c273ca9882a8f5ed6efbaf3d1537665f9480635273f321f0a1d0a1489aa5fc8861d392f60662f76a379cc348fe97d281080a0e6d7ce083a403aef0012b05f3d962e3bc4b1ba70d6cc4fea783e24c02c36bc644e283ef2dd7618ec072594505c7ab8ce2a1e22dda5e90c51be79d06ac4871daf8430ff6a330b
Transaction with id: '6a6121adf6a73a857bef92eaec9c29545f53c9196a16faa1eafdf58012f5a2e5' received by node.</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="voting-with-a-multisignature-account"><a class="anchor" href="#voting-with-a-multisignature-account"></a>2.8.3. Voting with a multisignature account</h4>
<div class="paragraph">
<p>All accounts which had a second passphrase registered in Lisk Core v2 are converted to multisignature accounts which need 2 mandatory signatures.
The voting process therefore works a little different for accounts with a second passphrase:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ lisk-core transaction:create 5 1 100000000
? Please enter: votes(delegateAddress, amount):  331e287263c8166febde9d77a5f333df75056c74, 5555000000000
? Want to enter another votes(delegateAddress, amount) No
? Please enter passphrase:  [hidden] <i class="conum" data-value="1"></i><b>(1)</b>
? Please re-enter passphrase:  [hidden]
{"transaction":"0805100118002080c2d72f2a2030c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f48332200a1e0a14331e287263c8166febde9d77a5f333df75056c741080f8e9fcabc3023a4072b159f5a7d2934b1a5131b36f711e9ca8fcd2cce68c607eb468cb1926b84fa33205fd294df23cd02e5b2107849b651e5a9b8e064c59ca16eb1f72e90065330f"}
# Use the transaction hex output from above in the command below
$ lisk-core transaction:sign 0805100118002080c2d72f2a2030c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f48332200a1e0a14331e287263c8166febde9d77a5f333df75056c741080f8e9fcabc3023a4072b159f5a7d2934b1a5131b36f711e9ca8fcd2cce68c607eb468cb1926b84fa33205fd294df23cd02e5b2107849b651e5a9b8e064c59ca16eb1f72e90065330f \
--mandatory-keys="30c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f483" \ <i class="conum" data-value="2"></i><b>(2)</b>
--mandatory-keys="f7a16edaf7995d522d5e6ac69d7325df76f5883dd084409eb13df8d61c33abfb" \ <i class="conum" data-value="3"></i><b>(3)</b>
--sender-public-key="30c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f483" <i class="conum" data-value="4"></i><b>(4)</b>
? Please enter passphrase:  [hidden] <i class="conum" data-value="5"></i><b>(5)</b>
? Please re-enter passphrase:  [hidden]
{"transaction":"0805100118002080c2d72f2a2030c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f48332200a1e0a14331e287263c8166febde9d77a5f333df75056c741080f8e9fcabc3023a4072b159f5a7d2934b1a5131b36f711e9ca8fcd2cce68c607eb468cb1926b84fa33205fd294df23cd02e5b2107849b651e5a9b8e064c59ca16eb1f72e90065330f3a00"}
# Use the transaction hex output from above in the command below
$ lisk-core transaction:sign 0805100118002080c2d72f2a2030c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f48332200a1e0a14331e287263c8166febde9d77a5f333df75056c741080f8e9fcabc3023a4072b159f5a7d2934b1a5131b36f711e9ca8fcd2cce68c607eb468cb1926b84fa33205fd294df23cd02e5b2107849b651e5a9b8e064c59ca16eb1f72e90065330f \
--mandatory-keys="30c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f483" \
--mandatory-keys="f7a16edaf7995d522d5e6ac69d7325df76f5883dd084409eb13df8d61c33abfb" \
--sender-public-key="30c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f483"
? Please enter passphrase:  [hidden] <i class="conum" data-value="6"></i><b>(6)</b>
? Please re-enter passphrase:  [hidden]
{"transaction":"0805100118002080c2d72f2a2030c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f48332200a1e0a14331e287263c8166febde9d77a5f333df75056c741080f8e9fcabc3023a4072b159f5a7d2934b1a5131b36f711e9ca8fcd2cce68c607eb468cb1926b84fa33205fd294df23cd02e5b2107849b651e5a9b8e064c59ca16eb1f72e90065330f3a401c644e345238bc27f0f6af84ed8be2c8f3b70d30d91b3af45da511cb0da61f80061fbb05bab09e0606a3f9d715176d49cdf5400dd299bd2e04bd8573a6933d04"}
# Use the transaction hex output from above in the command below
$ lisk-core transaction:send 0805100118002080c2d72f2a2030c07dbb72b41e3fda9f29e1a4fc0fce893bb00788515a5e6f50b80312e2f48332200a1e0a14331e287263c8166febde9d77a5f333df75056c741080f8e9fcabc3023a4072b159f5a7d2934b1a5131b36f711e9ca8fcd2cce68c607eb468cb1926b84fa33205fd294df23cd02e5b2107849b651e5a9b8e064c59ca16eb1f72e90065330f3a401c644e345238bc27f0f6af84ed8be2c8f3b70d30d91b3af45da511cb0da61f80061fbb05bab09e0606a3f9d715176d49cdf5400dd299bd2e04bd8573a6933d04
Transaction with id: 'cf1e7af1b385a630c893ac45c9a4cdf5536769ba6e678a9779ff9af135ee5ec9' received by node.</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the <strong>passphrase</strong> of the <strong>first</strong> account.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Use the <strong>public key</strong> of the <strong>first</strong> account.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Use the <strong>public key</strong> of the <strong>second</strong> account.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Use the <strong>public key</strong> of the <strong>first</strong> account.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Use the <strong>passphrase</strong> of the <strong>first</strong> account.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use the <strong>passphrase</strong> of the <strong>second</strong> account.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="enable-forging"><a class="anchor" href="#enable-forging"></a>2.9. Enable forging</h3>
<div class="paragraph">
<p>The final step is to enable forging on the node for your delegate.</p>
</div>
<div class="paragraph">
<p>Again, this can be done by using the Lisk Core CLI.
Just use it with your own delegate address.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core forging:enable 89aa5fc8861d392f60662f76a379cc348fe97d28 0 0 0 <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Replace the address with your delegate address in hexadecimal representation.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>0 0 0</code> stands for the three variables, <code>height</code>, <code>maxHeightPreviouslyForged</code>, and <code>maxHeightPrevoted</code>.
These three variables need to be set to <code>0</code> for every delegate who starts forging for the first time in the network, which will be the case for all delegates participating in the migration.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When a delegate has already forged in the network, it is necessary to check which values to use for <code>height</code>, <code>maxHeightPreviouslyForged</code>, and <code>maxHeightPrevoted</code>.</p>
</div>
<div class="paragraph">
<p>These values can be checked by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core forging:status
[{"address":"89aa5fc8861d392f60662f76a379cc348fe97d28","forging":true,"height":670237,"maxHeightPrevoted":670159,"maxHeightPreviouslyForged":670187}]</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Snap versions of Lisk Core store everything in <code>~/snap/lisk-core/current/.lisk/lisk-core</code> instead of <code>~/.lisk/lisk-core</code>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="enabling-misbehavior-report.html">How to enable the "Report Misbehavior" plugin</a></span>
  <span class="next"><a href="../update/npm.html">Update Lisk Core (NPM)</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p> 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/glossary.js"></script>
<script async src="../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../_/js/vendor/component-versions.js"></script>
<script src="../../../_/js/vendor/custom.js"></script>

  </body>
</html>
