<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to create a CCM :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/beta/build-blockchain/interoperable-module/create-ccm.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="execute-ccm.html">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../../_/css/dark-site.css">

    <script>var uiRootPath = '../../../_'</script>
    <script src="../../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://lisk.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
    <!-- Matomo Tag Manager -->
    <script>
      var _mtm = window._mtm = window._mtm || [];
      _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
    </script>
    <!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../.." class="lisk-logo"></a>
        <a href="../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header><div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../../index.html">Lisk Documentation</a>
        <a class="component" href="../../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">beta</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../../index.html">default</a>
    <a class="version is-current" href="create-ccm.html">beta</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
  <a href="../../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk Documentation</a></li>
    <li><a href="../index.html">Build Blockchain</a></li>
    <li><a href="index.html">How to create an interoperable module</a></li>
    <li><a href="create-ccm.html">How to create a CCM</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1678-interoperable-module-guide/docs/modules/ROOT/pages/build-blockchain/interoperable-module/create-ccm.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="beta">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/blockchain-scalability.html">Blockchain Scalability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/lisk-products.html">Lisk products</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../understand-blockchain/index.html">Understand Lisk Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../understand-blockchain/state-machine.html">State machine</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../understand-blockchain/consensus/index.html">Consensus protocols</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/consensus/pos-poa.html">Proof of Stake (PoS) &amp; Proof of Authority (PoA) in Lisk</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../understand-blockchain/network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../understand-blockchain/mainchain.html">Mainchain</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../understand-blockchain/interoperability/index.html">Lisk Interoperability</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/interoperability/communication.html">Cross-chain communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/interoperability/sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../understand-blockchain/blocks-txs.html">Blocks and Transactions</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/sdk/modules-commands.html">Modules and Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/sdk/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/sdk/rpc.html">Communicating to a Lisk node via RPC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../understand-blockchain/sdk/codec-schema.html">Schemas &amp; Codec</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../index.html">Build Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-blockchain-client.html">Creating a new blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../configuration.html">Blockchain client configuration</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../module/index.html">How to create a module</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../module/configuration.html">1. How to create a module configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../module/stores.html">2. How to create stores</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../module/command.html">3. How to create a command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../module/endpoints-methods.html">4. How to create endpoints and methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../module/blockchain-event.html">5. How to create a blockchain event</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="index.html">How to create an interoperable module</a>
        </span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="create-ccm.html">How to create a CCM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="execute-ccm.html">How to execute a CCM</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../plugin/index.html">How to create a plugin</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../plugin/schema-types.html">1. Defining off-chain data structures</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../plugin/offchain-db.html">2. Setting up an Off-chain database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../plugin/configuring-plugin.html">3. Configuring a Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../plugin/plugin-class.html">4. Updating the Plugin Class</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../plugin/plugin-endpoints.html">5. Creating an endpoint &amp; Testing the plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../using-dashboard.html">Using the Dashboard with a blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../register-sidechain.html">How to register a sidechain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../enable-faucet.html">How to enable a Faucet for testing</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../run-blockchain/index.html">Run Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/process-management.html">Process management with PM2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/become-a-validator.html">How to become a validator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/staking.html">How to stake and un-stake tokens</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/enable-block-generation.html">How to enable/disable block generation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/setup-relayer.html">Setting up a relayer node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/blockchain-reset.html">Resetting and snapshotting the blockchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/enabling-misbehavior-report.html">How to enable the "Report Misbehavior" plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../integrate-blockchain/index.html">Integrate Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/connecting-endpoints.html">Connecting via endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/subscribing-to-events.html">Retrieving on-chain events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/create-sign-transactions.html">How to create and sign a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/multisignature-accounts-and-transactions.html">How to create multi-signature accounts and transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/calculating-min-fee.html">How to calculate the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/posting-transactions.html">How to post a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/overwriting-transactions.html">How to overwrite a transaction in the transaction pool</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/index.html">Integrating a user interface</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/create-get-account.html">1. Handling accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/faucet-transfer.html">2. Using faucet and transferring tokens</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/send-get-hello.html">3. Sending and retrieving hello</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/aggregate-blockchain-data/index.html">Aggregate blockchain data with Lisk Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Module RPC APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/auth-endpoints.html">Auth module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/dynamic-reward-endpoints.html">Dynamic Reward module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/fee-endpoints.html">Fee module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/interoperability-endpoints.html">Sidechain Interoperability module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/mainchain-interoperability-endpoints.html">Mainchain Interoperability module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/token-endpoints.html">Token module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/validators-endpoints.html">Validators module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/random-endpoints.html">Random module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/pos-endpoints.html">Proof of Stake module: Endpoint reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Service APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-rpc.html">RPC API of Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-http.html">HTTP API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-pubsub.html">Publish/Subscribe API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-api-migration.html">Lisk Service API v2 vs v3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../lisk-sdk/v6/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../lisk-core/v4/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">beta</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-core/index.html">3.1.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-core/v4/index.html">4.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">default</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-service/index.html">0.6.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-service/0.7/index.html">0.7 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">How to create a CCM</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#the-react-module">1. The React module</a></li>
<li><a href="#the-reactcrosschain-command">2. The <code>reactCrossChain</code> command</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>How to create a <a href="../../understand-blockchain/interoperability/communication.html#inducing-state-changes-across-chains-with-ccms" class="xref page">cross-chain message</a> inside a command, in order to send it to another blockchain.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-react-module"><a class="anchor" href="#the-react-module"></a>1. The React module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to send cross-chain messages from sidechain to sidechain, it is required to create the corresponding CCM in a module.
To achieve this, create a new module(or adjust an existing module) which will be registered on the sidechain intending to communicate with an interoperable module of another chain.</p>
</div>
<div class="paragraph">
<p>Because we want to send reactions to Hello messages cross-chain, we call it the "React" module.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Check out the complete working <a href="https://github.com/LiskHQ/lisk-sdk/tree/release/6.0.0/examples/interop/pos-sidechain-example-two/src/app" target="_blank" rel="noopener">example implementation</a> of the React module inside the interoperability example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Assuming, the sidechain is already <a href="../create-blockchain-client.html#initializing-a-new-blockchain-client" class="xref page">initialized</a>, move into the root folder of the sidechain client, and generate the skeleton for the new module as usual:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk generate:module react</code></pre>
</div>
</div>
<div class="paragraph">
<p>Currently, there is no way to generate an interoperable module directly, so we need to make certain modifications to the module after generating it, in order to make it interoperable.</p>
</div>
<div class="paragraph">
<p>Inside the <code>react/module.ts</code> file, replace the class <code>BaseModule</code> with <code>BaseInteroperableModule</code>.</p>
</div>
<div class="paragraph">
<p>Additionally, create a new file called <code>cc_method.ts</code>, and add a skeleton for potential cross-chain methods the module is offering.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseCCMethod } from 'lisk-sdk';

export class ReactInteroperableMethod extends BaseCCMethod {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now import the <code>ReactInteroperableMethod</code> and use it to create a new member <code>crossChainMethod</code> inside the module.</p>
</div>
<div class="paragraph">
<p>In the end, the module should look similar to the example below:</p>
</div>
<div class="listingblock">
<div class="title">react/module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">/* eslint-disable class-methods-use-this */
/* eslint-disable @typescript-eslint/member-ordering */
import { BaseInteroperableModule, ModuleMetadata, ModuleInitArgs } from 'lisk-sdk';
import { ReactEndpoint } from './endpoint';
import { ReactMethod } from './method';
import { ReactInteroperableMethod } from './cc_method';

export class ReactModule extends BaseInteroperableModule {
	public endpoint = new ReactEndpoint(this.stores, this.offchainStores);
	public method = new ReactMethod(this.stores, this.events);
	public commands = [];
	public crossChainMethod = new ReactInteroperableMethod(this.stores, this.events);

	public metadata(): ModuleMetadata {
		return {
			...this.baseMetadata(),
			endpoints: [],
			commands: this.commands.map(command =&gt; ({
				name: command.name,
				params: command.schema,
			})),
			assets: [],
		};
	}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that the interoperable module is initialized, let&#8217;s create the command which will be used to create the CCM on the sidechain.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-reactcrosschain-command"><a class="anchor" href="#the-reactcrosschain-command"></a>2. The <code>reactCrossChain</code> command</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new file <code>react/constants.ts</code> and export a constant <code>CROSS_CHAIN_COMMAND_NAME_REACT</code> representing the name of the new command.</p>
</div>
<div class="listingblock">
<div class="title">react/constants.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export const CROSS_CHAIN_COMMAND_NAME_REACT = 'reactCrossChain';</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, let&#8217;s think about what data exactly we want to send in the CCM.</p>
</div>
<div class="paragraph">
<p>For the simplicity of this example, the <code>react</code> CCM includes the following parameters:</p>
</div>
<div class="paragraph">
<p>Create a new file <code>react/schemas.ts</code> and export a corresponding interface for the CCM parameters.</p>
</div>
<div id="ccm-params" class="olist arabic">
<div class="title">Parameters for the react CCM</div>
<ol class="arabic">
<li>
<p><code>reactionType</code>: A number indicating the type of the reaction.
In this example, we will only implement type <code>0</code>, which is representing a like.</p>
</li>
<li>
<p><code>helloMessageID</code>: The ID of the hello message to react to.
As there is always only one Hello message per account maximum, we can use the account address of the sender of the Hello message as unique ID for a Hello message.</p>
</li>
<li>
<p><code>data</code>: An additional property allowing to send a specific string.
Could be used to send custom data or reaction, like small replies.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The parameters for the <code>reactCrossChain</code> command therefore include the <a href="#ccm-params">Parameters for the react CCM</a>, and two additional parameters:</p>
</div>
<div class="olist arabic">
<div class="title">Additional parameters for the reactCrossChain command</div>
<ol class="arabic">
<li>
<p><code>receivingChainID</code>: The chain ID of the chain the CCM is sent to.</p>
</li>
<li>
<p><code>messageFee</code>: The fee for sending the CCM across chains.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Additionally, export corresponding schemas for the parameters of the React CCM.</p>
</div>
<div class="listingblock">
<div class="title">react/schemas.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">/**
 * Parameters of the reactCrossChain CCM
 */
export interface CCReactMessageParams {
	/**
	 * A number indicating the type of the reaction.
	 */
	reactionType: number;
	/**
	 * ID of the Hello message being reacted to.
	 */
	helloMessageID: string;
	/** Optional field for data / messages. */
	data: string;
}

/**
 * Parameters of the react reactCrossChain command
 */
export interface CCReactCommandParams extends CCReactMessageParams {
	/**
	 * The chain ID of the receiving chain.
	 *
	 * `maxLength` and `minLength` are equal to 4.
	 */
	receivingChainID: Buffer;
	/**
	 * The fee for sending the CCM across chains.
	 */
	messageFee: bigint;
}

/**
 * Schema for the parameters of the reactCrossChain CCM
 */
export const CCReactMessageParamsSchema = {
	/** The unique identifier of the schema. */
	$id: '/lisk/react/ccmParams',
	type: 'object',
	/** The required parameters for the CCM. */
	required: ['reactionType', 'helloMessageID', 'data'],
	/** A list describing the required parameters for the CCM. */
	properties: {
		reactionType: {
			dataType: 'uint32',
			fieldNumber: 1,
		},
		helloMessageID: {
			dataType: 'string',
			fieldNumber: 2,
		},
		data: {
			dataType: 'string',
			fieldNumber: 3,
			minLength: 0,
			maxLength: 64,
		},
	},
};

/**
 * Schema for the parameters of the react reactCrossChain command
 */
export const CCReactCommandParamsSchema = {
	/** The unique identifier of the schema. */
	$id: '/lisk/react/ccCommandParams',
	type: 'object',
	/** The required parameters for the command. */
	required: ['reactionType', 'helloMessageID', 'receivingChainID', 'data', 'messageFee'],
	/** A list describing the available parameters for the command. */
	properties: {
		reactionType: {
			dataType: 'uint32',
			fieldNumber: 1,
		},
		helloMessageID: {
			dataType: 'string',
			fieldNumber: 2,
		},
		data: {
			dataType: 'string',
			fieldNumber: 3,
			minLength: 0,
			maxLength: 64,
		},
		receivingChainID: {
			dataType: 'bytes',
			fieldNumber: 4,
			minLength: 4,
			maxLength: 4,
		},
		messageFee: {
			dataType: 'uint64',
			fieldNumber: 5,
		},
	},
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a new file <code>react/types.ts</code>, to define types that we will need when implementing the cross-chain command in the next step.</p>
</div>
<div class="paragraph">
<p>Export the types and interfaces as shown int he example below:</p>
</div>
<div class="listingblock">
<div class="title">react/types.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {
	MethodContext,
	ImmutableMethodContext,
	CCMsg,
	ChannelData,
	OwnChainAccount,
} from 'lisk-sdk';

export type TokenID = Buffer;

export interface InteroperabilityMethod {
	getOwnChainAccount(methodContext: ImmutableMethodContext): Promise&lt;OwnChainAccount&gt;;
	send(
		methodContext: MethodContext,
		feeAddress: Buffer,
		module: string,
		crossChainCommand: string,
		receivingChainID: Buffer,
		fee: bigint,
		parameters: Buffer,
		timestamp?: number,
	): Promise&lt;void&gt;;
	error(methodContext: MethodContext, ccm: CCMsg, code: number): Promise&lt;void&gt;;
	terminateChain(methodContext: MethodContext, chainID: Buffer): Promise&lt;void&gt;;
	getChannel(methodContext: MethodContext, chainID: Buffer): Promise&lt;ChannelData&gt;;
	getMessageFeeTokenID(methodContext: ImmutableMethodContext, chainID: Buffer): Promise&lt;Buffer&gt;;
	getMessageFeeTokenIDFromCCM(methodContext: ImmutableMethodContext, ccm: CCMsg): Promise&lt;Buffer&gt;;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now create a new command called <code>reactCrossChain</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk generate:command react reactCrossChain</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go the file <code>react/commands/react_command.ts</code> and import the constants, schemas and types defined above.</p>
</div>
<div class="paragraph">
<p>Next, define the following properties of the command:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code>: Define a method to get the name of the command and set it to the <code>CROSS_CHAIN_COMMAND_NAME_REACT</code> constant.
The same name will be used for the cross-chain command which will accept the CCM.</p>
</li>
<li>
<p><code>schema</code>: Set the command schema to equal <code>CCReactCommandParamsSchema</code>.</p>
</li>
<li>
<p><code>init()</code>: To initialize the module, we need access to the methods of the interoperability module.
Update the methods to expect the <code>interoperabilityMethod</code> as argument, and assign is to the private property <code>_interoperabilityMethod</code> of the <code>reactCrossChain</code> command.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">react/commands/react_command.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import {
	BaseCommand,
	CommandVerifyContext,
	CommandExecuteContext,
	VerificationResult,
	VerifyStatus,
	codec,
} from 'lisk-sdk';
import { CROSS_CHAIN_COMMAND_NAME_REACT } from '../constants';
import {
	CCReactCommandParamsSchema,
	CCReactMessageParams,
	CCReactMessageParamsSchema,
	CCReactCommandParams,
} from '../schemas';
import { InteroperabilityMethod } from '../types';

export class ReactCrossChainCommand extends BaseCommand {
	private _interoperabilityMethod!: InteroperabilityMethod;
	public schema = CCReactCommandParamsSchema;

	public get name(): string {
		return CROSS_CHAIN_COMMAND_NAME_REACT;
	}

	public init(args: { interoperabilityMethod: InteroperabilityMethod }) {
		this._interoperabilityMethod = args.interoperabilityMethod;
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go back to the file <code>react/module.ts</code> and update it as described in the code comments.</p>
</div>
<div class="listingblock">
<div class="title">react/module.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseInteroperableModule, ModuleMetadata, ModuleInitArgs } from 'lisk-sdk';
import { ReactCrossChainCommand } from './commands/react_command';
import { ReactEndpoint } from './endpoint';
import { ReactMethod } from './method';
import { ReactInteroperableMethod } from './cc_method';
// Import the type for the InteroperabilityMethod
import { InteroperabilityMethod } from './types';

export class ReactModule extends BaseInteroperableModule {
	public endpoint = new ReactEndpoint(this.stores, this.offchainStores);
	public method = new ReactMethod(this.stores, this.events);
	public commands = [new ReactCrossChainCommand(this.stores, this.events)];
	public crossChainMethod = new ReactInteroperableMethod(this.stores, this.events);
    // Create a private member to store the methods of the interoperability module
	private _interoperabilityMethod!: InteroperabilityMethod;

	// ...

    // Assign the methods of the interoperability module to _interoperabilityMethod
	public addDependencies(interoperabilityMethod: InteroperabilityMethod) {
		this._interoperabilityMethod = interoperabilityMethod;
	}

	// Lifecycle hooks
	// eslint-disable-next-line @typescript-eslint/require-await
	public async init(_args: ModuleInitArgs) {
        // Pass the methods of the interoperability module to the reactCrossChain command
		this.commands[0].init({
			interoperabilityMethod: this._interoperabilityMethod,
		});
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open the <code>app.ts</code> file, and register the module to the application.</p>
</div>
<div class="paragraph">
<p>Because the <code>ReactModule</code> is an <strong>interoperable module</strong>, it is required to call <code>app.registerInteroperableModule()</code> additionally.</p>
</div>
<div class="paragraph">
<p>Last but not least, call the <code>addDependencies()</code> method of the <code>ReactModule</code> with the methods of the interoperability module as parameter.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please remove the redundant registration of the <code>ReactModule</code> in the <code>modules.ts</code> file. It was added automatically during the command initialization.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">app.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Application, PartialApplicationConfig } from 'lisk-sdk';
import { registerModules } from './modules';
import { registerPlugins } from './plugins';
import { ReactModule } from './modules/react/module';

export const getApplication = (config: PartialApplicationConfig): Application =&gt; {
	const { app, method } = Application.defaultApplication(config);
	const reactModule = new ReactModule();
	app.registerModule(reactModule);
	app.registerInteroperableModule(reactModule);
	reactModule.addDependencies(method.interoperability);

	registerModules(app);
	registerPlugins(app);

	return app;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, go back to the <code>react_command.ts</code> file, and implement the command verification.</p>
</div>
<div class="paragraph">
<p>To keep the example simple, we only check if the <code>receivingChainID</code> parameter doesn&#8217;t equal the value of the sending chain.</p>
</div>
<div class="paragraph">
<p>Extend the <code>verify()</code> hook to include more checks for the other parameters as well, as desired.</p>
</div>
<div class="listingblock">
<div class="title">react/commands/react_command.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public async verify(context: CommandVerifyContext&lt;Params&gt;): Promise&lt;VerificationResult&gt; {
		const { params, logger } = context;

		logger.info('+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++');
		logger.info(params);
		logger.info('+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++');

		try {
			if (params.receivingChainID.equals(context.chainID)) {
				throw new Error('Receiving chain cannot be the sending chain.');
			}
		} catch (err) {
			return {
				status: VerifyStatus.FAIL,
				error: err as Error,
			};
		}
		return {
			status: VerifyStatus.OK,
		};
	}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once it is verified that the parameters are valid, we can create and send the corresponding CCM.</p>
</div>
<div class="paragraph">
<p>For this, adjust the <code>execute()</code> hook as shown in the snippet below.</p>
</div>
<div class="paragraph">
<p>Use the <code>.send()</code> method of the Interoperability module to send the prepared CCM.</p>
</div>
<div class="listingblock">
<div class="title">react/commands/react_command.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public async execute(context: CommandExecuteContext&lt;Params&gt;): Promise&lt;void&gt; {
		const {
			params,
			transaction: { senderAddress },
		} = context;

		const reactCCM: CCReactMessageParams = {
			reactionType: params.reactionType,
			data: params.data,
			helloMessageID: params.helloMessageID,
		};

		await this._interoperabilityMethod.send(
			context.getMethodContext(),
			senderAddress,
			'hello',
			CROSS_CHAIN_COMMAND_NAME_REACT,
			params.receivingChainID,
			params.messageFee,
			codec.encode(crossChainReactMessageSchema, reactCCM),
			context.header.timestamp,
		);
	}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The CCM will now be sent to the mainchain by a <a href="../../run-blockchain/setup-relayer.html" class="xref page">relayer node</a>, where it will be forwarded to the designated receiving sidechain.</p>
</div>
<div class="paragraph">
<p>For the other sidechain to be able to accept this CCM, we need to add a corresponding cross-chain command to the Hello module of the receiving chain.</p>
</div>
<div class="paragraph">
<p>To learn how to implement cross-chain commands on the receiving chain, check out the next guide: <a href="execute-ccm.html" class="xref page">How to execute a CCM</a></p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="index.html">How to create an interoperable module</a></span>
  <span class="next"><a href="execute-ccm.html">How to execute a CCM</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/glossary.js"></script>
<script async src="../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../_/js/vendor/component-versions.js"></script>
<script src="../../../_/js/vendor/custom.js"></script>
  </body>
</html>
