<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Performance Monitoring :: Lisk Documentation</title>
    <link rel="canonical" href="https://staging.lisk.io/documentation/lisk-core/monitoring.html">
    <meta name="generator" content="Antora 2.1.2">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<!--
    <link href="https://unpkg.com/primer/build/build.css" rel="stylesheet">
-->

  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a href="https://staging.lisk.io/documentation" class="lisk-logo"></a>
      Lisk Documentation
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-sdk">Lisk SDK Github</a>
            <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-core">Lisk Core Github</a>
            <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-hub">Lisk Hub Github</a>
            <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-mobile">Lisk Mobile Github</a>
            <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-explorer">Lisk Explorer Github</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://explorer.lisk.io/">Lisk Mainnet Explorer</a>
            <a class="navbar-item" target="_blank" href="https://testnet-explorer.lisk.io/">Lisk Testnet Explorer</a>
            <a class="navbar-item" target="_blank" href="https://testnet-faucet.lisk.io/">Lisk Testnet Faucet</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://lisk.io">Lisk Website</a>
            <a class="navbar-item" target="_blank" href="https://github.com/LiskHQ/lisk-sdk-examples">Example blockchain applications</a>
              <a class="navbar-item" target="_blank" href="https://www.liskdiscovery.com/">Community tools</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="lisk-core" data-version="1.6">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="introduction.html">Lisk Core</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="introduction.html"><strong>Introduction</strong></a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Setup</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/source.html">Source</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/docker.html">Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="setup/binary.html">Binary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Upgrade</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade/source.html">Source</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade/docker.html">Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="upgrade/binary.html">Binary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text"><strong>Administration</strong></span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="administration/source.html">Source</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="administration/docker.html">Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="administration/binary.html">Binary</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <span class="nav-text">API</span>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="migration.html">Migration</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="monitoring.html">Monitoring</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="troubleshooting.html">Trouble Shooting</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Core</span>
    <span class="version">1.6.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../index.html">2.1.3 (latest)</a>
        </li>
        <li class="version">
          <a href="../2.0/introduction.html">2.0.2</a>
        </li>
        <li class="version is-current">
          <a href="introduction.html">1.6.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk Protocol</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-protocol/1.1/index.html">1.1</a>
        </li>
        <li class="version">
          <a href="../../lisk-protocol/1.0/introduction.html">1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-sdk/index.html">2.3.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/2.2/introduction.html">2.2.0</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/2.1/introduction.html">2.1.0</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/2.0/introduction.html">2.0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main role="main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../lisk-sdk/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="introduction.html">Lisk Core</a></li>
    <li><a href="monitoring.html">Monitoring</a></li>
  </ul>
</nav>
<button class="toc-toggle"></button>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.6.0</button>
  <div class="version-menu">
    <a class="version" href="../monitoring.html">2.1.3 (latest)</a>
    <a class="version" href="../2.0/monitoring.html">2.0.2</a>
    <a class="version is-current" href="monitoring.html">1.6.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-core-1.6.0/modules/ROOT/pages/monitoring.adoc">Edit this Page</a></div>
</div>
<article class="doc"><a name="section-top"></a>
<h1>Performance Monitoring</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>We use <a href="http://newrelic.com/">New Relic</a> to monitor the activities inside
of the application. It enables detailed insight into the system and
keeps track of the performance of any activity, e.g. an HTTP API call or
a background process from Lisk Core jobs queue.</p>
</div>
<div class="paragraph">
<p>Following steps should provide you with the insights of why and how to
monitor your Lisk Core node using New Relic instrumentation:</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_enable_new_relic"><a class="anchor" href="#_enable_new_relic"></a>Enable New Relic</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_get_new_relic_license_key"><a class="anchor" href="#_get_new_relic_license_key"></a>Get New Relic license key</h3>
<div class="paragraph">
<p>The first thing you need to do is register an account at
<a href="https://rpm.newrelic.com" class="bare">https://rpm.newrelic.com</a> if you have not already done that. After
successful login, select ``Account settings'' in the account dropdown in
the New Relic UI. From the Account information section on the right side
of the Summary page, copy your license key.</p>
</div>
</div>
<div class="sect2">
<h3 id="_add_the_license_key"><a class="anchor" href="#_add_the_license_key"></a>Add the license key</h3>
<div class="sect3">
<h4 id="_option_1_as_environment_variable"><a class="anchor" href="#_option_1_as_environment_variable"></a>Option 1: As environment variable</h4>
<div class="paragraph">
<p>To enable the performance monitoring on your node, make sure you have an
environment variable <code>NEW_RELIC_LICENSE_KEY</code> set:</p>
</div>
<div class="sect4">
<h5 id="_binary_source"><a class="anchor" href="#_binary_source"></a>Binary &amp; Source</h5>
<div class="paragraph">
<p>The following command works for Lisk Core Binary and from Source
distributions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export NEW_RELIC_LICENSE_KEY=XXXXXXXXX</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_docker"><a class="anchor" href="#_docker"></a>Docker</h5>
<div class="paragraph">
<p>For Docker distributions of Lisk Core navigate into the <code>docker</code>
folder inside your Lisk Core installation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd lisk_repo/docker # navigate into docker directory</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside, edit <code>docker-compose.override.yml</code> and add your license key
like so:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>version: "3"
services:

  lisk:
    environment:
      - NEW_RELIC_LICENSE_KEY=XXXXXXXXX</pre>
</div>
</div>
<div class="paragraph">
<p>Then, save your changes to the file and reinitialize Docker, so it can
use the new environment variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">docker-compose up -d # (re)start docker containers</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_option_2_in_newrelic_js"><a class="anchor" href="#_option_2_in_newrelic_js"></a>Option 2: In newrelic.js</h4>
<div class="paragraph">
<p>The second way of adding the license key is to edit <code>newrelic.js</code> file
which can be found in the root directory of the Lisk Core installation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cd lisk_repo # navigate inside the root folder of lisk core</code></pre>
</div>
</div>
<div class="paragraph">
<p>Inside, open the file <code>newrelic.js</code> and search for the option
<code>license_key</code> and add your license key as a string value.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>/**
 * Your New Relic license key.
 *
 * MUST set the license key using `NEW_RELIC_LICENSE_KEY` env variable
 * if you want to enable the monitoring of the lisk node
 */
license_key: 'XXXXXXXXX',</pre>
</div>
</div>
<div class="paragraph">
<p>After adding the license key, save your changes and reload your node.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_restart_lisk_core_node"><a class="anchor" href="#_restart_lisk_core_node"></a>(Re)start Lisk Core node</h3>
<div class="paragraph">
<p>Then start the node normally.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">bash lisk.sh start # start lisk core binary
npx pm2 start lisk # start lisk core source
docker start container_id # start lisk core docker</code></pre>
</div>
</div>
<div class="paragraph">
<p>… or restart if it is already running.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">bash lisk.sh reload # restart lisk core binary
npx pm2 restart lisk # restart lisk core source
docker restart container_id # restart lisk core docker</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keep_your_node_busy"><a class="anchor" href="#_keep_your_node_busy"></a>Keep your node busy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To monitor activities in the system, you need to perform some. So keep
your node busy by performing actions like taking a snapshot, syncing
your node, or running various API request against it. Even if you don’t
perform them, New Relic can monitor internal activities of the system
e.g. different queue jobs.</p>
</div>
<div class="paragraph">
<p>There are several ways to create workload on your node:</p>
</div>
<div class="sect2">
<h3 id="_option_1_lisk_core_test_suite"><a class="anchor" href="#_option_1_lisk_core_test_suite"></a>Option 1: Lisk Core Test Suite</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The Lisk Core Test Suite is only available for Lisk Core from Source.</p>
</div>
</blockquote>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>The <code>unit</code> Testsuite is not suited for this purpose, as unit tests are
not executed in the context of the running application.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The README of the Lisk Core repository in Github describes
<a href="https://github.com/LiskHQ/lisk-sdk/tree/development/lisk#tests">how to
run the Testsuite</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_option_2_apache_bench"><a class="anchor" href="#_option_2_apache_bench"></a>Option 2: Apache Bench</h3>
<div class="paragraph">
<p><a href="https://httpd.apache.org/docs/2.4/programs/ab.html">Apache Bench</a> is a
generic benchmarking tool to measure the performance of HTTP servers.</p>
</div>
<div class="paragraph">
<p>Do e.g. the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">now &amp;&amp; ab -n 200000 -c 1 -k "http://127.0.0.1:7000/api/accounts?publicKey=4e8896e20375b16e5f1a6e980a4ed0cdcb3356e99e965e923804593669c87ad2"</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>now</code>: Appends the current system time on top of the Apache Bench
output. In case you want to compare New Relic benchmark results with
Apache Bench output, it is convenient to add it for knowing when the
benchmark started exactly, as Apache Bench is not logging that itself.</p>
</div>
<div class="paragraph">
<p><code>-n</code>: The number of requests that are executed</p>
</div>
<div class="paragraph">
<p><code>-c</code>: The number of requests to perform in parallel.</p>
</div>
<div class="paragraph">
<p><code>-k</code>: Enable the HTTP KeepAlive feature, i.e., perform multiple
requests within one HTTP session.</p>
</div>
</div>
<div class="sect2">
<h3 id="_option_3_siege"><a class="anchor" href="#_option_3_siege"></a>Option 3: Siege</h3>
<div class="paragraph">
<p><a href="https://www.joedog.org/siege-manual">Siege</a> is another tool for
benchmarking the performance of HTTP servers.</p>
</div>
<div class="paragraph">
<p>Do e.g. the following request:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">siege -c 10 -t 30m http://127.0.0.1:7000/api/blocks</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>-c</code>: Number of requests to perform in parallel.</p>
</div>
<div class="paragraph">
<p><code>-t</code>: Allows you to run the test for a selected period.</p>
</div>
</div>
<div class="sect2">
<h3 id="_option_4_custom_script"><a class="anchor" href="#_option_4_custom_script"></a>Option 4: Custom script</h3>
<div class="paragraph">
<p>Feel free to write your own custom scripts and specify the order and
amount of actions you want the node to perform during the analysis,
depending on a special use case or a scenario you want to benchmark.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_analysis_with_new_relic"><a class="anchor" href="#_analysis_with_new_relic"></a>Analysis with New Relic</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let’s take a case study, we want to analyze the performance of API
<code>GET /api/transactions</code> endpoint, to figure out:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If there is any bottleneck in the database level</p>
</li>
<li>
<p>Which of the database query is taking most of the time</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here are the steps we follow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ cd ~/lisk_repo
~/lisk_repo $ export NEW_RELIC_LICENSE_KEY=xxxxxxxxxxx
~/lisk_repo $ npx pm2 start lisk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now start making some requests using Siege:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">siege -c 10 -t 5m http://127.0.0.1:4000/api/transactions</code></pre>
</div>
</div>
<div class="paragraph">
<p>The script will automatically keep on sending the HTTP requests against
your node for 5 minutes (<code>-t 5m</code>). During that time please keep in
mind:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>You may want to disable the cache on the node to get real performance
analysis. To do this, set <code>cacheEnabled</code> in configuration to
<code>false</code>.</p>
</li>
<li>
<p>You might not see the viable results if your development blockchain
dataset is empty. This could be changed by running your tests against
the Testnet data.</p>
</li>
<li>
<p>It may take a couple of minutes to show the analyzed results in the
New Relic interface so be patient.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>To see the New Relic instrumentation results, please log in to
<a href="https://rpm.newrelic.com" class="bare">https://rpm.newrelic.com</a>, and select <code>APM</code> from the top menu.</p>
</div>
<div class="paragraph">
<p>The first screen is the list of applications. Depending on which network
you run your node in, you will see the application title as shown in the
image below.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/app_dashboard.png" alt="Apps List UI"></span></p>
</div>
<div class="paragraph">
<p>Please select the specific application by clicking its name. You will
see the following dashboard:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/dashboard.png" alt="Dashboard UI"></span></p>
</div>
<div class="paragraph">
<p>To know fine-grained details of this dashboard, please read
<a href="https://learn.newrelic.com/courses/intro_apm" class="bare">https://learn.newrelic.com/courses/intro_apm</a>. For now, since during the
experiment we only executed the HTTP requests against our node
(<code>GET /api/transactions</code>), there is only one section having
interesting results. Please select ``Transactions'' from the left menu
in the above screen. See detailed instructions in the below image.</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>To clarify, New Relic transactions have no relation with Lisk
transactions. It’s just the grouping term New Relic use to show
analytics.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/transactions.png" alt="Transactions UI"></span></p>
</div>
<div class="paragraph">
<p>In the above image the most valuable information for us is highlighted
in the rectangle, which provides us with the following information:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Most of the time (56%) was spent in ExpressJS which is a Node.js
module.</p>
</li>
<li>
<p>During the experiment, one database view (<code>trs_list</code>) and one
database table (<code>delegates</code>) were involved in the persistence layer.</p>
</li>
<li>
<p>Querying to database table <code>delegates</code> was quick.</p>
</li>
<li>
<p>While query to database view <code>trs_list</code> was a bit expensive.</p>
</li>
<li>
<p>On average API calls for <code>GET /api/transactions</code> took 122ms.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want this information in a tabular form to present somewhere,
please click on the ``Show all transactions table'' link. Then you will
see a view like this.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/transactions_data.png" alt="Transactions Data"></span></p>
</div>
<div class="paragraph">
<p>From this screen you can see:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>In selected time range we made 14252 total requests to
<code>GET /api/transactions</code>.</p>
</li>
<li>
<p>The slowest request took 2.17 seconds.</p>
</li>
<li>
<p>The fastest request took 10ms.</p>
</li>
<li>
<p>The average time for requests is 122ms while the standard deviation is
213ms.</p>
</li>
<li>
<p>Difference between average and standard deviation shows there were
small spikes between requests.</p>
</li>
<li>
<p>You can export data to CSV format from this screen to keep a record or
share with others.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Now if we want to debug deeper which transactions actually took 2.17
seconds, please go back to the previous screen, scroll down a bit and
you will see transaction traces.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/trace_list.png" alt="Trace list"></span></p>
</div>
<div class="paragraph">
<p>Here you can see an overview of an individual transaction which took
longer time and is considered as <code>slow''. The threshold which defines
the </code>slow'' transactions is configured in file <code>+newrelic.js+</code> under
<code>transaction_tracer.explain_threshold</code>, which is currently 100ms-
every request which took more than 100ms will be considered as <code>slow''
and logged as the trace by New Relic. Let’s debug further and verify
what made this request </code>slow'', by clicking on any of the trace links
in the list.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/trace_summary.png" alt="Trace summary"></span></p>
</div>
<div class="paragraph">
<p>As shown on the above trace summary, most of the transaction’s time was
spent in two functions <code>modules.transactions.shared.getTransactions</code>
and <code>Middleware: bound logClientConnections</code>. You can go to trace
detail to see more information and call stack. You can also click on
``Database queries'' to see which queries were executed during this
request.</p>
</div>
<div class="paragraph">
<p>It’s also possible to find the database query which is taking most of
the time. To do this, please click on the left side menu for
<code>Database'' and then sort by </code>Most time consuming'' and then select
the top of the list.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/database_query.png" alt="Database Queries"></span></p>
</div>
<div class="paragraph">
<p>Scroll down on the page shown above, you will see the slow queries shown
below:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/slow_queries.png" alt="Slow Queries"></span></p>
</div>
<div class="paragraph">
<p>By analyzing the above diagrams, we can conclude the following assuming
that all stats are strictly within experiment time range:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The slowest queries in the system are queries for <code>trs_list</code> view.</p>
</li>
<li>
<p>For that database view <code>trs_list</code> the slowest query is the
<code>SELECT count(*) FROM trs_list</code> which took 2.13 seconds.</p>
</li>
<li>
<p>There are few other queries in the on <code>trs_list</code> view which took
more than 1 second time.</p>
</li>
<li>
<p>If you click on the top slow query, you will notice the query was
executed during <code>GET /api/transactions</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><span class="image"><img src="_images/query_detail.png" alt="Query Detail"></span></p>
</div>
<div class="paragraph">
<p>We hope the above use case helps you to understand the usage and
benefits of New Relic. Please let us know if you want to know more.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faq"><a class="anchor" href="#_faq"></a>FAQ</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>I am not seeing Lisk Data in the New Relic APM dashboard?</strong></p>
</div>
<div class="paragraph">
<p>Please make sure to check following.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Are you using a valid license key to your account?</p>
</li>
<li>
<p>Have you exported the license key on the node where you are running
Lisk?</p>
</li>
<li>
<p>Have you selected the proper time range in New Relic APM?</p>
</li>
<li>
<p>Are you looking on the right page? E.g. you may be searching web
transactions but you had selected Non-Web transactions in UI.</p>
</li>
<li>
<p>If you just run the node, give it a few minutes let New Relic crunch
the data and show in UI.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>Are the performance measures consistent?</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>As far as you are using the same machine specification to run
different scenarios, the stats will be consistent.</p>
</li>
<li>
<p>We recommend to not benchmark on your development machine, as it can
have another workload during different test runs.</p>
</li>
<li>
<p>If you are using AB or Siege, always use the same number of
connections to simulate the same request load on a node.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><strong>How is it useful for me as a Delegate or Exchange?</strong></p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Performance of the machine may affect the behavior of interacting with
the node.</p>
</li>
<li>
<p>You can create alert policies on New Relic to inform you when your app
taking more memory.</p>
</li>
<li>
<p>You can set alerts to see if the database is getting slow.</p>
</li>
<li>
<p>You can track if some errors occurred in the system, which were not
handled properly.</p>
</li>
</ol>
</div>
</div>
</div>
</article>
<aside class="article-aside hidden" role="navigation">
    <h3 class="toc-title">On this page:</h3>
    <div id="article-toc"></div>
</aside>
</main>
</div>
<footer class="footer">
  <p>Go to the <a href="https://lisk.io/" target="_blank">Lisk Website</a></p>
  <p>Chat with developers at <a href="https://gitter.im/LiskHQ/lisk-sdk" target="_blank">Lisk Gitter</a></p>
</footer>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.1.1/tocbot.min.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script>
    tocbot.init( {
        tocSelector: '#article-toc',
        contentSelector: 'article',
        headingSelector: 'h1, h2, h3',
        collapseDepth: 6,
        positionFixedSelector: null,
        scrollSmooth: false
    } );
    var tocList = document.getElementById( 'article-toc' ).getElementsByClassName( 'toc-list' );
    if ( tocList && tocList.length > 0 && tocList[0].childNodes.length > 0 ) {
        document.getElementById( 'article-toc' ).parentNode.classList.remove( 'hidden' );
    }
</script>
  </body>
</html>
