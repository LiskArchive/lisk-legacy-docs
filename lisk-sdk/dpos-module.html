<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DPoS module - Lisk  SDK  Docs</title>
    <link rel="canonical" href="https://lisk.io/documentation/lisk-sdk/dpos-module.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/site-extra.css">
      <link rel="stylesheet" href="../_/css/vendor/docsearch.min.css">
      <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
<script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<link rel="icon" href="../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<script data-cookieconsent="ignore" type="text/javascript" id="GTM">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":
          new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!="dataLayer"?"&amp;l="+l:"";j.async=true;
  j.crossOrigin="anonymous";j.src=
          "https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,"script","dataLayer","GTM-NKNKGHL");</script>

<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<header class="header">
  <nav class="navbar">
      <div class="navbar-content">
        <div class="navbar-brand">
          <a href="https://lisk.io" title="Lisk.io" class="lisk-logo"></a>
            <span  class="nav-brand__name-area">
              <strong class="nav-brand__name-area__title">SDK</strong>
                        </span>
          <div class="top-versions page-versions">
  <button class="version-menu-toggle top-version-menu-toggle" title="Show other versions of page">5.0.5 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="dpos-module.html">5.0.5 (latest)</a>
    <a class="version is-missing" href="v4/index.html">4.0.0</a>
    <a class="version is-missing" href="v3/index.html">3.0.2</a>
    <a class="version is-missing" href="v2/index.html">2.3.8</a>
  </div>
</div>
          <button class="navbar-burger" data-target="topbar-nav">
            <span></span>
            <span></span>
            <span></span>
          </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
          <div class="navbar-end">
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Documentations</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-sdk/">Lisk SDK</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-service/">Lisk Service</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-core/">Lisk Core</a>
              </div>
            </div>
            <div class="navbar-item has-dropdown is-hoverable">
              <a class="navbar-link" href="">Resources</a>
              <div class="navbar-dropdown">
                <a class="navbar-item" href=""><strong>Lisk Service API</strong></a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-service/references/api.html">Mainnet</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-service/references/api-testnet.html">Testnet</a>
                <a class="navbar-item" href="https://lisk.io/documentation/lisk-service/references/api-betanet.html">Betanet</a>
                <hr class="navbar-divider">
                <a class="navbar-item" href=""><strong>Lisk Network Explorer</strong></a>
                <a class="navbar-item" target="_blank" href="https://lisk.observer/">Lisk Observer<i class="icofont-external-link"></i></a>
                <a class="navbar-item" target="_blank" href="https://liskscan.io/">LISKscan<i class="icofont-external-link"></i></a>
              </div>
            </div>
          </div>
            <div class="navbar-menu search-box hide-for-print">
              <input id="search-input" type="text" placeholder="Search">
            </div>
        </div>
        <div class="navbar-item navbar-right">
<!--
          <a href="https://lisk.chat" title="Lisk Chat" target="_blank" class="footer__icon icon-discord-2x"></a>
-->
          <a href="https://github.com/LiskHQ" title="Lisk GitHub" target="_blank" class="footer__icon icon-github-2x"></a>
          <span class="control">
            <a class="button is-primary" target="_blank" title="Lisk Dev Forum" href="https://dev.lisk.io/">Get help</a>
          </span>
        </div>
      </div>
  </nav>
</header>
<div class="body-container">
  <div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="index.html">What is the Lisk SDK?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="quickstart.html">Quickstart</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="architecture/index.html">Architectural overview</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="architecture/on-chain-architecture.html">On-chain architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="architecture/off-chain-architecture.html">Off-chain architecture</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="architecture/communication-architecture.html">Communication Architecture</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Development guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/setup.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Adding plugins</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="guides/app-development/adding-plugins/index.html">Registering plugins</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="guides/app-development/adding-plugins/dashboard-plugin.html">Adding the dashboard plugin to the application</a>
  </li>
</ul>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/module.html">Creating a new module</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/asset.html">Creating a custom asset</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/plugin.html">Creating a new plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/configuration.html">Configuring a blockchain application</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/genesis-block.html">Generating a genesis block</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/app-development/frontend.html">Communicating with a frontend</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management guides</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/node-management/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/node-management/forging-node-protection.html">Protecting a forging node</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/node-management/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="guides/node-management/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="tutorials/index.html">Tutorials overview</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="tutorials/hello-world.html">Hello World</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="tutorials/nft.html">Non-fungible token (NFT)</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="tutorials/srs.html">Social Recovery System (SRS)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="references/schemas.html">Schemas</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Commander</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-commander/index.html">What is Lisk Commander?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-commander/commands.html">Commands</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-commander/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Elements</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/index.html">What is Lisk Elements?</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/api-client.html">API client</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/bft.html">BFT</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/chain.html">Chain</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/client.html">Client</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/codec.html">Codec</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/db.html">DB</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/genesis.html">Genesis</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/p2p.html">P2P</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/transaction-pool.html">Transaction pool</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/tree.html">Tree</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/utils.html">Utils</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-elements/validator.html">Validator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Framework</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="references/lisk-framework/index.html">Framework interfaces</a>
  </li>
  <li class="nav-item single-page" data-depth="3">
    <a class="nav-link" href="rpc-endpoints.html">RPC endpoints</a>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Default modules</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="token-module.html">Token module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="sequence-module.html">Sequence module</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="keys-module.html">Keys module</a>
  </li>
  <li class="nav-item is-current-page single-page" data-depth="4">
    <a class="nav-link" href="dpos-module.html">DPoS module</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Default plugins</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="references/lisk-framework/http-api-plugin.html">HTTP API plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="references/lisk-framework/forger-plugin.html">Forger plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="references/lisk-framework/report-misbehavior-plugin.html">Report misbehavior plugin</a>
  </li>
  <li class="nav-item single-page" data-depth="4">
    <a class="nav-link" href="references/lisk-framework/monitor-plugin.html">Monitor plugin</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="references/glossary.html">Glossary and Abbreviations</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk protocol</span>
<ul class="nav-list">
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/index.html">What is the Lisk protocol?</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/network.html">Network</a>
  </li>
  <li class="nav-item single-page" data-depth="2">
    <a class="nav-link" href="protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">5.0.5 (latest)</span>
  </div>
  <ul class="components">
    <li class="component">
      <span class="title">Lisk Core</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-core/index.html">2.1.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-core/v3/index.html">3.0.0-beta.6</a>
        </li>
        <li class="version">
          <a href="../lisk-core/v3-beta.1/index.html">3.0.0-beta.1</a>
        </li>
        <li class="version">
          <a href="../lisk-core/v3-beta.0/index.html">3.0.0-beta.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk docs manual</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <span class="title">Lisk SDK</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">5.0.5 (latest)</a>
        </li>
        <li class="version">
          <a href="v4/index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="v3/index.html">3.0.2</a>
        </li>
        <li class="version">
          <a href="v2/index.html">2.3.8</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <span class="title">Lisk Service</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-service/index.html">0.3.0 (latest)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article main">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="index.html" title="Home" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="index.html">Lisk SDK</a></li>
    <li>References</li>
    <li>Lisk Framework</li>
    <li>Default modules</li>
    <li><a href="dpos-module.html">DPoS module</a></li>
  </ul>
</nav>
  <div class="page-versions toolbar-versions">
  <button class="version-menu-toggle" title="Show other versions of page">5.0.5 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="dpos-module.html">5.0.5 (latest)</a>
    <a class="version is-missing" href="v4/index.html">4.0.0</a>
    <a class="version is-missing" href="v3/index.html">3.0.2</a>
    <a class="version is-missing" href="v2/index.html">2.3.8</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1075-update-setup-guide/modules/ROOT/pages/dpos-module.adoc"><i class="icofont-ui-edit"></i>Edit this Page</a></div>
  </div>
  <div class="content">
<article class="doc">
<h1 class="page">DPoS module</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#account-schema">Account schema</a></li>
<li><a href="#transactions">Transactions</a>
<ul class="sectlevel2">
<li><a href="#registertransactionasset">RegisterTransactionAsset</a></li>
<li><a href="#votetransactionasset">VoteTransactionAsset</a></li>
<li><a href="#unlocktransactionasset">UnlockTransactionAsset</a></li>
<li><a href="#pomtransactionasset">PomTransactionAsset</a></li>
</ul>
</li>
<li><a href="#actions">Actions</a>
<ul class="sectlevel2">
<li><a href="#dposgetalldelegates">dpos:getAllDelegates</a></li>
<li><a href="#dposgetunlockings">dpos:getUnlockings</a></li>
</ul>
</li>
<li><a href="#dpos">Delegated Proof of Stake (DPoS)</a>
<ul class="sectlevel2">
<li><a href="#forging">Forging</a></li>
<li><a href="#delegate_registration">Registering as delegate</a></li>
<li><a href="#vote">Voting for a delegate</a></li>
<li><a href="#unlock">Unvoting delegates and unlocking of tokens</a></li>
</ul>
</li>
<li><a href="#bft">BFT</a>
<ul class="sectlevel2">
<li><a href="#discover">How to discover misbehavior of a delegate</a></li>
<li><a href="#reporting-a-delegate">Reporting a delegate</a></li>
<li><a href="#punishment_consequences">Consequences for punished delegates and their voters</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The DPoS module is responsible for handling all DPoS related logics.
Specifically:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Snapshotting vote weights</p>
</li>
<li>
<p>Calculating productivity</p>
</li>
<li>
<p>Handling registerDelegate, voteDelegate, unlockToken and reportDelegateMisbehavior transaction assets</p>
</li>
<li>
<p>Setting the next delegates set</p>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dpos</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Assets</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">ID</th>
<th class="tableblock halign-left valign-top">Name</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#registertransactionasset">RegisterTransactionAsset</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#votetransactionasset">VoteTransactionAsset</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#unlocktransactionasset">UnlockTransactionAsset</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="#pomtransactionasset">PomTransactionAsset</a></p></td>
</tr>
</tbody>
</table></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reducers</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>none</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Actions</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p><a href="#dposgetalldelegates">dpos:getAllDelegates</a></p>
</li>
<li>
<p><a href="#dposgetunlockings">dpos:getUnlockings</a></p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">none</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom config options</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Option</th>
<th class="tableblock halign-left valign-top">Default value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">activeDelegates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">101</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">standbyDelegates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">delegateListRoundOffset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="account-schema"><a class="anchor" href="#account-schema"></a>Account schema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The token module adds a new property <code>balance</code> under the key <code>token</code> to every account in the network as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">{
    type: 'object',
    properties: {
        delegate: {
            type: 'object',
            fieldNumber: 1,
            properties: {
                username: { dataType: 'string', fieldNumber: 1 },
                pomHeights: {
                    type: 'array',
                    items: { dataType: 'uint32' },
                    fieldNumber: 2,
                },
                consecutiveMissedBlocks: { dataType: 'uint32', fieldNumber: 3 },
                lastForgedHeight: { dataType: 'uint32', fieldNumber: 4 },
                isBanned: { dataType: 'boolean', fieldNumber: 5 },
                totalVotesReceived: { dataType: 'uint64', fieldNumber: 6 },
            },
            required: [
                'username',
                'pomHeights',
                'consecutiveMissedBlocks',
                'lastForgedHeight',
                'isBanned',
                'totalVotesReceived',
            ],
        },
        sentVotes: {
            type: 'array',
            fieldNumber: 2,
            items: {
                type: 'object',
                properties: {
                    delegateAddress: {
                        dataType: 'bytes',
                        fieldNumber: 1,
                    },
                    amount: {
                        dataType: 'uint64',
                        fieldNumber: 2,
                    },
                },
                required: ['delegateAddress', 'amount'],
            },
        },
        unlocking: {
            type: 'array',
            fieldNumber: 3,
            items: {
                type: 'object',
                properties: {
                    delegateAddress: {
                        dataType: 'bytes',
                        fieldNumber: 1,
                    },
                    amount: {
                        dataType: 'uint64',
                        fieldNumber: 2,
                    },
                    unvoteHeight: {
                        dataType: 'uint32',
                        fieldNumber: 3,
                    },
                },
                required: ['delegateAddress', 'amount', 'unvoteHeight'],
            },
        },
    },
	default: {
		delegate: {
			username: '',
			pomHeights: [],
			consecutiveMissedBlocks: 0,
			lastForgedHeight: 0,
			isBanned: false,
			totalVotesReceived: BigInt(0),
		},
		sentVotes: [],
		unlocking: [],
	},
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transactions"><a class="anchor" href="#transactions"></a>Transactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following transaction assets are provided by the token module.</p>
</div>
<div class="sect2">
<h3 id="registertransactionasset"><a class="anchor" href="#registertransactionasset"></a>RegisterTransactionAsset</h3>
<div class="paragraph">
<p>Allows to send a register delegate transaction, which registers a delegate for the sender account with a given username.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p><code>registerDelegate</code></p>
</dd>
<dt class="hdlist1">ID</dt>
<dd>
<p><code>0</code></p>
</dd>
<dt class="hdlist1">Base fee</dt>
<dd>
<p>10 LSK</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">{
    $id: 'lisk/dpos/register',
    type: 'object',
    required: ['username'],
    properties: {
        username: {
            dataType: 'string',
            fieldNumber: 1,
            minLength: 1,
            maxLength: 20,
        },
    },
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="votetransactionasset"><a class="anchor" href="#votetransactionasset"></a>VoteTransactionAsset</h3>
<div class="paragraph">
<p>Allows to send a vote transaction, which casts votes and unvotes for delegates.</p>
</div>
<div class="paragraph">
<p>Each token can only be used once for voting, therefore the sender locks a certain amount of tokens for each vote.
After unvoting a delegate, the user is able to unlock the token again with the <a href="#unlocktransactionasset">unlock transaction</a>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p><code>voteDelegate</code></p>
</dd>
<dt class="hdlist1">ID</dt>
<dd>
<p><code>1</code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">{
    $id: 'lisk/dpos/vote',
    type: 'object',
    required: ['votes'],
    properties: {
        votes: {
            type: 'array',
            minItems: 1,
            maxItems: 20,
            items: {
                type: 'object',
                required: ['delegateAddress', 'amount'],
                properties: {
                    delegateAddress: {
                        dataType: 'bytes',
                        fieldNumber: 1,
                        minLength: 20,
                        maxLength: 20,
                    },
                    amount: {
                        dataType: 'sint64',
                        fieldNumber: 2,
                    },
                },
            },
            fieldNumber: 1,
        },
    },
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="unlocktransactionasset"><a class="anchor" href="#unlocktransactionasset"></a>UnlockTransactionAsset</h3>
<div class="paragraph">
<p>Allows to send an unlock transaction, which unlocks token that have been locked after voting for a delegate, after unvoting this delegate.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p><code>unlockToken</code></p>
</dd>
<dt class="hdlist1">ID</dt>
<dd>
<p><code>2</code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">{
    $id: 'lisk/dpos/unlock',
    type: 'object',
    required: ['unlockObjects'],
    properties: {
        unlockObjects: {
            type: 'array',
            minItems: 1,
            maxItems: 20,
            items: {
                type: 'object',
                required: ['delegateAddress', 'amount', 'unvoteHeight'],
                properties: {
                    delegateAddress: {
                        dataType: 'bytes',
                        fieldNumber: 1,
                        minLength: 20,
                        maxLength: 20,
                    },
                    amount: {
                        dataType: 'uint64',
                        fieldNumber: 2,
                    },
                    unvoteHeight: {
                        dataType: 'uint32',
                        fieldNumber: 3,
                    },
                },
            },
            fieldNumber: 1,
        },
    },
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="pomtransactionasset"><a class="anchor" href="#pomtransactionasset"></a>PomTransactionAsset</h3>
<div class="paragraph">
<p>Allows to send a proof-of-misbehavior transaction, reports violations of the BFT protocol by a particular delegate.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Name</dt>
<dd>
<p><code>reportDelegateMisbehavior</code></p>
</dd>
<dt class="hdlist1">ID</dt>
<dd>
<p><code>3</code></p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Schema</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">{
    $id: 'lisk/dpos/pom',
    type: 'object',
    required: ['header1', 'header2'],
    properties: {
        header1: {
            ...blockHeaderSchema,
            fieldNumber: 1,
        },
        header2: {
            ...blockHeaderSchema,
            fieldNumber: 2,
        },
    },
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="actions"><a class="anchor" href="#actions"></a>Actions</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="dposgetalldelegates"><a class="anchor" href="#dposgetalldelegates"></a>dpos:getAllDelegates</h3>
<div class="paragraph">
<p>Returns a list of all registered delegates, including their username and address.
The address is returned as hex string.</p>
</div>
<div class="sect3">
<h4 id="input"><a class="anchor" href="#input"></a>Input</h4>
<div class="paragraph">
<p>none</p>
</div>
</div>
<div class="sect3">
<h4 id="returns"><a class="anchor" href="#returns"></a>Returns</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    username: string, <i class="conum" data-value="1"></i><b>(1)</b>
    address: string, <i class="conum" data-value="2"></i><b>(2)</b>
}[]</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Username of the delegate</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Address of the delegate as hex string.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dposgetunlockings"><a class="anchor" href="#dposgetunlockings"></a>dpos:getUnlockings</h3>
<div class="paragraph">
<p>Returns a list of delegate unvotes of a certain account, the height of the unvote, and the minimum height for unlocking the tokens again.</p>
</div>
<div class="sect3">
<h4 id="input-2"><a class="anchor" href="#input-2"></a>Input</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  address: string; <i class="conum" data-value="1"></i><b>(1)</b>
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Address of the account as hex string.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="returns-2"><a class="anchor" href="#returns-2"></a>Returns</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
    delegateAddress: string, <i class="conum" data-value="1"></i><b>(1)</b>
    amount: string, <i class="conum" data-value="2"></i><b>(2)</b>
    unvoteHeight: number, <i class="conum" data-value="3"></i><b>(3)</b>
    minUnlockHeight: number, <i class="conum" data-value="4"></i><b>(4)</b>
}[]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dpos"><a class="anchor" href="#dpos"></a>Delegated Proof of Stake (DPoS)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Lisk SDK bootstraps a blockchain network that is based on the <a href="protocol/consensus-algorithm.html#dpos" class="page">Lisk DPoS</a> consensus algorithm.</p>
</div>
<div class="paragraph">
<p>In DPoS based blockchains, the consensus regarding who can forge the next block is reached by users according to the votes cast.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The DPoS used by Lisk is in fact more of a middle ground between <a href="https://en.wikipedia.org/wiki/Proof_of_stake">PoS</a> and DPoS.</p>
</div>
<div class="paragraph">
<p>The DPoS related characteristic is the ability of users to <a href="#delegate_registration">register as delegate</a> and then <a href="#vote">receive votes</a> from other users, in order to increase their <a href="#weight">delegate weight</a>.</p>
</div>
<div class="paragraph">
<p>The PoS related characteristic is the requirement for delegates to self-vote a certain amount of tokens, in order to increase their delegate weight.
Another PoS characteristic is the mechanism for the selection of the <a href="#forging_delegates">two random standby delegates</a>, who are selected every forging round.
The higher the delegate weight, the higher the chance to be selected in one of the two random spots available for standby delegates.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="forging"><a class="anchor" href="#forging"></a>Forging</h3>
<div class="paragraph">
<p>The process of adding new blocks to a blockchain that uses the PoS or DPoS consensus algorithm is called forging.</p>
</div>
<div class="paragraph">
<p>The 101 active delegates and 2 additional standby delegates are selected to forge during a forging round.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>During a forging round, no new calculations are required, which makes DPoS an extremely <strong>energy-friendly</strong> consensus algorithm, compared to "mining", which is the analog process for blockchains that run with Proof of Work (PoW).
This technique enables a very energy efficient process of adding new blocks, which allows forging nodes to run even on machines with very limited processing capabilities, such as a Raspberry Pi.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="forging_delegates" class="literalblock">
<div class="content">
<pre>101(amount of the active delegates) + 2(random standby delegates) = 103(Number of blocks of a forging round)</pre>
</div>
</div>
<div class="paragraph">
<p>More information about the delegate selection mechanism can be found in the <a href="protocol/consensus-algorithm.html#delegate_selection" class="page">Lisk Protocol</a>.</p>
</div>
<div class="sect3">
<h4 id="weight"><a class="anchor" href="#weight"></a>Delegate weight</h4>
<div class="paragraph">
<p>The 101 delegates with the highest delegate weight are selected for the active forging positions.</p>
</div>
<div class="paragraph">
<p>The delegate weight is defined as shown below:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>delegate weight = minimum { 10 * delegate self-vote , sum of all votes for the delegate }</pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>delegate self-vote</code> is the amount the delegate voted for its own account.</p>
</div>
<div class="paragraph">
<p>The <code>sum of all votes for the delegate</code> includes the self-votes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="delegate_registration"><a class="anchor" href="#delegate_registration"></a>Registering as delegate</h3>
<div class="paragraph">
<p>In a DPoS system, each account that has an adequate enough balance to send a <a href="protocol/transactions.html#delegate" class="page">register delegate transaction</a> can register a new delegate on the network.
Other accounts can <a href="#vote">vote for delegates</a> to support them with their stake.
As a reward for securing the network, the forging delegates receive the <a href="protocol/blocks.html#rewards_and_fees" class="page">transaction fees and block rewards</a> of the forged blocks, and the transactions included in the forged blocks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The chosen delegate name has to be unique in the network.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example: Creating a delegate registration transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const tx = await APIClient.transaction.create({
    moduleID: 5,
    assetID: 0,
    fee: 1100000000,
    asset: {
        username: 'lightcurve',
    },
}, passphrase);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="vote"><a class="anchor" href="#vote"></a>Voting for a delegate</h3>
<div class="paragraph">
<p>Accounts can vote for delegates by sending a <a href="protocol/transactions.html#vote" class="page">delegate vote transaction</a>.
The tokens used to vote for delegates will be locked.
The locked tokens can be unlocked again if required, by <a href="#unvote">unvoting</a> the delegate again.</p>
</div>
<div class="paragraph">
<p>For instance, lets assume you hold an account with a balance of 100 tokens.</p>
</div>
<div class="paragraph">
<p>You could use only a part of your tokens for voting, but let&#8217;s assume you want to vote with all 100.
It is of course possible to split your tokens among multiple delegates, or to use all of them to vote for only one delegate.
For example you could use it to vote for 10 delegates with 10 tokens, or alternatively just on one delegate with the full 100 tokens.</p>
</div>
<div class="paragraph">
<p>In the example below we decide to vote for one delegate with 70 tokens, and for another one with 30 tokens.</p>
</div>
<div class="listingblock">
<div class="title">Example: Vote for two delegates</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const tx = await APIClient.transaction.create({
    moduleID: 5,
    assetID: 1,
    fee: 10000000,
    asset: {
        votes: [
            { delegateAddress:'11750255083444888021L', amount: '7000000000'}, <i class="conum" data-value="1"></i><b>(1)</b>
            { delegateAddress:'64373847834494888026L', amount: '3000000000'} <i class="conum" data-value="2"></i><b>(2)</b>
        ]
    },
}, passphrase);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Locks 70 tokens and adds 70 tokens delegate weight to the delegate with address <code>11750255083444888021L</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Locks 30 tokens and adds 30 tokens delegate weight to the delegate with address <code>64373847834494888026L</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="unlock"><a class="anchor" href="#unlock"></a>Unvoting delegates and unlocking of tokens</h3>
<div class="paragraph">
<p>The amount of tokens used for voting is locked and cannot be used for any other transactions.
This includes but is not limited to further voting, balance transfers or transaction fees.</p>
</div>
<div class="paragraph">
<p>To use the locked tokens again, the account has to submit a <a href="protocol/transactions.html#vote" class="page">delegate vote transaction</a>, with a <strong>negative amount</strong> (also called “unvote”).
This will start the unlocking procedure and the LSK will be ready for unlocking 2000 blocks later, (approximately 5 hours and 30 minutes).</p>
</div>
<div class="paragraph">
<p>To recover the locked tokens, the account has to submit two transactions:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, the tokens have to be unvoted.
This is done with a new <code>VoteTransaction</code>, the transaction just needs to contain a negative amount.
The tokens are now in an “unlocking” state.
They have been unvoted but are not usable yet.</p>
<div class="listingblock">
<div class="title">Example: Unvote a delegate</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const tx = await APIClient.transaction.create({
    moduleID: 5,
    assetID: 1,
    fee: 10000000,
    asset: {
        votes: [
            { delegateAddress:'64373847834494888026L', amount: '-1500000000'} // 15 tokens can be unlocked in 2000 blocks
        ]
    },
}, passphrase);</code></pre>
</div>
</div>
</li>
<li>
<p>After a 2000 block period, the tokens can be unlocked.
This is done with a new <code>UnlockTransaction</code>.
The <a href="protocol/transactions.html#unlock" class="page">token unlock transaction</a> specifies which tokens have to be unlocked and added back to the balance.
This mechanism is necessary to allow blocks to be reverted.
Future improvements of the Lisk blockchain (particularly on the database level), could render this unlock transaction unnecessary.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const tx = await APIClient.transaction.create({
    moduleID: 5,
    assetID: 3,
    fee: 10000000,
    asset: {
        unlockingObjects:[
            { delegateAddress:'64373847834494888026L', amount: '1500000000', unvoteHeight: '1234' }
        ]
    },
}, passphrase);</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">A token unlock transaction can contain multiple unlock objects</div>
This allows an account to submit multiple delegate votes and recover those tokens with a single unlock transaction.
Of course, all tokens must have been in the unlocking state for at least 2000 blocks for the unlock to be valid.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="bft"><a class="anchor" href="#bft"></a>BFT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Byzantine Fault Tolerance <a href="references/glossary.html#bft-byzantine-fault-tolerance" class="page">(BFT)</a> algorithm ensures that the network can reach consensus about the current state of the blockchain.
This means that for a given height, eventually all Lisk nodes agree on the same block.
This is particularly important in the case where there are different valid blocks for the same height, which can occur due to network delays or delegates forging multiple blocks in their designated time slot.</p>
</div>
<div class="paragraph">
<p>Additionally, delegates can be punished by anyone in the network if they forge contradicting blocks, i.e., two blocks with consensus votes that violate the Lisk-BFT protocol (see the <a href="protocol/consensus-algorithm.html#punishment" class="page">Lisk protocol documentation</a> for details).
In order to avoid that a delegate is punished, a node operator has to take great care when enabling forging on a node.
This means that it is very important to adhere to the following points below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Never activate forging on more than one node.
Otherwise, the delegate may be punished due to double-forge, i.e., producing two contradicting blocks for the same time slot.</p>
</li>
<li>
<p>Never activate forging without porting over the <code>forger_info</code> data
.
Otherwise, the <code>maxHeightPreviouslyForged</code> property of the forged blocks may be outdated, which can cause the delegate to forge contradicting blocks.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="discover"><a class="anchor" href="#discover"></a>How to discover misbehavior of a delegate</h3>
<div class="paragraph">
<p>Any misbehavior of a delegate is indicated by two contradicting block headers signed by the delegate.
A misbehavior can therefore be reported by providing the two contradicting block headers.
The code below checks if two contradicting block headers exist.</p>
</div>
<div class="listingblock">
<div class="title">Detecting Contradicting Block Headers</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">function checkHeadersContradicting(blockHeader1,blockHeader2) {
   // Order the two block headers such that b1 must be forged first
   let b1=blockHeader1;
   let b2=blockHeader2;
   if(b1.maxHeightPreviouslyForged&gt;b2.maxHeightPreviouslyForged ||
     (b1.maxHeightPreviouslyForged==b2.maxHeightPreviouslyForged &amp;&amp; b1.maxHeightPrevoted&gt;b2.maxHeightPrevoted) ||
     (b1.maxHeightPreviouslyForged==b2.maxHeightPreviouslyForged &amp;&amp; b1.maxHeightPrevoted==b2.maxHeightPrevoted &amp;&amp; b1.height&gt;b2.height)){
      b1=blockHeader2;
      b2=blockHeader1;
   }

   // The order of cases is essential here
   if(b1.delegatePubKey!=b2.delegatePubKey) {
      // Blocks by different delegates are never contradicting
      return false;
   } else if(b1.blockID==b2.blockID) {
      // No contradiction, as block headers are the same
      return false;
   } else if (b1.maxHeightPrevoted==b2.maxHeightPrevoted &amp;&amp;  b1.height&gt;=b2.height) {
      // Violation of the fork choice rule as delegate moved to different chain
      // without strictly larger maxHeightPrevoted or larger height as justification.
      // This in particular happens, if a delegate is double forging.
      return true;
   } else if(b1.height&gt;b2.maxHeightPreviouslyForged) {
      // Violates disjointness condition
      return true;
   } else if(b1.maxHeightPrevoted&gt;b2.maxHeightPrevoted) {
      // Violates that delegate chooses branch with largest maxHeightPrevoted
      return true;
   } else {
      // No contradiction between block headers
      return false;
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(Source: <a href="https://github.com/LiskHQ/lips/blob/master/proposals/lip-0014.md#detecting-contradicting-block-headers" target="_blank" rel="noopener">LIP 14</a>)</p>
</div>
</div>
<div class="sect2">
<h3 id="reporting-a-delegate"><a class="anchor" href="#reporting-a-delegate"></a>Reporting a delegate</h3>
<div class="paragraph">
<p>A <a href="protocol/transactions.html#pom" class="page">delegate misbehavior report</a> transaction can be issued by anyone in the network who observes a violation of the Lisk-BFT consensus algorithm, as explained in <a href="#discover">How to discover misbehavior of a delegate</a>.</p>
</div>
<div class="listingblock">
<div class="title">Reporting delegate misbehavior</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const tx = await APIClient.transaction.create({
    moduleID: 5,
    assetID: 3,
    fee: 10000000,
    asset:{
        header1: {
            blockSignature: 'e8b4768a7805bdcef097458e52b4acc5aed9816032504a57a0ae14ede0054bd916ddc0ff93a4baac91048930afde72f0e89a9fd5b07bd98620e3d5558b34b005',
            generatorPublicKey: '7a7f24c061db6a92320ba14323f814c20dbcc811a931ead3ca63c75a4de1b643',
            height: 8938,
            maxHeightPreviouslyForged: 8788,
            maxHeightPrevoted: 8868,
            numberOfTransactions: 0,
            payloadHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
            payloadLength: 0,
            previousBlockId: '9326981395427095175',
            reward: '500000000',
            seedReveal: 'abe2a66d7a35fd7b580e977d9f7911ae',
            timestamp: 122329567,
            totalAmount: '0',
            totalFee: '0',
            version: 2
        },
        header2: {
            blockSignature: '31ccf4ce1a3a224a2a32c3f4bdc6fad0ddb8feb45b05b7d411eee1a608f9d91284d09c727bba173c882d5dc90cb951c5affc10462d650031a627e00d919cbf08',
            generatorPublicKey: '7a7f24c061db6a92320ba14323f814c20dbcc811a931ead3ca63c75a4de1b643',
            height: 8933,
            maxHeightPreviouslyForged: 8788,
            maxHeightPrevoted: 8868,
            numberOfTransactions: 0,
            payloadHash: 'e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855',
            payloadLength: 0,
            previousBlockId: '9326981395427095175',
            reward: '500000000',
            seedReveal: 'abe2a66d7a35fd7b580e977d9f7911ae',
            timestamp: 122329567,
            totalAmount: '0',
            totalFee: '0',
            version: 2
        }
    },
}, passphrase);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="punishment_consequences"><a class="anchor" href="#punishment_consequences"></a>Consequences for punished delegates and their voters</h3>
<div class="paragraph">
<p>If a valid delegate misbehavior report is posted to the network, the respective delegate will face the following consequences:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Setting the delegate weight to 0 for the next 780,000 blocks (approximately 3 months).</p>
</li>
<li>
<p>The unlocking period for self-votes is increased from 260,000 blocks to 780,000 blocks (from approximately 1 month to 3 months).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Voters of the respective delegate will receive the following punishment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The unlocking period for the votes for the punished delegate is increased from 2,000 blocks to 260,000 blocks (from approximately 5 hours to 1 month).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
    <div class="bottom-links">
    <div>
      <a class="bottom-link" href="/documentation/lisk-sdk/keys-module.html"><i class="icofont-double-left icofont-3x"></i>Keys module
    </a>
    </div><div>
      <a class="bottom-link" href="/documentation/lisk-sdk/references/lisk-framework/http-api-plugin.html">HTTP API plugin<i class="icofont-double-right icofont-3x"></i>
      </a>
    </div>
  </div>






<!--{]> pagination}}-->
</article>
<aside class="article-aside hidden" role="navigation">
</aside>


<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
  </div>
</main>
  </div>
</div>
<footer class="footer">
    <div class="footer__container">
        <div class="footer__copyright">
            <div class="institutional-links-2">
                <span class="institutional-links-2__item">© 2021 Lisk Foundation</span>
              <ul class="footer-links">
                <li><a class="institutional-links-2__item" href="https://lisk.io/terms-conditions" class="institutional-links-2-item">Terms & Conditions</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/privacy" class="institutional-links-2-item">Privacy Policy</a></li>
                <li><a class="institutional-links-2__item" href="https://lisk.io/contact" class="institutional-links-2-item">Contact</a></li>
              </ul>
            </div>
            <p class="footer__copyright-text">Lisk is a foundation registered in Zug, Switzerland
            </p>
        </div>
        <div class="footer__logo-container">
            <img src="../_/img/lisk-logo-light.svg" class="footer__lisk-logo"/>
        </div>
        <div class="community-section">
            <p class="community-section__text">Follow Lisk on: </p>
            <div class="community-section__icons">
                <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer__icon icon-github"></a>
                <a href="https://twitter.com/LiskHQ" title="Twitter" target="_blank" class="footer__icon icon-twitter"></a>
                <a href="https://lisk.chat" title="Discord" target="_blank" class="footer__icon icon-discord"></a>
                <a href="https://www.reddit.com/r/Lisk/" title="Reddit" target="_blank" class="footer__icon icon-reddit"></a>
                <a href="https://www.facebook.com/LiskHQ" title="Facebook" target="_blank" class="footer__icon icon-facebook"></a>
            </div>
        </div>
    </div>
</footer>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../_/js/vendor/top-versions.js"></script>
<script async src="../_/js/vendor/custom.js"></script>
  <script src="../_/js/vendor/docsearch.min.js"></script>
  <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
  <script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>

  </body>
</html>
