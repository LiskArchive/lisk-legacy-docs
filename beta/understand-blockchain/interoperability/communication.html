<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cross-chain communication :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/beta/understand-blockchain/interoperability/communication.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="sidechain-registration-and-recovery.html">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../../../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../../../_/css/dark-site.css">

<script>var uiRootPath = '../../../_'</script>
<script src="../../../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../.." class="lisk-logo"></a>
        <a href="../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../../index.html">Lisk Documentation</a>
        <a class="component" href="../../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">beta</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../../index.html">default</a>
    <a class="version is-current" href="communication.html">beta</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../../../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk Documentation</a></li>
    <li><a href="../index.html">Understand Lisk Blockchain</a></li>
    <li><a href="index.html">Lisk Interoperability</a></li>
    <li><a href="communication.html">Cross-chain communication</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1497-blockchain-interoperability-page-in-lisk-docs/docs/modules/ROOT/pages/understand-blockchain/interoperability/communication.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="ROOT" data-version="beta">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/blockchain-scalability.html">Blockchain Scalability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/lisk-products.html">Lisk products</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/blockchain-interoperability.html">Blockchain Interoperability</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Understand Lisk Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../state-machine.html">State machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../consensus/index.html">Consensus protocols</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/pos-poa.html">Proof of Stake (PoS) &amp; Proof of Authority (PoA) in Lisk</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../mainchain.html">Mainchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Lisk Interoperability</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="communication.html">Cross-chain communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../blocks-txs.html">Blocks and Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sdk/modules-commands.html">Modules and Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sdk/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sdk/rpc.html">Communicating to a Lisk node via RPC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../sdk/codec-schema.html">Schemas &amp; Codec</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../build-blockchain/index.html">Build Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-blockchain-client.html">Creating a new blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/configuration.html">Blockchain client configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../build-blockchain/module/index.html">How to create a module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/configuration.html">1. How to create a module configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/stores.html">2. How to create stores</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/command.html">3. How to create a command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/endpoints-methods.html">4. How to create endpoints and methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/blockchain-event.html">5. How to create a blockchain event</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../build-blockchain/plugin/index.html">How to create a plugin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/schema-types.html">1. Defining off-chain data structures</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/offchain-db.html">2. Setting up an Off-chain database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/configuring-plugin.html">3. Configuring a Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/plugin-class.html">4. Updating the Plugin Class</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/plugin/plugin-endpoints.html">5. Creating an endpoint &amp; Testing the plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/using-dashboard.html">Using the Dashboard with a blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/enable-faucet.html">How to enable a Faucet for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/register-sidechain.html">How to register a sidechain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../build-blockchain/interoperable-module/index.html">How to implement cross-chain communication</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/interoperable-module/create-ccm.html">How to create a CCM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/interoperable-module/execute-ccm.html">How to execute a CCM</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../run-blockchain/index.html">Run Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/process-management.html">Process management with PM2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/become-a-validator.html">How to become a validator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/staking.html">How to stake and un-stake tokens</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/enable-block-generation.html">How to enable/disable block generation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/reward-sharing.html">How to share block rewards</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/setup-relayer.html">Setting up a relayer node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/blockchain-reset.html">Resetting and snapshotting the blockchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/enabling-misbehavior-report.html">How to enable the "Report Misbehavior" plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../integrate-blockchain/index.html">Integrate Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/connecting-endpoints.html">Connecting via endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/subscribing-to-events.html">Retrieving on-chain events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transaction creation, signing, and posting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/create-sign-transactions.html">How to create and sign a transaction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/multisignature-accounts-and-transactions.html">How to create multi-signature accounts and transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/create-multiSig-tx-offline.html">Creating and signing a multi-signature transaction (Offline)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/calculating-min-fee.html">How to calculate the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/posting-transactions.html">How to post a transaction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/overwriting-transactions.html">How to overwrite a transaction in the transaction pool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/index.html">Integrating a user interface</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/create-get-account.html">1. Handling accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/faucet-transfer.html">2. Using faucet and transferring tokens</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../integrate-blockchain/integrate-ui/send-get-hello.html">3. Sending and retrieving hello</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrate-blockchain/aggregate-blockchain-data/index.html">Aggregate blockchain data with Lisk Service</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Module RPC APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/auth-endpoints.html">Auth module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/dynamic-reward-endpoints.html">Dynamic Reward module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/fee-endpoints.html">Fee module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/interoperability-endpoints.html">Sidechain Interoperability module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/mainchain-interoperability-endpoints.html">Mainchain Interoperability module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/token-endpoints.html">Token module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/validators-endpoints.html">Validators module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/random-endpoints.html">Random module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/module-rpc-api/pos-endpoints.html">Proof of Stake module: Endpoint reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin RPC APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/plugin-rpc-api/chain-connector-api.html">Chain Connector plugin: Endpoint reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Service APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-rpc.html">RPC API of Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-http.html">HTTP API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-pubsub.html">Publish/Subscribe API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../api/lisk-service-api-migration.html">Lisk Service API v2 vs v3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../lisk-sdk/v6/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../../lisk-core/v4/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">beta</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-core/index.html">3.1.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-core/v4/index.html">4.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">default</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-service/index.html">0.6.6 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-service/0.7/index.html">0.7 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Cross-chain communication</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>On this page, we dive deeper into how cross-chain communication works in the Lisk ecosystem, by describing the different components and the general processes of how state changes are executed across chains in the Lisk ecosystem.</p>
</div>
<div class="paragraph">
<p>Specifically, you&#8217;ll learn about:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> What are cross-chain messages (CCMs)?</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> What are cross-chain updates (CCUs)?</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> When a cross-chain transaction is submitted, what are the exact steps involved, to induce the corresponding state changes on the receiving chain?</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> What happens, if a CCM cannot be transmitted/executed successfully?</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#inducing-state-changes-across-chains-with-ccms">Inducing state changes across chains with CCMs</a></li>
<li><a href="#sending-cross-chain-transactions-to-generate-ccms">1. Sending cross-chain transactions to generate CCMs</a></li>
<li><a href="#relaying-ccms-in-a-ccu">2. Relaying CCMs in a CCU</a>
<ul class="sectlevel2">
<li><a href="#creating-and-posting-ccus">2.1. Creating and Posting CCUs</a></li>
<li><a href="#sidechain-to-mainchain">2.2. Sidechain to mainchain</a></li>
<li><a href="#mainchain-to-sidechain">2.3. Mainchain to sidechain</a></li>
</ul>
</li>
<li><a href="#executing-the-cross-chain-command-on-the-receiving-chain">3. Executing the cross-chain command on the receiving chain</a></li>
<li><a href="#error-handling">Error handling</a>
<ul class="sectlevel2">
<li><a href="#ccm-validation-in-the-mainchain">CCM validation in the Mainchain</a></li>
<li><a href="#ccm-validation-in-the-receiving-chain">CCM validation in the receiving chain</a></li>
</ul>
</li>
<li><a href="#complete-cross-chain-communication-flow">Complete cross-chain-communication flow</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="inducing-state-changes-across-chains-with-ccms"><a class="anchor" href="#inducing-state-changes-across-chains-with-ccms"></a>Inducing state changes across chains with CCMs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cross-chain messages, or CCMs, are the central component of the cross-chain communication between sidechains, and between mainchain and sidechains.</p>
</div>
<div class="paragraph">
<p>Similar to a normal transaction, a CCM includes a reference to a command that triggers state mutations.
However, in the case of a CCM, a cross-chain command is specifically used here, which triggers state changes on another chain, aka the receiving chain.</p>
</div>
<div class="videoblock text-center">
<div class="title">Deep Dive into Cross Chain Messages</div>
<div class="content">
<iframe width="100%" height="400" src="https://www.youtube.com/embed/x4e2po-10wk?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>A <strong>Cross-chain message (CCM)</strong> is the envelope for a cross-chain command.</p>
</div>
<div class="paragraph">
<p><strong>Cross-chain commands</strong>, or <strong>CC-commands</strong>, induce a state transition in the receiving chain.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A CCM includes the following properties:</p>
</div>
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccm.png" alt="ccm" width="300"></span></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sending chain ID</dt>
<dd>
<p>Used to identify the chain sending the cross-chain message.
The sending chain ID is used, for example, if the message triggers an error and has to be sent back.</p>
</dd>
<dt class="hdlist1">receiving chain ID</dt>
<dd>
<p>Used to identify the chain receiving the cross-chain message.
On the mainchain, the receiving chain ID is read to route the message to the corresponding chain outbox.</p>
</dd>
<dt class="hdlist1">module &amp; cross-chain command name</dt>
<dd>
<p>Once the message has reached the receiving chain, the two properties <code>module</code> and <code>crossChainCommand</code> specify which logic should be used to validate and execute the message on the receiving chain.
The module always corresponds to the module which includes the specified cross-chain command.</p>
</dd>
<dt class="hdlist1">nonce</dt>
<dd>
<p>When a cross-chain message is created and added to the partner chain outbox, the nonce of the sending chain (total number of messages that were added to outboxes so far), is added to the message in the nonce property.
This allows all messages to be uniquely identified by the (sendingChainID, receivingChainID, nonce, status) tuple, which implies that the message ID defined below will be unique for all messages in the ecosystem.
The uniqueness of messages in the Lisk ecosystem is important for identifying messages with message IDs and tracking them throughout the ecosystem.</p>
</dd>
<dt class="hdlist1">fee</dt>
<dd>
<p>For all cross-chain messages, the message fee is used to account for the transaction processing in the receiving chain.
This fee must be transferred from the sending chain account to the receiving chain account in order to maintain the correct balances on all chains in the ecosystem.
The token ID for this fee is stored in the channel account and is by default the token ID of the LSK token.
As it is stored in the channel account, it does not need to be repeated in the message.
Being the main utility token of the Lisk ecosystem, the LSK token is always the token ID for this fee for the channels between the Lisk mainchain and registered sidechains.</p>
</dd>
<dt class="hdlist1">parameters</dt>
<dd>
<p>The <code>params</code> property of the messages is defined by each module and can follow any schema, similar to the <code>params</code> property of a transaction.
The <code>params</code> property is not deserialized or validated by the Interoperability module.
In the Lisk ecosystem, all cross-chain messages are routed through the mainchain.
This means that messages should always have a sufficiently small size in order to be easily included in mainchain blocks.
As the mainchain payload size limit is 15 KiB, and other properties in the cross-chain updates will not be larger than 4 KiB, the message size is limited to 10 KiB.
To guarantee that all messages can be included and handled, blockchains in the Lisk ecosystem should have a payload size limit equal to or greater than 15 KiB (15 x 1024 bytes).</p>
</dd>
<dt class="hdlist1">status</dt>
<dd>
<p>The basic error handling for routing messages to other chains is done by the mainchain.
Information about the reason why the message failed is stored in the status property.
For example, in the case the receiving chain does not exist, is not active or has been terminated, the mainchain will return the message to the sending chain.
The sending chain can then revert the message and potentially refund users.
To allow for future updates or improvements of the Interoperability module, other modules are restricted from using status codes up to 63 (included).
Other modules may use other status codes larger or equal to 64.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sending-cross-chain-transactions-to-generate-ccms"><a class="anchor" href="#sending-cross-chain-transactions-to-generate-ccms"></a>1. Sending cross-chain transactions to generate CCMs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s look at an example of a simple cross-chain transfer between Alice and Bob.</p>
</div>
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-1.png" alt="ccc 1" width="300"></span></p>
</div>
<div class="paragraph">
<p>Alice has 10 LSK in her account on a chain called "Sidechain X".
In this context, we refer to Sidechain X as the sending chain.</p>
</div>
<div class="paragraph">
<p>She wants to transfer 5 LSK to Bob, who has an account on another chain, "Sidechain Y", in this context the receiving chain.</p>
</div>
<div class="paragraph">
<p>Here is where <strong>cross-chain transactions (CCTs)</strong> come into play.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A cross-chain transaction (CCT) is a transaction that, upon its execution, creates one or more cross-chain messages.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A cross-chain transaction will perform the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>execute the necessary changes on the sending chain (i.e. removing 5 LSK from Alice&#8217;s balance), and</p>
</li>
<li>
<p>also create CCMs to trigger the corresponding state changes in the receiving chain (i.e. add 5 LSK to Bob&#8217;s balance).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore, to initiate the cross-chain token transfer, Alice sends a corresponding cross-chain transfer transaction on the sending chain X.</p>
</div>
<div class="paragraph">
<p>In the example, the CC-transfer will deduct 5 LSK from Alice&#8217;s balance once the transaction is included in a block.
At the same time, it will create the corresponding cross-chain message, and add it to the outbox of the sending chain.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="relaying-ccms-in-a-ccu"><a class="anchor" href="#relaying-ccms-in-a-ccu"></a>2. Relaying CCMs in a CCU</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Several cross-chain messages are collected together and posted to another chain as part of the cross-chain update transaction, aka CCU.</p>
</div>
<div class="videoblock text-center">
<div class="title">Deep Dive into Cross-Chain Update Transactions</div>
<div class="content">
<iframe width="100%" height="400" src="https://www.youtube.com/embed/LL9YrIiLXvc?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>A CCU contains the following properties:</p>
</div>
<div class="imageblock right">
<div class="content">
<img src="../../_images/understand-blockchain/interop/ccu.png" alt="ccu" width="300">
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">sending chain ID</dt>
<dd>
<p>Identifies the chain sending the cross-chain update.
Only cross-chain update transactions coming from registered chains are valid, registered chains are the ones with an entry in the interoperability store corresponding to their <code>chainID</code>.</p>
</dd>
<dt class="hdlist1">active validators update</dt>
<dd>
<p>The chain account stores an array containing the BLS keys and BFT weights required to validate the certificate signature.
This array has to be updated if the set of active validators changes in the chain sending the CCU.
The difference between the stored array and the new one is included in this property.</p>
</dd>
<dt class="hdlist1">certificate</dt>
<dd>
<p>Authenticates the data sent in the CCU.
It contains an aggregate signature of a set of the current validators of the sending chain.
Anyone can obtain the full certificate from the blockchain by obtaining the corresponding block header, computing the unsigned certificate, and then obtaining the <code>aggregateCommit</code> once the block is finalized.</p>
</dd>
<dt class="hdlist1">certificate threshold</dt>
<dd>
<p>The threshold of block generators in terms of BFT weight required to validate the certificate signature.
This certificate threshold has to be updated if its value changes in the chain sending the certificate.
In that case, the updated value is set in the <code>certificateThreshold</code> property of the CCU.
If <code>certificateThreshold</code> is set to <code>0</code>, it implies that the certificate threshold has not been changed in the sending chain.</p>
</dd>
<dt class="hdlist1">inboxUpdate</dt>
<dd>
<p>The <code>inboxUpdate</code> contains the information relative to the messages to be included in the sending chain inbox.
Cross-chain messages are stored in the chain outbox on the sending chain and in the corresponding inbox on the receiving chain.
This property contains the following three elements:</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>crossChainMessages</code>:
An array of cross-chain messages.
The <code>crossChainMessages</code> property must contain consecutive messages from the outbox.</p>
</li>
<li>
<p><code>messageWitnessHashes</code>:
In the sending chain, all cross-chain messages are added to a Regular Merkle Tree attested by the outbox root.
The <code>messageWitnessHashes</code> are the sibling hashes necessary for the Merkle proof.
This Merkle proof is required if not all messages necessary to recompute the outbox root were given in <code>crossChainMessages</code>.
If all messages required to compute the outbox root are included in <code>crossChainMessages</code> then <code>messageWitnessHashes</code> can be left empty.</p>
</li>
<li>
<p><code>outboxRootWitness</code>:
An inclusion witness of this outbox root into the state root.
The outbox root of the sending chain is part of a Sparse Merkle Tree attested by the state root (provided in the certificate).
The <code>outboxRootWitness</code> property is an inclusion proof into the state root of the outbox root.
The outbox root itself can be computed from the receiving chain inbox, <code>crossChainMessages</code> and <code>messageWitnessHashes</code>.
If the cross-chain update transaction contains an empty certificate, this property can also be left empty, as the required root was already attested in a previous cross-chain update.</p>
</li>
</ol>
</div>
</dd>
</dl>
</div>
<div class="sect2">
<h3 id="creating-and-posting-ccus"><a class="anchor" href="#creating-and-posting-ccus"></a>2.1. Creating and Posting CCUs</h3>
<div class="paragraph">
<p>To create a valid CCU, it is necessary to collect existing CCMs in the outbox, and certify their validity with a corresponding certificate.</p>
</div>
<div class="paragraph">
<p>The Lisk consensus mechanism is designed to create and publish certificates regularly.
Therefore, obtaining the information required to post a cross-chain update transaction is straightforward, and can be performed by anyone, simply by setting up a relayer node.</p>
</div>
<div class="paragraph">
<p>The following is an example workflow that a relayer for a given sidechain could follow, to create a valid CCU:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Setup to gather the required mainchain information:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run a mainchain node.</p>
</li>
<li>
<p>Maintain a list of all CCMs included in the sidechain outbox.
For each height where a CCM was included in the outbox, also save the inclusion witness of the outbox into the state root.
All CCMs and witnesses for heights that have been certified on the sidechain can be discarded.</p>
</li>
<li>
<p>Maintain a history of all validator changes on the mainchain for rounds that have not yet been certified on the sidechain.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a cross-chain update transaction for a given height <code>h1</code>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Find a signed certificate in the mainchain block headers for a height (say <code>h2</code>) higher or equal to <code>h1</code>.
This will be used as the <code>certificate</code> property of the transaction.</p>
</li>
<li>
<p>The property <code>inboxUpdate.crossChainMessages</code> lists all CCMs that have been included in the sidechain outbox up to <code>h2</code> (and which have not been included on the sidechain yet).
In this case, the <code>messageWitness</code> will be empty.</p>
</li>
<li>
<p>Compute the inclusion proof for the outbox root of the sidechain account into the mainchain state root.
This proof is then used to compute <code>inboxUpdate.outboxRootWitness</code>.</p>
</li>
<li>
<p>Compute the required update to the active validators stored in the chain account and the validators that were used to create <code>certificate.validatorsHash</code>.</p>
</li>
<li>
<p>If the certificateThreshold used to create <code>certificate.validatorsHash</code> is different from the one stored in the chain account, include the new value in the <code>certificateThreshold</code> property.</p>
</li>
<li>
<p>Post the cross-chain update transaction on the sidechain.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="sidechain-to-mainchain"><a class="anchor" href="#sidechain-to-mainchain"></a>2.2. Sidechain to mainchain</h3>
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-2.png" alt="ccc 2" width="300"></span></p>
</div>
<div class="paragraph">
<p>After the CCM has been created in the step <a href="#sending-cross-chain-transactions-to-generate-ccms">Sending cross-chain transactions to generate CCMs</a>, it is added to the outbox of the sending chain X.</p>
</div>
<div class="paragraph">
<p>From the outbox, a <strong>relayer</strong> collects the CCMs and creates a CCU with the properties described in the step <a href="#relaying-ccms-in-a-ccu">Relaying CCMs in a CCU</a>.</p>
</div>
<div class="paragraph">
<p>A <strong>relayer</strong> is a blockchain node that collects CCMs in a CCU and, as the name suggests, relays them cross-chain.</p>
</div>
<div class="paragraph">
<p>The role of relayer is totally symmetric for relaying information from a sidechain to the mainchain.</p>
</div>
<div class="paragraph">
<p>When the relayer posts a CCU, the included CCMs will be added to the inbox of the mainchain, and processed further from there.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because all information to create CCUs is publicly available, anyone can assume the role of a relayer in the network, and create and post CCUs to other chains.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="mainchain-to-sidechain"><a class="anchor" href="#mainchain-to-sidechain"></a>2.3. Mainchain to sidechain</h3>
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-3.png" alt="ccc 3" width="300"></span></p>
</div>
<div class="paragraph">
<p>After the CCM is included in the inbox of the mainchain in the step <a href="#sidechain-to-mainchain">Sidechain to mainchain</a>, the mainchain performs the most important validations on the CCM.</p>
</div>
<div class="paragraph">
<p>If the validation on the mainchain is passed successfully, the CCM is added to the outbox of the mainchain, ready to be picked up by a relayer.</p>
</div>
<div class="paragraph">
<p>A relayer on the mainchain will include the CCM in a CCU and post it to the sending chain.</p>
</div>
<div class="paragraph">
<p>Relayers should post cross-chain update transactions on the sidechain when the need for it arises.
This can be either because some CCMs have been included in the outbox and need to be relayed, or when the mainchain validators changes require the channel to be updated on the sidechain.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="executing-the-cross-chain-command-on-the-receiving-chain"><a class="anchor" href="#executing-the-cross-chain-command-on-the-receiving-chain"></a>3. Executing the cross-chain command on the receiving chain</h2>
<div class="sectionbody">
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-4.png" alt="ccc 4" width="300"></span></p>
</div>
<div class="paragraph">
<p>Once the CCM is included in the inbox on the receiving chain Y, the remaining validations of the CCM are performed.</p>
</div>
<div class="paragraph">
<p>If the validation is completed successfully, the cross-chain command is performing the intended state changes on the receiving chain, i.e. adding 5 LSK to Bob&#8217;s account.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="error-handling"><a class="anchor" href="#error-handling"></a>Error handling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are multiple possible errors which can happen during cross-chain communication.</p>
</div>
<div class="paragraph">
<p>To ensure that only intended state changes are performed on the receiving chain, the CCM is validated at several stages of the cross-chain communication.</p>
</div>
<div class="paragraph">
<p>If a validation of the CCM fails, the <code>status</code> property of the CCM is updated with the corresponding error code, and the error handling takes care that the CCM is not executed, and all unintended state changes are reverted.</p>
</div>
<div class="paragraph">
<p>This design choice allows sidechains to send messages to other chains without the need to monitor the status (or even existence), of every other chain.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. CCM status codes</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 12.5%;">
<col style="width: 12.5%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">OK</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default status of a cross-chain message.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CHANNEL UNAVAILABLE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status assigned on the mainchain if the receiving chain is not available (it does not exist, it is not active, or it has been terminated).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MODULE NOT SUPPORTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status assigned on the receiving chain if it does not implement any module with the name equal to the <code>module</code> property of the CCM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CROSS CHAIN COMMAND NOT SUPPORTED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status assigned on the receiving chain if it does not implement any command with the name equal to the <code>crossChainCommand</code> property of the CCM.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CCM EXECUTION FAILED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">uint32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status assigned on the receiving chain to a cross-chain message when the cross-chain command execution failed.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The status code provides crucial information to the blockchain application on how to process/forward a CCM.</p>
</div>
<div class="paragraph">
<p>Mainchain and receiving chain each perform different validity checks on the CCM, and in turn each add their specific status codes to a CCM, if the validation failed.</p>
</div>
<div class="sect2">
<h3 id="ccm-validation-in-the-mainchain"><a class="anchor" href="#ccm-validation-in-the-mainchain"></a>CCM validation in the Mainchain</h3>
<div class="openblock float-group">
<div class="content">
<div class="paragraph">
<p><span class="image right"><img src="../../_images/understand-blockchain/interop/ccc-2b.png" alt="ccc 2b" width="300"></span></p>
</div>
<div class="paragraph">
<p>When a CCU is relayed from a sending chain to the mainchain, the mainchain checks for all CCMs in the inbox update, if the following criteria are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the receiving chain exists.</p>
</li>
<li>
<p>the receiving chain has the status <code>active</code>.</p>
</li>
<li>
<p><code>sendingchain-ID</code> of the CCM equals the chain ID of the sending chain.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the validation fails, the <code>status</code> of the CCM is updated by the mainchain with the corresponding error code.</p>
</div>
<div class="paragraph">
<p>If the status is NOT OK, the CCM will NOT be forwarded to the receiving chain.
Instead, the CCM is added to the outbox of the sending chain, i.e., it will eventually be included in a new CCU and posted <strong>back to the sending chain.</strong></p>
</div>
<div class="paragraph">
<p>The sending chain may then revert the state changes related to the CCM that happened on the sending chain.</p>
</div>
<div class="paragraph">
<p>For example, if Alice on Sidechain X sends 5 LSK to Bob on Sidechain Y, but Sidechain Y is not registered on the mainchain, the error handling process would function as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Alice sends CC-Transfer: 5 LSK + Fee is deducted from Alice&#8217;s balance on Sidechain X.</p>
</li>
<li>
<p>Mainchain receives corresponding CCM &amp; performs validations.</p>
</li>
<li>
<p>Mainchain cannot find the receiving chain: CCM status is updated to <code>CHANNEL UNAVAILABLE</code> on the mainchain.</p>
</li>
<li>
<p>Errored CCM is relayed back to the sending chain.</p>
</li>
<li>
<p>Sending chain undoes related state changes: 5 LSK are added back to Alice&#8217;s account, because the cross-chain transfer was unsuccessful.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Alice always needs to pay the fee for the cross-chain transfer, even if it fails.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ccm-validation-in-the-receiving-chain"><a class="anchor" href="#ccm-validation-in-the-receiving-chain"></a>CCM validation in the receiving chain</h3>
<div class="openblock float-group">
<div class="content">
<div class="paragraph right">
<p><span class="image"><img src="../../_images/understand-blockchain/interop/ccc-3b.png" alt="ccc 3b" width="300"></span></p>
</div>
<div class="paragraph">
<p>When a CCU is relayed from the mainchain to the receiving chain, the receiving chain checks for all CCMs in the inbox update, if the following criteria are met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the receiving application understands the particular command, i.e. it includes the required module to interpret the command name.</p>
</li>
<li>
<p>the CCM includes all parameters required for the CC-command.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the validation fails the <code>status</code> of the CCM is updated by the receiving chain with the corresponding error code.</p>
</div>
<div class="paragraph">
<p>If the status is NOT OK, the state changes of the CCM will NOT be performed on the receiving chain.
Instead, the CCM will be added to the outbox of the mainchain on the receiving chain.
Thus, the CCM will eventually be included in a new CCU and posted <strong>back to the mainchain</strong>, and from there to the sending chain.</p>
</div>
<div class="paragraph">
<p>Once the CCM is added to the inbox of the sending chain, it may then revert the invalid state changes.</p>
</div>
<div class="paragraph">
<p>For example, if Alice on Sidechain X sends 5 LSK to Bob on Sidechain Y, but Sidechain Y does not support the token module, the error handling process would function as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Alice sends CC-Transfer: 5 LSK + Fee is deducted from Alice&#8217;s balance on Sidechain X.</p>
</li>
<li>
<p>Mainchain receives corresponding CCM &amp; performs validations.</p>
</li>
<li>
<p>Mainchain relays CCM to the receiving chain via a CCU.</p>
</li>
<li>
<p>Sidechain does not support module: CCM status is updated to <code>MODULE NOT SUPPORTED</code> on the receiving chain.</p>
</li>
<li>
<p>Errored CCM is relayed back to the mainchain.</p>
</li>
<li>
<p>Errored CCM is relayed back to the sending chain.</p>
</li>
<li>
<p>Sending chain undoes related state changes: 5 LSK are added back to Alice&#8217;s account, because the cross-chain transfer was unsuccessful.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="complete-cross-chain-communication-flow"><a class="anchor" href="#complete-cross-chain-communication-flow"></a>Complete cross-chain-communication flow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To summarize, the complete flow of cross-chain communication is described in the diagram below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/understand-blockchain/interop/cc-communication-flow.png" alt="cc communication flow">
</div>
<div class="title">Figure 1. Overview: Cross-chain communication flow</div>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="index.html">Lisk Interoperability</a></span>
  <span class="next"><a href="sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p> 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/glossary.js"></script>
<script async src="../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../_/js/vendor/component-versions.js"></script>
<script src="../../../_/js/vendor/custom.js"></script>

  </body>
</html>
