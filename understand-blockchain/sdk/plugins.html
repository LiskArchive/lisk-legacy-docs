<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Plugins :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/understand-blockchain/sdk/plugins.html">
    <link rel="prev" href="modules-commands.html">
    <link rel="next" href="rpc.html">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../_/css/dark-site.css">

    <script>var uiRootPath = '../../_'</script>
    <script src="../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>

<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../.." class="lisk-logo"></a>
        <a href="../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../index.html">Lisk Documentation</a>
        <a class="component" href="../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
      </div>
  <span></span>
  <span></span>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk Documentation</a></li>
    <li><a href="../index.html">Understand Lisk Blockchain</a></li>
    <li><a href="plugins.html">Plugins</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/development/docs/modules/ROOT/pages/understand-blockchain/sdk/plugins.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/blockchain-scalability.html">Blockchain Scalability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../intro/lisk-products.html">Lisk products</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../index.html">Understand Lisk Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../state-machine.html">State machine</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../consensus/index.html">Consensus protocols</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/dpos-poa.html">Block generator selection algorithms</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/bft.html">Lisk BFT</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../consensus/certificates.html">Lisk Certificates</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../interoperability/index.html">Lisk Interoperability</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interoperability/communication.html">Cross-chain communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../interoperability/sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../blocks-txs.html">Blocks and Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="modules-commands.html">Modules and Commands</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="rpc.html">Communicating to a Lisk node via RPC</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="codec-schema.html">Codec &amp; schema</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../build-blockchain/index.html">Build Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-blockchain-app.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/configuration.html">Sidechain client configuration</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../build-blockchain/module/index.html">How to create a module</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/configuration.html">1. How to create a module configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/stores.html">2. How to create stores</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/command.html">3. How to create a command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/endpoints-methods.html">4. How to create endpoints and methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../build-blockchain/module/blockchain-event.html">5. How to create a blockchain event</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../build-blockchain/create-plugin.html">Creating a new plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../run-blockchain/index.html">Run Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../run-blockchain/forging.html">Enabling forging</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../integrate-blockchain/index.html">Integrate Blockchain</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-sdk/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-core/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">3.0.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v4/index.html">4.0.0-beta.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../../index.html">default</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.6.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-service/v0.7/index.html">0.7.0 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="4">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Plugins</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Plugins offer useful features to the application and external services, which are part of the off-chain logic of the blockchain application.
In other words, a plugin will never change the state of the blockchain itself, contrary to the <a href="modules-commands.html" class="xref page">modules</a>, which hold the on-chain logic of the blockchain application.</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">When to create a plugin</div>
<div class="paragraph">
<p>Plugins can perform the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Search the blockchain data.</p>
</li>
<li>
<p>Aggregate the blockchain data.</p>
</li>
<li>
<p>Provide a UI for the blockchain application.</p>
</li>
<li>
<p>Automate the blockchain logic, such as automatically sending transactions.</p>
</li>
<li>
<p>Add a proxy to the application interfaces.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#creating-a-plugin">Creating a Plugin</a></li>
<li><a href="#plugin-anatomy">Plugin Anatomy</a>
<ul class="sectlevel2">
<li><a href="#elements">Elements</a>
<ul class="sectlevel3">
<li><a href="#nodemodulepath">nodeModulePath()</a></li>
<li><a href="#name">name()</a></li>
<li><a href="#datapath">datapath()</a></li>
<li><a href="#configuration">Configuration</a>
<ul class="sectlevel4">
<li><a href="#default-configuration">Default Configuration</a></li>
<li><a href="#custom-configuration">Custom Configuration</a></li>
</ul>
</li>
<li><a href="#schemas">Schemas</a></li>
<li><a href="#types">Types</a></li>
</ul>
</li>
<li><a href="#interface">Interface</a>
<ul class="sectlevel3">
<li><a href="#endpoints">Endpoints</a></li>
<li><a href="#events">Events</a></li>
</ul>
</li>
<li><a href="#execution-logic">Execution Logic</a>
<ul class="sectlevel3">
<li><a href="#load">load()</a></li>
<li><a href="#unload">unload()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="creating-a-plugin"><a class="anchor" href="#creating-a-plugin"></a>Creating a Plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lisk provides an extremely simple and user-friendly method to create a plugin using <a href="../../lisk-sdk/references/lisk-commander/index.html" class="xref page">Lisk Commander</a>.
By executing the following command in a terminal, a plugin can be created and registered to a blockchain application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk generate:plugin NAME_OF_PLUGIN</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more practical guidance on how to create a new plugin, check out the guide <a href="../../build-blockchain/create-plugin.html" class="xref page">Creating a new plugin</a>.</p>
</div>
<div class="paragraph">
<p>If you wish to view an example of a fully implemented plugin, check out the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/hello-world/blockchain_app/hello_plugin/index.js">Hello plugin</a> from the <a href="../../build-blockchain/create-blockchain-app.html#the-hello-world-application" class="xref page">Hello World</a> blockchain application.</p>
</li>
<li>
<p>The <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/nft/blockchain_app/nft_api_plugin/index.js">NFT plugin</a> from the <a href="../../tutorial/nft.html" class="xref page">Non-fungible token (NFT) Tutorial</a>.</p>
</li>
<li>
<p>The <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/social-recovery/blockchain_app/plugins/srs_api_plugin/index.js">SRS API plugin</a> and the <a href="https://github.com/LiskHQ/lisk-sdk-examples/blob/development/tutorials/social-recovery/blockchain_app/plugins/srs_data_plugin/index.js">SRS data plugin</a> from the <a href="../../tutorial/srs.html" class="xref page">Social Recovery System (SRS) Tutorial</a>.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each plugin can have a set of files for defining the schemas, types, and endpoints of a plugin.
By default, Lisk Commander only creates the plugin&#8217;s class file such as <strong>example_plugin.ts</strong>, and registers it into the <strong>plugins.ts</strong> file.
The structure of the plugins folder can be similar to the one displayed below:</p>
</div>
<div class="listingblock">
<div class="title">Sample "plugins" directory inside a blockchain application</div>
<div class="content">
<pre>src/
├── plugins/
│   ├── example/
│   │   ├── example_plugin.ts
│   │   ├── types.ts
│   │   ├── endpoint.ts
│   │   └── schemas.ts
│   └── faucet/
│   │   ├── faucet_plugin.ts
│   │   ├── types.ts
│   │   ├── endpoint.ts
│   │   └── schemas.ts
└── plugins.ts</pre>
</div>
</div>
<div class="paragraph">
<p>It&#8217;s worth noting that the directory structure of a plugin can be customized as per the requirement of a blockchain application.
The separation of <strong>types</strong>, <strong>schemas</strong>, and <strong>endpoints</strong> is purely made to segregate different parts of a plugin.</p>
</div>
<div class="paragraph">
<p>As mentioned earlier, a part of the plugin&#8217;s bootstrapping process is to create a new class such as the <code>ExamplePlugin</code> in the <strong>example_plugin.ts</strong> file.
For a plugin to work correctly, it is mandatory to include the following functions, <code>nodeModulePath()</code>, <code>load()</code>, and <code>unload()</code>. These functions are automatically created during the bootstrapping process.</p>
</div>
<div class="paragraph">
<p>The following code snippet below shows a bare-bone plugin class:</p>
</div>
<div class="listingblock">
<div class="title">src/plugins/example/example_plugin.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BasePlugin } from 'lisk-sdk';

export class ExamplePlugin extends BasePlugin {

	public name: 'example';
	//Mandatory
	public get nodeModulePath(): string {
		return __filename;
	}

	//Mandatory
	public async load(): Promise&lt;void&gt; {}

	//Mandatory
	public async unload(): Promise&lt;void&gt; {}

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a plugin is bootstrapped, it is registered inside the <strong>plugins.ts</strong> file automatically by the Lisk Commander.</p>
</div>
<div class="listingblock">
<div class="title">src/plugins.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Application } from 'lisk-sdk';
import { ExamplePlugin } from "./plugins/example/example_plugin";

export const registerPlugins = (app: Application): void =&gt; {
    app.registerPlugin(new ExamplePlugin());
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="plugin-anatomy"><a class="anchor" href="#plugin-anatomy"></a>Plugin Anatomy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Every plugin in a blockchain application must be based on the <code>BasePlugin</code> class.
The <code>BasePlugin</code> class provides a basic skeleton for what is required of a plugin.
For more information, check out the <a href="https://github.com/LiskHQ/lisk-sdk/blob/development/framework/src/plugins/base_plugin.ts" target="_blank" rel="noopener"><strong>base_plugin.ts</strong></a> file on GitHub.</p>
</div>
<div class="paragraph">
<p>Every plugin has three essential parts, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Elements</p>
</li>
<li>
<p>Interface</p>
</li>
<li>
<p>Execution Logic</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="../../_images/intro/plugin-diagram.png" alt="plugin-diagram" width="1000">
</div>
<div class="title">Figure 1. Anatomy of an "ExamplePlugin" class based on the "BasePlugin" class</div>
</div>
<div class="sect2">
<h3 id="elements"><a class="anchor" href="#elements"></a>Elements</h3>
<div class="paragraph">
<p>Each plugin inherits functions and properties from the <code>BasePlugin</code> class.</p>
</div>
<div class="sect3">
<h4 id="nodemodulepath"><a class="anchor" href="#nodemodulepath"></a>nodeModulePath()</h4>
<div class="paragraph">
<p>Whenever a plugin is bootstrapped with the Lisk Commander, a <code>nodeModulePath()</code> function is created automatically.
This function returns the path of the <strong>plugin.ts</strong> file.
The plugin.ts file contains information on all the plugins registered with a blockchain application.</p>
</div>
<div class="listingblock">
<div class="title">Example: nodeModulePath() function of a plugin</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public get nodeModulePath(): string {
    return __filename;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="name"><a class="anchor" href="#name"></a>name()</h4>
<div class="paragraph">
<p>The <code>name()</code> function returns the name of the Plugin. It is inherited from the <code>BasePlugin</code> class.
The plugin name is used for routing RPC requests to or from the plugin.</p>
</div>
<div class="listingblock">
<div class="title">Example: name() function of the BasePlugin class</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public get name(): string {
    const name = this.constructor.name.replace('Plugin', '');
    return name.charAt(0).toLowerCase() + name.substr(1);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datapath"><a class="anchor" href="#datapath"></a>datapath()</h4>
<div class="paragraph">
<p>Lisk stores the blockchain application&#8217;s data in the <code>~/.lisk/APPLICATION_NAME</code> directory.
The <code>datapath()</code> function returns this path to the plugin so that the data specific to the application can be retrieved.</p>
</div>
<div class="listingblock">
<div class="title">Example: datapath() function of the BasePlugin class</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public get dataPath(): string {
    const dirs = systemDirs(this.appConfig.system.dataPath);
    return join(dirs.plugins, this.name, 'data');
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h4>
<div class="paragraph">
<p>Each plugin either inherits the default application&#8217;s configuration or can inject custom configurations relating to a plugin.
For more information about the default configuration, see the <a href="../../lisk-sdk/config.html#configuration" class="xref page">Configuration page</a>.</p>
</div>
<div class="sect4">
<h5 id="default-configuration"><a class="anchor" href="#default-configuration"></a>Default Configuration</h5>
<div class="paragraph">
<p>Whenever you create a plugin with Lisk Commander, by default, it inherits the application&#8217;s configurations as defined in the <code>BasePlugin</code> class.
A plugin that uses the default configurations looks similar to the following:</p>
</div>
<div class="listingblock">
<div class="title">"ExamplePlugin" class with the default configurations</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BasePlugin } from 'lisk-sdk';
// A plugin with default configuration doesn't need to define a configuration-specific schema and types objects.
export class ExamplePlugin extends BasePlugin {
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="custom-configuration"><a class="anchor" href="#custom-configuration"></a>Custom Configuration</h5>
<div class="paragraph">
<p>A plugin can also have its own set of configurations that are passed to it as shown in the following code snippet below:</p>
</div>
<div class="listingblock">
<div class="title">"FaucetPlugin" class with the custom configurations</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BasePlugin, PluginInitContext, cryptography } from 'lisk-sdk';
import { configSchema } from './schemas'; //Configuration Schema
import { FaucetPluginConfig, State } from './types'; // Types Object
import { Endpoint } from './endpoint';

// A plugin with Custom Plugin configuration needs a configuration schema and types objects.
export class FaucetPlugin extends BasePlugin&lt;FaucetPluginConfig&gt; { //Config Type Object
    public configSchema = configSchema; //Schema Object

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each custom configuration&#8217;s schema and type of values must be defined for each plugin and should be passed to the plugin class.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="schemas"><a class="anchor" href="#schemas"></a>Schemas</h4>
<div class="paragraph">
<p>A Schema of a plugin contains the structural information of the data accepted by a plugin.
A schema can be for a custom configuration or for a specific kind of data that must be passed to a plugin to accommodate the business logic.
Schemas are passed to the plugin class and are later verified by the Lisk framework.
Usually, schemas are present inside the <strong>schemas.ts</strong> file located inside a plugin&#8217;s folder.
The contents of the schemas.ts file are described below:</p>
</div>
<div class="listingblock">
<div class="title">Example: plugins/faucet/schemas.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export const configSchema = {
	$id: '#/plugins/liskFaucet/config',
	type: 'object',
	properties: {
		port: {
			type: 'integer',
			minimum: 1,
			maximum: 65535,
		},
		host: {
			type: 'string',
			format: 'ip',
		},
		encryptedPassphrase: {
			type: 'string',
			format: 'encryptedPassphrase',
			description: 'Encrypted passphrase of the genesis account',
		},
		applicationUrl: {
			type: 'string',
			format: 'uri',
			description: 'URL to connect',
		},
		fee: {
			type: 'string',
			description: 'The transaction fee used to faucet an account',
		},
		amount: {
			type: 'string',
			description: 'Number of tokens to fund an account per request',
		},
		tokenPrefix: {
			type: 'string',
			description: 'The token prefix associated with your application',
		},
		logoURL: {
			type: 'string',
			format: 'uri',
			description: 'The URL of the logo used on the UI',
		},
		captchaSecretkey: {
			type: 'string',
			description: 'The re-captcha secret key',
		},
		captchaSitekey: {
			type: 'string',
			description: 'The re-captcha site key',
		},
	},
	required: ['encryptedPassphrase', 'captchaSecretkey', 'captchaSitekey'],
	default: {
		port: 4004,
		host: '127.0.0.1',
		applicationUrl: 'ws://localhost:8080/ws',
		fee: '0.1',
		amount: '100',
		tokenPrefix: 'lsk',
	},
};

export const fundParamsSchema = {
	$id: '/lisk/faucet/fund',
	type: 'object',
	required: ['address'],
	properties: {
		address: {
			type: 'string',
			format: 'hex',
		},
		token: {
			type: 'string',
		},
	},
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="types"><a class="anchor" href="#types"></a>Types</h4>
<div class="paragraph">
<p>All the types of variables used by a plugin are usually defined in the <strong>types.ts</strong> file.
Whilst schemas describe the outline and structure of the data, the types.ts file contains the definitions of all the variables that are used by a plugin.</p>
</div>
<div class="listingblock">
<div class="title">Example: plugins/faucet/types.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export interface FaucetPluginConfig {
	port: number;
	host: string;
	encryptedPassphrase: string;
	captchaSitekey: string;
	captchaSecretkey: string;
	applicationUrl: string;
	fee: string;
	amount: string;
	tokenPrefix: string;
	captchaSecret: string;
	logoURL?: string;
}

export interface State {
	publicKey?: Buffer;
	passphrase?: string;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="interface"><a class="anchor" href="#interface"></a>Interface</h3>
<div class="paragraph">
<p>Plugins can expose <a href="#endpoints">Endpoints</a>, which allows other plugins and external tools to interact with the plugin.
Plugins can also invoke endpoints exposed by other plugins and the blockchain application. Plugins can also subscribe to <a href="#events">Events</a> emitted by a blockchain application.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
View the "Interfaces" section of the <a href="rpc.html#interfaces" class="xref page">Communication</a> page to see an overview of the different interfaces and their accessibility in modules, plugins, and external services.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="endpoints"><a class="anchor" href="#endpoints"></a>Endpoints</h4>
<div class="paragraph">
<p>Endpoints are functions that can be <a href="rpc.html#how-to-invoke-endpoints" class="xref page">invoked</a> via Remote-Procedure-Calls (RPC) by other plugins and external services, to request data from a plugin.</p>
</div>
<div class="paragraph">
<p>The endpoints of a plugin should be defined in the <code>Endpoint</code> class.
The <code>Endpoint</code> class usually resides in the <strong>endpoint.ts</strong> file inside each plugin&#8217;s directory and it inherits from the <code>BasePluginEndpoint</code> class.
For more information, check out the <a href="https://github.com/LiskHQ/lisk-sdk/blob/development/framework/src/plugins/base_plugin_endpoint.ts" target="_blank" rel="noopener"><strong>base_plugin_endpoint.ts</strong></a> file on GitHub.
A <a href="https://github.com/LiskHQ/lisk-sdk/blob/development/framework-plugins/lisk-framework-faucet-plugin/src/plugin/endpoint.ts">sample endpoint class</a> and one of its endpoints are available in the following code snippet below:</p>
</div>
<div class="listingblock">
<div class="title">Example: plugins/faucet/endpoint.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class Endpoint extends BasePluginEndpoint {

    // ...

    public async authorize(context: PluginEndpointContext): Promise&lt;{ result: string }&gt; {
		validator.validate(authorizeParamsSchema, context.params);
		const { enable, password } = context.params;
		try {
			const parsedEncryptedPassphrase = cryptography.encrypt.parseEncryptedMessage(
				this._config.encryptedPassphrase,
			);
			const passphrase = await cryptography.encrypt.decryptMessageWithPassword(
				parsedEncryptedPassphrase,
				password as string,
				'utf-8',
			);
			const { publicKey } = cryptography.legacy.getPrivateAndPublicKeyFromPassphrase(passphrase);
			this._state.publicKey = enable ? publicKey : undefined;
			this._state.passphrase = enable ? passphrase : undefined;
			const changedState = enable ? 'enabled' : 'disabled';
			return {
				result: `Successfully ${changedState} the faucet.`,
			};
		} catch (error) {
			throw new Error('Password given is not valid.');
		}
	}

    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="events"><a class="anchor" href="#events"></a>Events</h4>
<div class="paragraph">
<p>A plugin can subscribe to RPC events emitted by the blockchain.
To subscribe to an event see, <a href="rpc.html#how-to-subscribe-to-events" class="xref page">How to subscribe to events</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="execution-logic"><a class="anchor" href="#execution-logic"></a>Execution Logic</h3>
<div class="paragraph">
<p>The execution logic consists of functions that execute the business logic for a plugin.
By default, a bootstrapped plugin has the <code>load()</code> and <code>unload</code> functions.
More can be added if needed and all the functions have access to the methods and properties defined in the <code>BasePlugin</code> class.
The aforementioned can be accessed using <code>this.variable</code> or <code>this.function()</code> from within the plugin class.</p>
</div>
<div class="sect3">
<h4 id="load"><a class="anchor" href="#load"></a>load()</h4>
<div class="paragraph">
<p>The <code>load()</code> method will be invoked by the controller to load the plugin.
It contains the plugin logic that is executed when the plugin is loaded in the application.</p>
</div>
<div class="paragraph">
<p>It can be used to retrieve, mutate, store and/or publish data in a specific manner, depending on the purpose of the plugin.</p>
</div>
<div class="paragraph">
<p>With the help of the RPC protocol, access to blockchain events and endpoints is available.
The <a href="rpc.html" class="xref page">RPC Protocol</a> can be used to subscribe to events or to invoke certain endpoints within the application to retrieve the desired data.</p>
</div>
<div class="listingblock">
<div class="title">Example: load() function of the "faucet" plugin</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public async load(): Promise&lt;void&gt; {
    const app = express();
    app.get('/api/config', (_req, res) =&gt; {
        const config = {
            applicationUrl: this.config.applicationUrl,
            amount: this.config.amount,
            tokenPrefix: this.config.tokenPrefix,
            captchaSitekey: this.config.captchaSitekey,
            logoURL: this.config.logoURL,
            faucetAddress: this._state.publicKey
                ? cryptography.address.getLisk32AddressFromPublicKey(this._state.publicKey)
                : undefined,
        };
        res.json(config);
    });
    app.use(express.static(join(__dirname, '../../build')));
    this._server = app.listen(this.config.port, this.config.host);
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="unload"><a class="anchor" href="#unload"></a>unload()</h4>
<div class="paragraph">
<p>The <code>unload()</code> method will be invoked by the controller to unload the plugin correctly.
It is executed on application shutdown.</p>
</div>
<div class="listingblock">
<div class="title">Example: unload() function of the "faucet" plugin</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public async unload(): Promise&lt;void&gt; {
    return new Promise((resolve, reject) =&gt; {
        this._server.close(err =&gt; {
            if (err) {
                reject(err);
                return;
            }
            resolve();
        });
    });
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="modules-commands.html">Modules and Commands</a></span>
  <span class="next"><a href="rpc.html">Communicating to a Lisk node via RPC</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../_/js/vendor/component-versions.js"></script>
<script src="../../_/js/vendor/custom.js"></script>
  </body>
</html>
