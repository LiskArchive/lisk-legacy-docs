= Auth module: Endpoint reference
Mona Bärenfänger <mona@lightcurve.io>
// Settings
:toc: preamble

== `auth_getAuthAccount`
This function checks whether the account corresponding to the input address has registered a multi-signature account.

.Request
[tabs]
=====
Specification::
+
--
.Parameters
[cols="1,1,3,1",options="header",stripes="hover"]
|===
|Name
|Type
|Description
|Sample

|`address`
|string
|The Lisk32 address to query.
|lsk24cd35u4jdq8szo3pn
sqe5dsxwrnazyqqqg5eu
|===

--
Node CLI::
+
--
[source,bash]
----
lisk-core endpoint:invoke auth_getAuthAccount '{ "address": "lsk24cd35u4jdq8szo3pnsqe5dsxwrnazyqqqg5eu" }' --pretty
----

--
cURL::
+
--
[source,bash]
----
curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "auth_getAuthAccount",
    "params": {
         "address": "lsk24cd35u4jdq8szo3pnsqe5dsxwrnazyqqqg5eu"
    }
}'
----
--
=====

.Response
[%collapsible]
====
.Example output
[source,json]
----
{
  "nonce": "0",
  "numberOfSignatures": 0,
  "mandatoryKeys": [],
  "optionalKeys": []
}
----

If there is no entry corresponding to address, it throws an error.
====


== `auth_isValidSignature`
Validates signatures of the provided transaction, including transactions from multi-signature accounts.

.Request
[tabs]
=====
Specification::
+
--
.Parameters
[cols="1,1,3,1",options="header",stripes="hover"]
|===
|Name
|Type
|Description
|Sample

|`transaction`
|string(hex)
|The transaction as hex string.
|08021000180420c0843d2a205133af
7944acf5278b0310a11c06134f80ab
4546d77d1b0e027c8430a7d2bb9232
2d088090bcfd0212149bd82e637d30
6533b1e1ad66e19ca0047faa1a6a1a
0f4861707079206269727468646179
213a4098a9ee2cde8354d014cfe636
7d430be2713e102f37d92ab91f03db
780407e5bf6d818a45c21c9f551863
8dfc3c5365fc2d497b928e0b9d6337
988df46a663a02
|===

--
Node CLI::
+
--
[source,bash]
----
lisk-core endpoint:invoke auth_isValidSignature '{ "transaction": "08021000180420c0843d2a205133af7944acf5278b0310a11c06134f80ab4546d77d1b0e027c8430a7d2bb92322d088090bcfd0212149bd82e637d306533b1e1ad66e19ca0047faa1a6a1a0f4861707079206269727468646179213a4098a9ee2cde8354d014cfe6367d430be2713e102f37d92ab91f03db780407e5bf6d818a45c21c9f5518638dfc3c5365fc2d497b928e0b9d6337988df46a663a02" }' --pretty
----

--
cURL::
+
--
[source,bash]
----
curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "auth_isValidSignature",
    "params": {
         "transaction": "08021000180420c0843d2a205133af7944acf5278b0310a11c06134f80ab4546d77d1b0e027c8430a7d2bb92322d088090bcfd0212149bd82e637d306533b1e1ad66e19ca0047faa1a6a1a0f4861707079206269727468646179213a4098a9ee2cde8354d014cfe6367d430be2713e102f37d92ab91f03db780407e5bf6d818a45c21c9f5518638dfc3c5365fc2d497b928e0b9d6337988df46a663a02"
    }
}'
----
--
=====

.Response
[%collapsible]
====
It returns `true` if the transaction object contains a valid signature, `false` otherwise.

.Example output
[source,json]
----
{
  "verified": true
}
----
====


== `auth_isValidNonce`
Validates the nonce of the provided transaction and returns a boolean value.

.Request
[tabs]
=====
Specification::
+
--
.Parameters
[cols="1,1,3,1",options="header",stripes="hover"]
|===
|Name
|Type
|Description
|Sample

|`transaction`
|string(hex)
|The transaction as hex string.
|08021000180420c0843d2a205133af
7944acf5278b0310a11c06134f80ab
4546d77d1b0e027c8430a7d2bb9232
2d088090bcfd0212149bd82e637d30
6533b1e1ad66e19ca0047faa1a6a1a
0f4861707079206269727468646179
213a4098a9ee2cde8354d014cfe636
7d430be2713e102f37d92ab91f03db
780407e5bf6d818a45c21c9f551863
8dfc3c5365fc2d497b928e0b9d6337
988df46a663a02
|===

--
Node CLI::
+
--
[source,bash]
----
lisk-core endpoint:invoke auth_isValidNonce '{ "transaction": "0a05746f6b656e12087472616e7366657218042080c2d72f2a203972849f2ab66376a68671c10a00e8b8b67d880434cc65b04c6ed886dfa91c2c32370a080400000000000000108090bcfd021a149bd82e637d306533b1e1ad66e19ca0047faa1a6a220f4861707079206269727468646179213a40c06cd0ef375911528d491971296532dbd58725f0fccc0f23e6c0656c43e75ecd12635616117e64d005f1c9f2a55de7cf2d8f5cb961927d839d141a18faa80e08" }' --pretty
----

--
cURL::
+
--
[source,bash]
----
curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "auth_isValidNonce",
    "params": {
         "transaction": "0a05746f6b656e12087472616e7366657218042080c2d72f2a203972849f2ab66376a68671c10a00e8b8b67d880434cc65b04c6ed886dfa91c2c32370a080400000000000000108090bcfd021a149bd82e637d306533b1e1ad66e19ca0047faa1a6a220f4861707079206269727468646179213a40c06cd0ef375911528d491971296532dbd58725f0fccc0f23e6c0656c43e75ecd12635616117e64d005f1c9f2a55de7cf2d8f5cb961927d839d141a18faa80e08"
    }
}'
----
--
=====

.Response
[%collapsible]
====
It returns `true` if the transaction object contains a valid nonce, `false` otherwise.

.Example output
[source,json]
----
{
  "verified": true
}
----
====


== `auth_getMultiSigRegMsgSchema`
Returns the params schema for the `registerMultisignature` command of the Auth module.

.Request
[tabs]
=====
Specification::
+
--
No parameters.
--
Node CLI::
+
--
[source,bash]
----
lisk-core endpoint:invoke auth_getMultiSigRegMsgSchema --pretty
----

--
cURL::
+
--
[source,bash]
----
curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "auth_getMultiSigRegMsgSchema",
    "params": {}
}'
----
--
=====

.Response
[%collapsible]
====
.Example output
[source,json]
----
{
  "schema": {
    "$id": "/auth/command/regMultisigMsg",
    "type": "object",
    "required": [
      "address",
      "nonce",
      "numberOfSignatures",
      "mandatoryKeys",
      "optionalKeys"
    ],
    "properties": {
      "address": {
        "dataType": "bytes",
        "fieldNumber": 1,
        "minLength": 20,
        "maxLength": 20
      },
      "nonce": {
        "dataType": "uint64",
        "fieldNumber": 2
      },
      "numberOfSignatures": {
        "dataType": "uint32",
        "fieldNumber": 3
      },
      "mandatoryKeys": {
        "type": "array",
        "items": {
          "dataType": "bytes",
          "minLength": 32,
          "maxLength": 32
        },
        "fieldNumber": 4
      },
      "optionalKeys": {
        "type": "array",
        "items": {
          "dataType": "bytes",
          "minLength": 32,
          "maxLength": 32
        },
        "fieldNumber": 5
      }
    }
  }
}
----
====


== `auth_sortMultisignatureGroup`
This function checks whether the account corresponding to the input address has registered a multisignature.

.Request
[tabs]
=====
Specification::
+
--
.Parameters
[cols="1,1,3,1",options="header",stripes="hover"]
|===
|Name
|Type
|Description
|Sample

|`address`
|string
|The Lisk32 address to query.
|lsk24cd35u4jdq8szo3pn
sqe5dsxwrnazyqqqg5eu
|===

--
Node CLI::
+
--
[source,bash]
----
lisk-core endpoint:invoke auth_getAuthAccount '{ "address": "lsk24cd35u4jdq8szo3pnsqe5dsxwrnazyqqqg5eu" }' --pretty
----

--
cURL::
+
--
[source,bash]
----
curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "auth_getAuthAccount",
    "params": {
         "address": "lsk24cd35u4jdq8szo3pnsqe5dsxwrnazyqqqg5eu"
    }
}'
----
--
=====

.Response
[%collapsible]
====
.Example output
[source,json]
----
{
  "nonce": "0",
  "numberOfSignatures": 0,
  "mandatoryKeys": [],
  "optionalKeys": []
}
----
====


== `auth_getMultiSigRegMsgTag`
Returns the message tag for the `MultisignatureRegisration` event of the Auth module.

.Request
[tabs]
=====
Specification::
+
--
No parameters.
--
Node CLI::
+
--
[source,bash]
----
lisk-core endpoint:invoke auth_getMultiSigRegMsgTag
----

--
cURL::
+
--
[source,bash]
----
curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "auth_getMultiSigRegMsgTag",
    "params": {}
}'
----
--
=====

.Response
[%collapsible]
====
.Example output
[source,json]
----
{"tag":"LSK_RMSG_"}
----
====

