<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating transactions and signing them offline :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/integrate-blockchain/create-tx-offline.html">
    <link rel="prev" href="create-sign-transactions.html">
    <link rel="next" href="calculating-min-fee.html">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../_/css/dark-site.css">

    <script>var uiRootPath = '../../_'</script>
    <script src="../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://lisk.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
    <!-- Matomo Tag Manager -->
    <script>
      var _mtm = window._mtm = window._mtm || [];
      _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
    </script>
    <!-- End Matomo Tag Manager -->
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../.." class="lisk-logo"></a>
        <a href="../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../index.html">Lisk Documentation</a>
        <a class="component" href="../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">beta</button>
  <div class="version-menu">
    <a class="version" href="../../integrate-blockchain/create-tx-offline.html">default</a>
    <a class="version is-current" href="create-tx-offline.html">beta</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
  <a href="../../index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Documentation</a></li>
    <li><a href="index.html">Integrate Blockchain</a></li>
    <li><a href="create-tx-offline.html">Creating transactions and signing them offline</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/development/docs/modules/ROOT/pages/integrate-blockchain/create-tx-offline.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="ROOT" data-version="beta">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/blockchain-scalability.html">Blockchain Scalability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/lisk-products.html">Lisk products</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../understand-blockchain/index.html">Understand Lisk Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/state-machine.html">State machine</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../understand-blockchain/interoperability/index.html">Lisk Interoperability</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/interoperability/communication.html">Cross-chain communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/interoperability/sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/blocks-txs.html">Blocks and Transactions</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/modules-commands.html">Modules and Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/rpc.html">Communicating to a Lisk node via RPC</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../build-blockchain/index.html">Build Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-blockchain-client.html">Creating a new blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/configuration.html">Blockchain client configuration</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../build-blockchain/module/index.html">How to create a module</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/configuration.html">1. How to create a module configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/stores.html">2. How to create stores</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/command.html">3. How to create a command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/endpoints-methods.html">4. How to create endpoints and methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/blockchain-event.html">5. How to create a blockchain event</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../build-blockchain/plugin/index.html">How to create a plugin</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/schema-types.html">1. Defining off-chain data structures</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/offchain-db.html">2. Setting up an Off-chain database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/configuring-plugin.html">3. Configuring a Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/plugin-class.html">4. Updating the Plugin Class</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/plugin-endpoints.html">5. Creating an endpoint &amp; Testing the plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/register-sidechain.html">How to register a sidechain</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../run-blockchain/index.html">Run Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/process-management.html">Process management with PM2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/become-a-validator.html">How to become a validator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/staking.html">How to stake and un-stake tokens</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/enable-block-generation.html">How to enable/disable block generation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/setup-relayer.html">Setting up a relayer node</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="index.html">Integrate Blockchain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="connecting-endpoints.html">Connecting to endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="subscribing-to-events.html">Retrieving on-chain events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="create-sign-transactions.html">How to create and sign a transaction</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="calculating-min-fee.html">How to calculate the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="posting-transactions.html">How to post a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="integrate-ui/index.html">Integrating a user interface</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="integrate-ui/create-get-account.html">1. Handling accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="integrate-ui/faucet-transfer.html">2. Using faucet and transferring tokens</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="integrate-ui/send-get-hello.html">3. Sending and retrieving hello</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-sdk/v6/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-core/v4/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">beta</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">3.0.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v4/index.html">4.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">default</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.6.4 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-service/v0.7/index.html">0.7.0 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Creating transactions and signing them offline</h1>
<div id="preamble">
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>On this page, you&#8217;ll learn:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> How to create and sign a transaction in an entirely offline environment.</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> How to verify the transaction by performing a dry-run.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#option-1-using-the-node-cli-to-create-a-transaction-offline">Option 1: Using the node CLI to create a transaction offline</a></li>
<li><a href="#option-2-creating-transactions-offline-with-lisk-elements">Option 2: Creating transactions offline with Lisk Elements</a>
<ul class="sectlevel2">
<li><a href="#provide-the-transaction-schema-and-params-schema">Provide the transaction schema and params schema</a></li>
<li><a href="#providing-the-account-credentials">Providing the account credentials</a></li>
<li><a href="#creating-the-transaction">Creating the transaction</a></li>
<li><a href="#signing-the-transaction">Signing the transaction</a></li>
<li><a href="#verifying-the-transaction">Verifying the transaction</a></li>
<li><a href="#executing-the-script">Executing the script</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="option-1-using-the-node-cli-to-create-a-transaction-offline"><a class="anchor" href="#option-1-using-the-node-cli-to-create-a-transaction-offline"></a>Option 1: Using the node CLI to create a transaction offline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The CLI  of a node can be used to create a transaction, even if the node is currently offline.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The flag <code>--offline</code> is used here, so that the transaction can be signed, even if the node is not connected to any network at the moment.</p>
</div>
<div class="paragraph">
<p>The <code>--offline</code> flag also requires the flags <code>--chain-id</code> and <code>--nonce</code> to be specified.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./bin/run transaction:create token transfer 10000000 --chain-id 00000000 --nonce 0 --offline</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">? Please enter: tokenID:  0000000000000000
? Please enter: amount:  1000000000
? Please enter: recipientAddress: lsk44ejwrjb4g44hj9mbtc43h8bcu54g2gbbyyvrk
? Please enter: data:  Happy Birthday!
? Please enter passphrase:  [hidden]</code></pre>
</div>
</div>
<div class="paragraph">
<p>After all relevant information about the transaction is given, the transaction is created and returned in hex format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{"transaction":"0802100018022080c2d72f2a20e03c09bdc8c023d94cf66a5d352e6258380210d97d545abbf75668ea3736e3123229088094ebdc031214ab0041a7d3f7b2c290b5b834d46bdc7b7eb858151a0b73656e6420746f6b656e733a40faa2626d7306506b1999f48aa2f4b1ffdee01e641fa76d37a9d1d6fd8c225a81065c856ea625c52d138a7e3ba86b62913dc8e5aef8b5e307641ab66e0277a60b"}</code></pre>
</div>
</div>
<details>
<summary class="title">How to additionally return the transaction in JSON format</summary>
<div class="content">
<div class="paragraph">
<p>To also see the decoded transaction object on creation, add the <code>--json</code> parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ ./bin/run transaction:create token transfer 10000000 --chain-id 00000000 --nonce 0 --offline --json</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a response as seen below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "transaction": "0802100018022080c2d72f2a20e03c09bdc8c023d94cf66a5d352e6258380210d97d545abbf75668ea3736e3123229088094ebdc031214ab0041a7d3f7b2c290b5b834d46bdc7b7eb858151a0b73656e6420746f6b656e733a40faa2626d7306506b1999f48aa2f4b1ffdee01e641fa76d37a9d1d6fd8c225a81065c856ea625c52d138a7e3ba86b62913dc8e5aef8b5e307641ab66e0277a60b"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
	"transaction": {
		"module": "token",
		"command": "transfer",
		"fee": "10000000",
		"nonce": "0",
		"senderPublicKey": "a3f96c50d0446220ef2f98240898515cbba8155730679ca35326d98dcfb680f0",
		"signatures": [
			"eee00368b7933b6bd06f7ba410261749197b800fc79a816ad15cb3225af6e48cc56c5af1961d6865b8c1ccf9466997e55e8edcf2681c3161a307270bd3d9b800"
		],
		"params": {
			"tokenID": "0400000000000000",
			"amount": "10000000",
			"recipientAddress": "lskzbqjmwmd32sx8ya56saa4gk7tkco953btm24t8",
			"data": "Hey there"
		},
		"id": "1da484cd297c7654b111987708220e53cb29535ae94276a2fe1486dcfee7e31d"
	}
}</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="option-2-creating-transactions-offline-with-lisk-elements"><a class="anchor" href="#option-2-creating-transactions-offline-with-lisk-elements"></a>Option 2: Creating transactions offline with Lisk Elements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following Lisk Elements packages are required to create and sign a transaction offline:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@liskhq/lisk-client</code>, including the following libraries:</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/modules/_liskhq_lisk_transactions.html" target="_blank" rel="noopener">@liskhq/lisk-transactions</a></p>
</li>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/modules/_liskhq_lisk_validator.html" target="_blank" rel="noopener">@liskhq/lisk-validator</a>(optional)</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="provide-the-transaction-schema-and-params-schema"><a class="anchor" href="#provide-the-transaction-schema-and-params-schema"></a>Provide the transaction schema and params schema</h3>
<div class="paragraph">
<p>To create, validate, and sign transactions offline with Lisk Elements, it is necessary to access their schemas.</p>
</div>
<div class="paragraph">
<p>The corresponding param schemas can be found in the module reference pages listed below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.RegisterMainchainCommand.html#schema" target="_blank" rel="noopener">Register Mainchain</a></p>
</li>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.RegisterSidechainCommand.html#schema" target="_blank" rel="noopener">Register Sidechain</a></p>
</li>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.ValidatorRegistrationCommand.html#schema" target="_blank" rel="noopener">Register Validator</a></p>
</li>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.ReportMisbehaviorCommand.html#schema" target="_blank" rel="noopener">Report Delegate Misbehavior</a></p>
</li>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.StakeCommand.html#schema" target="_blank" rel="noopener">Stake</a></p>
</li>
<li>
<p><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.TransferCommand.html#schema" target="_blank" rel="noopener">Transfer Token</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a new file <code>schemas.js</code> and add all required schemas in this file, as shown in the snippet below.</p>
</div>
<div class="paragraph">
<p>In this example, we will send a Transfer Token transaction, therefore two different schemas are required:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The <a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/variables/_liskhq_lisk_chain.transactionSchema.html" target="_blank" rel="noopener">transaction schema</a> (always required).</p>
</li>
<li>
<p>The <a href="https://liskhq.github.io/lisk-docs/lisk-sdk/v6/references/typedoc/classes/lisk_framework.TransferCommand.html#schema" target="_blank" rel="noopener">Transfer Token params schema</a>.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">schemas.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const transactionSchema = {
  $id: '/lisk/transaction',
  type: 'object',
  required: ['module', 'command', 'nonce', 'fee', 'senderPublicKey', 'params'],
  properties: {
    module: {
      dataType: 'string',
      fieldNumber: 1,
      minLength: 1,
      maxLength: 32,
    },
    command: {
      dataType: 'string',
      fieldNumber: 2,
      minLength: 1,
      maxLength: 32,
    },
    nonce: {
      dataType: 'uint64',
      fieldNumber: 3,
    },
    fee: {
      dataType: 'uint64',
      fieldNumber: 4,
    },
    senderPublicKey: {
      dataType: 'bytes',
      fieldNumber: 5,
      minLength: 32,
      maxLength: 32,
    },
    params: {
      dataType: 'bytes',
      fieldNumber: 6,
    },
    signatures: {
      type: 'array',
      items: {
        dataType: 'bytes',
      },
      fieldNumber: 7,
    },
  },
};

const transferParamsSchema = {
  $id: '/lisk/transferParams',
  title: 'Transfer transaction params',
  type: 'object',
  required: ['tokenID', 'amount', 'recipientAddress', 'data'],
  properties: {
    tokenID: {
      dataType: 'bytes',
      fieldNumber: 1,
      minLength: 8,
      maxLength: 8,
    },
    amount: {
      dataType: 'uint64',
      fieldNumber: 2,
    },
    recipientAddress: {
      dataType: 'bytes',
      fieldNumber: 3,
      format: 'lisk32',
    },
    data: {
      dataType: 'string',
      fieldNumber: 4,
      minLength: 0,
      maxLength: 64,
    },
  },
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="providing-the-account-credentials"><a class="anchor" href="#providing-the-account-credentials"></a>Providing the account credentials</h3>
<div class="paragraph">
<p>To create and sign the transaction, the credentials of the account sending the transactions are required.</p>
</div>
<div class="paragraph">
<p>In particular, the following account credentials are required:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><code>publicKey</code>: To create the transaction</p>
</li>
<li>
<p><code>privateKey</code>: To sign the transaction</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Create a file <code>account.json</code> and add all relevant account credentials into this file.</p>
</div>
<div class="paragraph">
<p>In this example, we use the following example account credentials:</p>
</div>
<div class="listingblock">
<div class="title">account.json</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "address": "lskg6prjbqpm6m8rsvmsg6dgyx3e89drknbvxg7x8",
  "keyPath": "m/44'/134'/0'",
  "publicKey": "ec10255d3e78b2977f04e59ea9afd3e9a2ce9a6b44619ef9f6c47c29695b1df3",
  "privateKey": "ac3e34eb369d52a3cddf0bc4312d9b0aa3625b04721039bb114f4c607fb5256eec10255d3e78b2977f04e59ea9afd3e9a2ce9a6b44619ef9f6c47c29695b1df3",
  "binaryAddress": "85c12d39041bc09e1f89dfeffe4b87cfcfe79fb2"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="creating-the-transaction"><a class="anchor" href="#creating-the-transaction"></a>Creating the transaction</h3>
<div class="paragraph">
<p>Create a new file <code>create-offline.js</code> to create the unsigned transaction object.</p>
</div>
<div class="paragraph">
<p>Define the unsigned transaction object manually by following the <a href="#provide-the-transaction-schema-and-params-schema">transaction schema</a>.</p>
</div>
<div class="paragraph">
<p>It is recommended to verify the correct format of the transaction with the <code>validator.validate()</code> function of the <code>@liskhq/lisk-validator</code> package afterwards.</p>
</div>
<div class="paragraph">
<p>Then, manually define the parameters for the Transfer Tokens command, and add them to the unsigned transaction.</p>
</div>
<div class="listingblock">
<div class="title">create-offline.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { validator } = require('@liskhq/lisk-client');
const { transactionSchema } = require('../schemas');
// Example account credentials
const account = require('./account.json');

const createTxOffline = () =&gt; {
	// Adjust the values of the unsigned transaction manually
	const unsignedTransaction = {
		module: "token",
		command: "transfer",
		fee: BigInt(10000000),
		nonce: BigInt(23),
		senderPublicKey: Buffer.from(account.publicKey,'hex'),
		params: Buffer.alloc(0),
		signatures: [],
	};

	// Validate the transaction
	const transactionErrors = validator.validator.validate(transactionSchema, unsignedTransaction);

	if (transactionErrors &amp;&amp; transactionErrors.length) {
		throw new validator.LiskValidationError([...transactionErrors]);
	}

	// Create the asset for the Token Transfer transaction
	const transferParams = {
		tokenID: Buffer.from('0000000000000000','hex'),
		amount: BigInt(2000000000),
		recipientAddress: Buffer.from(account.binaryAddress,'hex'),
		data: 'Happy birthday!'
	};

	// Add the transaction params to the transaction object
	unsignedTransaction.params = transferParams;

	// Return the unsigned transaction object
	return unsignedTransaction;
}

module.exports = { createTxOffline }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The transaction object is now returned, and ready to be signed by the sender in the next step.</p>
</div>
</div>
<div class="sect2">
<h3 id="signing-the-transaction"><a class="anchor" href="#signing-the-transaction"></a>Signing the transaction</h3>
<div class="paragraph">
<p>Create a new file <code>sign-offline.js</code> to create a script which will sign a given unsigned transaction object.</p>
</div>
<div class="paragraph">
<p>To sign the transaction, use <code>signTransaction()</code> function of the <code>@liskhq/lisk-transactions</code> package.
It requires the following parameters:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The unsigned transaction</p>
</li>
<li>
<p>The chain ID</p>
</li>
<li>
<p>The privateKey of the account signing the transaction</p>
</li>
<li>
<p>The params schema for the command addressed in the transaction</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="title">sign-offline.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { transactions } = require('@liskhq/lisk-client');
const { transferParamsSchema } = require('../schemas');
const account = require('./account.json');

const chainID = '00000000';

const signTx = (unsignedTransaction) =&gt; {
	const signedTransaction = transactions.signTransaction(
		unsignedTransaction,
		Buffer.from(chainID, 'hex'),
		Buffer.from(account.privateKey,'hex'),
		transferParamsSchema
	);

	return signedTransaction;
}


module.exports = { signTx }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="verifying-the-transaction"><a class="anchor" href="#verifying-the-transaction"></a>Verifying the transaction</h3>
<div class="paragraph">
<p>A transaction dry-run can only be performed <strong>online</strong>, by connecting to a node.</p>
</div>
<div class="paragraph">
<p>Without dry-running the transaction, its validity cannot be verified, and the transaction might fail.</p>
</div>
<div class="paragraph">
<p>To connect to a node, create a function <code>getClient()</code> which provides an instance of the Lisk API client.</p>
</div>
<div class="paragraph">
<p>Create a new file <code>api-client.js</code> and paste the following code:</p>
</div>
<div class="listingblock">
<div class="title">api-client.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { apiClient } = require('@liskhq/lisk-client');

// Adjust the RPC_ENDPOINT to point to your RPC node, if required.
const RPC_ENDPOINT = 'ws://localhost:7887/rpc-ws';
let clientCache;

const getClient = async () =&gt; {
  if (!clientCache) {
    clientCache = await apiClient.createWSClient(RPC_ENDPOINT);
  }
  return clientCache;
};

module.exports = { getClient };</code></pre>
</div>
</div>
<div class="paragraph">
<p>Create a new file <code>dry-run.js</code> to create a function that performs a dry-run for a given transaction.</p>
</div>
<div class="paragraph">
<p>Require the function <code>getClient()</code> to retrieve the API client, and use it to perform a dry-run of the transaction.</p>
</div>
<div class="listingblock">
<div class="title">dry-run.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { getClient } = require('../api-client');

const dryRun = async (signedTransaction) =&gt; {
	const client = await getClient();
	const encTx = client.transaction.encode(signedTransaction);
	const result = await client.invoke('txpool_dryRunTransaction', { "transaction": encTx.toString("hex") });

	return result;
}

module.exports = { dryRun };</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="executing-the-script"><a class="anchor" href="#executing-the-script"></a>Executing the script</h3>
<div class="paragraph">
<p>Finally, create a new file <code>index.js</code> to execute the scripts we defined above one after another.</p>
</div>
<div class="listingblock">
<div class="title">index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { createTxOffline } = require('./create-offline');
const { signTx } = require('./sign-offline');
const { dryRun } = require('./dry-run');

(async () =&gt; {
    // 1. Create an unsigned transaction
	const tx = createTxOffline();
	console.log("Unsigned Transaction: ", tx);

    // 2. Sign the transaction
	const signedTx = signTx(tx);
	console.log("Signed Transaction: ", signedTx);

    // 3. Perform a dry-run for the signed transaction
	const dryRunResult = await dryRun(signedTx)
	console.log("Dry-Run Result: ", dryRunResult);

	process.exit(0);
})();</code></pre>
</div>
</div>
<div class="paragraph">
<p>An unsigned Transaction looks like this:</p>
</div>
<div class="listingblock">
<div class="title">Unsigned Transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  module: 'token',
  command: 'transfer',
  fee: 10000000n,
  nonce: 23n,
  senderPublicKey: &lt;Buffer ec 10 25 5d 3e 78 b2 97 7f 04 e5 9e a9 af d3 e9 a2 ce 9a 6b 44 61 9e f9 f6 c4 7c 29 69 5b 1d f3&gt;,
  params: {
    tokenID: &lt;Buffer 00 00 00 00 00 00 00 00&gt;,
    amount: 2000000000n,
    recipientAddress: &lt;Buffer 85 c1 2d 39 04 1b c0 9e 1f 89 df ef fe 4b 87 cf cf e7 9f b2&gt;,
    data: 'Happy birthday!'
  },
  signatures: []
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Values for the properties <code>signatures</code> and <code>id</code> are added to a transaction when it is signed by a user.</p>
</div>
<div class="listingblock">
<div class="title">Signed Transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">{
  module: 'token',
  command: 'transfer',
  fee: 10000000n,
  nonce: 23n,
  senderPublicKey: &lt;Buffer ec 10 25 5d 3e 78 b2 97 7f 04 e5 9e a9 af d3 e9 a2 ce 9a 6b 44 61 9e f9 f6 c4 7c 29 69 5b 1d f3&gt;,
  params: {
    tokenID: &lt;Buffer 00 00 00 00 00 00 00 00&gt;,
    amount: 2000000000n,
    recipientAddress: &lt;Buffer 85 c1 2d 39 04 1b c0 9e 1f 89 df ef fe 4b 87 cf cf e7 9f b2&gt;,
    data: 'Happy birthday!'
  },
  signatures: [
    &lt;Buffer cd 28 ce 82 43 67 7b 16 a5 b9 f1 9b 6d 71 58 c0 bb b2 c9 9f 11 dc 25 34 96 d2 6a 14 d4 1c a6 03 d0 ab 49 67 4a 1c ee df aa a7 36 8e d0 1b a3 fa e2 81 ... 14 more bytes&gt;
  ],
  id: &lt;Buffer be 19 fd 1d e0 29 d0 78 e8 03 bb fb b0 8e bc 70 d1 34 e8 c1 d1 37 1f 0a 65 b5 7b 3d 76 9a 45 37&gt;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the dry-run result is <code>0</code>, the transaction is valid.</p>
</div>
<div class="listingblock">
<div class="title">Dry-Run Result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  result: 0,
  events: [
    {
      data: '0a14fa892e1aa42a8af96c45dfd5afc428b3dba950e612036665651a0803000008000000002080ade2042800',
      index: 0,
      module: 'token',
      name: 'lock',
      topics: [Array],
      height: 12636
    },
    {
      data: '0a14fa892e1aa42a8af96c45dfd5afc428b3dba950e612036665651a0803000008000000002080ade2042800',
      index: 1,
      module: 'token',
      name: 'unlock',
      topics: [Array],
      height: 12636
    },
    {
      data: '0a14fa892e1aa42a8af96c45dfd5afc428b3dba950e61208030000080000000018c89cbc022000',
      index: 2,
      module: 'token',
      name: 'burn',
      topics: [Array],
      height: 12636
    },
    {
      data: '0a14fa892e1aa42a8af96c45dfd5afc428b3dba950e61214821a6aa707422e6d444b42afb2a303d014d620221a08030000080000000020b890a6022800',
      index: 3,
      module: 'token',
      name: 'transfer',
      topics: [Array],
      height: 12636
    },
    {
      data: '0a14fa892e1aa42a8af96c45dfd5afc428b3dba950e61214821a6aa707422e6d444b42afb2a303d014d6202218c89cbc0220b890a602',
      index: 4,
      module: 'fee',
      name: 'generatorFeeProcessed',
      topics: [Array],
      height: 12636
    },
    {
      data: '0800',
      index: 5,
      module: 'token',
      name: 'commandExecutionResult',
      topics: [Array],
      height: 12636
    }
  ]
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="create-sign-transactions.html">How to create and sign a transaction</a></span>
  <span class="next"><a href="calculating-min-fee.html">How to calculate the minimum fee for a transaction</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../_/js/vendor/component-versions.js"></script>
<script src="../../_/js/vendor/custom.js"></script>
  </body>
</html>
