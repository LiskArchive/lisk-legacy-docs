<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>SDK Migration Guide :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/migration.html">
    <link rel="prev" href="../plugins/index.html">
    <link rel="next" href="lisk-elements/index.html">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../../_/css/dark-site.css">

<script>var uiRootPath = '../../_'</script>
<script src="../../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../.." class="lisk-logo"></a>
        <a href="../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk SDK</button>
    <div class="component-menu">
        <a class="component" href="../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component" href="../../index.html">Lisk Documentation</a>
        <a class="component is-current" href="../index.html">Lisk SDK</a>
        <a class="component" href="../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">6.0 (latest)</button>
  <div class="version-menu">
    <a class="version is-current" href="migration.html">6.0 (latest)</a>
    <a class="version is-missing" href="../v5/index.html">5.3.0</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk SDK</a></li>
    <li>References</li>
    <li><a href="migration.html">SDK Migration Guide</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk/modules/ROOT/pages/references/migration.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../client-cli.html">Client CLI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../config.html">Client configuration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../modules/index.html">Modules</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.BaseModule.html" target="_blank" rel="noopener">Base module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Auth.AuthModule.html" target="_blank" rel="noopener">Lisk Auth module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Fee.FeeModule.html" target="_blank" rel="noopener">Lisk Fee module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Interoperability.MainchainInteroperabilityModule.html" target="_blank" rel="noopener">Lisk Mainchain Interoperability module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Interoperability.SidechainInteroperabilityModule.html" target="_blank" rel="noopener">Lisk Sidechain Interoperability module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.NFT.NFTModule.html" target="_blank" rel="noopener">Lisk NFT module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.PoA.PoAModule.html" target="_blank" rel="noopener">Lisk PoA module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.PoS.PoSModule.html" target="_blank" rel="noopener">Lisk PoS module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Random.RandomModule.html" target="_blank" rel="noopener">Lisk Random module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Reward.RewardModule.html" target="_blank" rel="noopener">Lisk Reward module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Token.TokenModule.html" target="_blank" rel="noopener">Lisk Token module</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/classes/lisk_framework.Modules.Validators.ValidatorsModule.html" target="_blank" rel="noopener">Lisk Validators module</a></span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../plugins/index.html">Plugins</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_framework_chain_connector_plugin.html" target="_blank" rel="noopener">Lisk Chain Connector plugin</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_framework_monitor_plugin.html" target="_blank" rel="noopener">Lisk Monitor plugin</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_framework_dashboard_plugin.html" target="_blank" rel="noopener">Lisk Dashboard plugin</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_framework_faucet_plugin.html" target="_blank" rel="noopener">Lisk Faucet plugin</a></span>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_framework_report_misbehavior_plugin.html" target="_blank" rel="noopener">Lisk Report Misbehavior plugin</a></span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">References</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="migration.html">SDK Migration Guide</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lisk-elements/index.html">Lisk Elements</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_api_client.html" target="_blank" rel="noopener">Lisk API client reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_chain.html" target="_blank" rel="noopener">Lisk Chain reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_codec.html" target="_blank" rel="noopener">Lisk Codec reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_cryptography.html" target="_blank" rel="noopener">Lisk Cryptography reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_p2p.html" target="_blank" rel="noopener">Lisk P2P reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_passphrase.html" target="_blank" rel="noopener">Lisk Passphrase reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_transaction_pool.html" target="_blank" rel="noopener">Lisk Transaction Pool reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_transactions.html" target="_blank" rel="noopener">Lisk Transactions reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_tree.html" target="_blank" rel="noopener">Lisk Tree reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_utils.html" target="_blank" rel="noopener">Lisk Utils reference</a></span>
  </li>
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/_liskhq_lisk_validator.html" target="_blank" rel="noopener">Lisk Validator reference</a></span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lisk-commander/index.html">Lisk Commander</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/lisk_commander.html" target="_blank" rel="noopener">Lisk Commander reference</a></span>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <span class="nav-text"><a href="https://liskhq.github.io/lisk-docs/lisk-sdk/references/typedoc/modules/lisk_framework.html" target="_blank" rel="noopener">Lisk Framework reference</a></span>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">6.0 (latest)</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">4.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v3/index.html">3.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">default</a>
        </li>
        <li class="version">
          <a href="../../lisk-v3/index.html">lisk-v3</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">6.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../v5/index.html">5.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.7 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-service/v0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">SDK Migration Guide</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Lisk SDK v6 introduces many breaking changes and essential improvements to the Lisk Protocol and the Lisk Framework.</p>
</div>
<div class="paragraph">
<p>This migration guide summarizes the most important changes from Lisk SDK v5 to Lisk SDK v6, and explains why the changes are introduced.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#terminology-changes">1. Terminology changes</a></li>
<li><a href="#failed-transactions-are-included-in-blocks">2. Failed transactions are included in blocks</a></li>
<li><a href="#addition-of-blockchain-events">3. Addition of blockchain events</a></li>
<li><a href="#chain-id-replaces-network-id">4. Chain ID replaces network ID</a></li>
<li><a href="#module-command-ids-are-removed">5. Module &amp; command IDs are removed</a></li>
<li><a href="#methods-replace-reducers">6. Methods replace reducers</a></li>
<li><a href="#endpoints-replace-actions">7. Endpoints replace actions</a></li>
<li><a href="#migration-of-store-from-v5-to-v6">8. Migration of store from v5 to v6</a></li>
<li><a href="#addition-of-metadata">9. Addition of metadata</a></li>
<li><a href="#module-dependencies-registration-updates">10. Module dependencies registration updates</a>
<ul class="sectlevel2">
<li><a href="#init">10.1. init()</a></li>
<li><a href="#adddependencies">10.2. addDependencies()</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="terminology-changes"><a class="anchor" href="#terminology-changes"></a>1. Terminology changes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To improve understanding, we introduce several terminology changes.</p>
</div>
<div class="paragraph">
<p>An overview of the most important terminology updates is summarized in the table below.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Terminology changes SDKv6 vs SDKv5</caption>
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">SDKv6 (new)</th>
<th class="tableblock halign-left valign-top">SDKv5 (old)</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Block generation</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The process of creating a new block in the Lisk ecosystem.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chain ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network ID</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier of a chain account.
It is used when sending tokens to a specific chain and is also prepended for signing to protect against replay attacks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module method</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module reducer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An interface for module-to-module communication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module/Plugin endpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Module/Plugin action</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An interface between a module/plugin and an external system via an RPC endpoint.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">PoS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DPoS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The validator selection algorithm of the Lisk Mainchain.
In fact, the algorithm used by Lisk can be considered as a combination of DPoS and PoS.
As the similarities with PoS (Proof of Stake) are quite big, it was decided to rename the DPoS module to PoS and to replace DPoS-specific terminology with more general terms.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPC event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application event</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events that are natively included in the Lisk Framework and follow the publish/subscribe pattern.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RPC node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Non-forging node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A type of node which allows users to query information from a blockchain network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Web3 app, blockchain application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blockchain application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An application that utilizes blockchain technology.
The application typically includes business logic running on blockchain clients (modules or smart contracts), middleware and UI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lisk app, app on Lisk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blockchain application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A Web3 app built on Lisk.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blockchain client</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A client is an implementation of the blockchain protocol that verifies data (blocks and transactions) against the protocol rules and keeps the network secure.
In Lisk, Lisk Core is the client for the Lisk Mainchain and clients for other blockchains in the Lisk ecosystem can be built using the Lisk SDK.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blockchain node</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A node is an instance of a blockchain client that runs on a computer and is connected to other computers as part of the decentralized blockchain network.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sidechain</p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A separate, independent blockchain that runs in parallel to a main blockchain.
It is typically interoperable with the main blockchain.
In Lisk, a sidechain is a blockchain registered on the Lisk mainchain following the Lisk Interoperability Protocol.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A user staking LSK to "vote"/increase the delegate weight of their favourite validator(s).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Staking</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Voting</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process of locking tokens to support a specific validator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delegate</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Participants in charge of generating, processing and finalizing blocks in a PoS blockchain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Validator node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Forging node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A type of node which has the capability of generating a block.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="failed-transactions-are-included-in-blocks"><a class="anchor" href="#failed-transactions-are-included-in-blocks"></a>2. Failed transactions are included in blocks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the event of a failed execution of a transaction&#8217;s business logic, the transaction will be assigned the status of <code>fail</code>.
In Lisk SDK v5, transactions were only included in a block, if they could be executed successfully.
In Lisk SDK v6, this changes now: <a href="../../understand-blockchain/blocks-txs.html#successful-vs-failed-transactions" class="xref page">Failed transactions</a> <strong>are included in blocks</strong> as well.</p>
</div>
<div class="paragraph">
<p>As you know, the transaction fee is paid for every transaction included in a block.
This has the following consequence:
By including failed transactions in blocks, the <strong>transaction fee is always paid</strong> even if it failed and didn&#8217;t introduce any state changes on the blockchain.</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Increased rewards for validators</dt>
<dd>
<p>By doing this, validators will still be rewarded for executing the logic of the transaction until the point where it failed.</p>
</dd>
<dt class="hdlist1">Increased security</dt>
<dd>
<p>Additionally, it mitigates the danger of DDoSing blockchain networks by spamming transactions that will fail, because the transaction fee has to be paid in any case.</p>
</dd>
</dl>
</div>
</div>
</details>
<div class="paragraph">
<p>To verify, if a transaction that is included in a block was executed successfully, Lisk SDK v6 introduces the <a href="#addition-of-blockchain-events">Addition of blockchain events</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="addition-of-blockchain-events"><a class="anchor" href="#addition-of-blockchain-events"></a>3. Addition of blockchain events</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Blockchain events</strong> are <strong>newly introduced</strong>, and <strong>Module pub/sub events</strong> are <strong>completely removed</strong> in Lisk SDK v6.</p>
</div>
<div class="paragraph">
<p>Although similar in name, Blockchain events follow a completely different approach.
To avoid confusion between the two events, please read the summary below, which is comparing the new and old events inside modules.</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Required, if failed transactions are included in blocks</dt>
<dd>
<p>As explained above, <a href="#failed-transactions-are-included-in-blocks">Failed transactions are included in blocks</a> in v6.</p>
<div class="paragraph">
<p>This means, it cannot be assumed, that a transaction was successfully executed, just by checking that the transaction is included in a finalized block.</p>
</div>
<div class="paragraph">
<p>It could happen that the transaction inside a block has failed, and wasn&#8217;t executed on the blockchain.</p>
</div>
<div class="paragraph">
<p>But how to check if the transaction failed, or was executed successfully?
To transmit this information, the <a href="../../understand-blockchain/sdk/modules-commands.html#standard-event" class="xref page">standard event</a> is emitted for every transaction included in the particular block.
It informs if that particular transaction was successfully executed, or failed.</p>
</div>
<div class="paragraph">
<p>By adding events, it is therefore possible to check if a transaction was executed successfully.</p>
</div>
</dd>
<dt class="hdlist1">Enhanced developer experience</dt>
<dd>
<p>Events can store various additional information on-chain, which can be valuable for other services.
Additional events can be defined per module by the blockchain developer.</p>
</dd>
</dl>
</div>
</div>
</details>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_blockchain-events---sdkv6"></a>Blockchain events - SDKv6</p>
</li>
<li>
<p><a id="tabset1_module-events---sdkv5"></a>Module events - SDKv5</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_blockchain-events---sdkv6">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blockchain events are introduced newly in Lisk SDK v6.
Blockchain events are still defined and emitted inside the module, but it is not possible to subscribe to them via the RPC API of a node.</p>
<p class="tableblock">Instead, blockchain events are <strong>logged per block</strong>, i.e. directly included in the block header and can be queried through the RPC API of a node by requesting the RPC endpoint <code>chain_getEvents</code>.</p>
<p class="tableblock"><strong>Blockchain events in Lisk SDK v6 are following a concept comparable to the <a href="https://medium.com/mycrypto/understanding-event-logs-on-the-ethereum-blockchain-f4ae7ba50378" target="_blank" rel="noopener">Ethereum event log</a>.</strong></p>
<p class="tableblock">Besides the newly introduced blockchain events, there is still a couple of <a href="../../understand-blockchain/sdk/rpc.html#rpc-events" class="xref page">RPC events</a> included in the Lisk Framework, which can be retrieved via public-subscribe, as in v5.</p>
<p class="tableblock">The blockchain developer can define new blockchain events per module as desired, but the RPC events are not customizable any more.
Only new blockchain events can be included in the blockchain client by the developer.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Purpose</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Blockchain events are a way for modules to store important information which is not included in the transactions or block assets, verifiable using eventRoot property present inside the block header.</p>
<p class="tableblock">They are part of the overall state of the blockchain, as an event root of all events included in a particular block is stored in the block header.</p>
<p class="tableblock">They can include a lot of additional data if required, as the events themselves can be removed from the stores of the node after a certain time, and therefore don&#8217;t "pollute" the blockchain itself.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">public constructor() {
    super();
    // registration of stores and events
    this.events.register(NewHelloEvent, new NewHelloEvent(this.name));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information on how to create the corresponding event class, please check out the guide: <a href="../../build-blockchain/module/blockchain-event.html" class="xref page">How to create a blockchain event</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Publishing</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const newHelloEvent = this.events.get(NewHelloEvent);
newHelloEvent.add(context, {
    senderAddress: context.transaction.senderAddress,
    message: context.params.message
},[ context.transaction.senderAddress ]);</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Retrieving</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In Lisk SDK v6, events are requested per block height after an event is emitted.</p>
</div>
<div class="paragraph">
<p>Retrieving events from a node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl --location --request POST 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "chain_getEvents",
    "params": {
        "height": 123
    }
}'</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" aria-labelledby="tabset1_module-events---sdkv5">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Analog to the <a href="../v5/events.html" class="xref page">application events</a> from v5, module events could be subscribed to via the RPC API of a node.</p>
<p class="tableblock">An event informs services that subscribed to it, if a certain event happened (e.g. a transaction was executed), and often contain additional data, providing more information or context about the event.</p>
<p class="tableblock"><strong>Module events in Lisk SDK v5 follow the <a href="https://en.wikipedia.org/wiki/Publish%E2%80%93subscribe_pattern" target="_blank" rel="noopener">publish-subscribe-pattern</a>.</strong></p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Purpose</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Events are used to communicate about certain events in real time, and to prevent reoccuring RPC request, just to check if there are any changes.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">public events = ['newHello'];</code></pre>
</div>
</div>
<div class="paragraph">
<p>For more information how to create the corresponding event class, please check out the guide <a href="../../build-blockchain/module/blockchain-event.html" class="xref page">How to create a blockchain event</a></p>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Publishing</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">this._channel.publish('hello:newHello', {
    sender: tx.senderAddress.toString('hex'),
    hello: helloAsset.helloString
});</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Retrieving</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>In Lisk SDK v5, events could be subscribed directly via the API client.</p>
</div>
<div class="paragraph">
<p>If an event was missed, there was no way of retrieving the event, after it was emitted by a node.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">client.subscribe('app:block:new', ( data ) =&gt; {
  console.log('new block:',data);
});</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="chain-id-replaces-network-id"><a class="anchor" href="#chain-id-replaces-network-id"></a>4. Chain ID replaces network ID</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Chain identifiers (or chain IDs) for transaction signatures and block signatures were already introduced in Lisk SDK v5 as "network identifiers" to prevent replay attacks on other chains.
In Lisk SDK v6, the chain ID is now additionally used to identify chains for making cross chain transactions in the Lisk ecosystem.</p>
</div>
<div class="paragraph">
<p>Besides getting a more descriptive name, the chain ID is also constructed differently now:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 11.1111%;">
<col style="width: 44.4444%;">
<col style="width: 44.4445%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chain ID (Lisk SDK v6)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Network ID (Lisk SDK v5)</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier of a blockchain network for transactions and blocks to prevent replay attacks on other chains.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Unique identifier of a blockchain network for transactions and blocks to prevent replay attacks on other chains.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Bytes</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Creation</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defined by the blockchain developer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Randomly generated</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Read the <a href="https://github.com/LiskHQ/lips/blob/main/proposals/lip-0037.md" target="_blank" rel="noopener">LIP 0037</a> for more information about the chain ID.
</td>
</tr>
</table>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_chain-id-example"></a>Chain ID example</p>
</li>
<li>
<p><a id="tabset2_network-id-example"></a>Network ID example</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_chain-id-example">
<div class="literalblock">
<div class="content">
<pre>00000000</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_network-id-example">
<div class="literalblock">
<div class="content">
<pre>4c09e6a781fc4c7bdb936ee815de8f94190f8a7519becd9de2081832be309a99</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Chain identifiers are 4-byte values that follow a specific format:
the first byte is used to identify the network in which the chain is running (either the Lisk Mainnet, Lisk Testnet, or any other test network);
the other 3 bytes identify the blockchain within the network.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The network-specific prefix is included explicitly to ensure that a chain does not use the same chain identifier in the test network as in the mainnet.
</td>
</tr>
</table>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Improved developer experience</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The chain identifier can be directly set by the blockchain creator, which is more convenient than generating a random 32-byte value.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Improved user experience</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>By using a much shorter ID, users can easily verify that they are signing a transaction for the correct blockchain.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="module-command-ids-are-removed"><a class="anchor" href="#module-command-ids-are-removed"></a>5. Module &amp; command IDs are removed</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module and command IDs are removed completely in Lisk SDKv6.</p>
</div>
<div class="paragraph">
<p>Instead of IDs, the name of a module and the name of a command are now used as unique identifiers for modules and commands, respectively.</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Enhanced developer experience</dt>
<dd>
<p>Reduces the number of required properties and uses strings which are more descriptive than numbers.</p>
</dd>
</dl>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="methods-replace-reducers"><a class="anchor" href="#methods-replace-reducers"></a>6. Methods replace reducers</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module reducers are renamed to <a href="../../understand-blockchain/sdk/modules-commands.html#methods" class="xref page">methods</a>.</p>
</div>
<div class="paragraph">
<p>Methods in Lisk SDK v6 still have the same purpose as reducers in v5, but besides the name change, they are also defined a bit differently, as summarized below:</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Improved developer experience</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>By providing a base class for the creation of module methods, developers can follow a dedicated pattern to include methods into a module in a straightforward manner.</p>
</li>
<li>
<p>The renaming from reducers to methods was introduced to improve intuitive understanding of the meaning behind this data structure.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</details>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_methods---sdkv6"></a>Methods - SDKv6</p>
</li>
<li>
<p><a id="tabset3_reducers---sdkv5"></a>Reducers - SDKv5</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_methods---sdkv6">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Name</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">Method</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">An interface for module-to-module communication.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist arabic">
<ol class="arabic">
<li>
<p>Define methods in a class which extends from the <code>BaseMethod</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseMethod, ImmutableMethodContext } from 'lisk-sdk';
import { MessageStore, MessageStoreData } from './stores/message';

export class HelloMethod extends BaseMethod {

	public async getHello(
		methodContext: ImmutableMethodContext,
		address: Buffer,
	): Promise&lt;MessageStoreData&gt; {
        // 1. Get message store
		const messageSubStore = this.stores.get(MessageStore);
        // 2. Get the Hello message for the address from the message store
		const helloMessage = await messageSubStore.get(methodContext, address);
        // 3. Return the Hello message
		return helloMessage;
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>Assign the <code>method</code> attribute of the module to an instance of the Method class, which was created above:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { HelloMethod } from './method';

export class HelloModule extends BaseModule {
	// [...]
	public method = new HelloMethod(this.stores, this.events);
    // [...]
}</code></pre>
</div>
</div>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { TokenMethod } from '../../../token';

export class SidechainRegistrationCommand extends BaseInteroperabilityCommand {
	public schema = sidechainRegParams;
	private _tokenMethod!: TokenMethod;

	public addDependencies(tokenMethod: TokenMethod) {
		this._tokenMethod = tokenMethod;
	}
    public async verify(
		context: CommandVerifyContext&lt;SidechainRegistrationParams&gt;,
	): Promise&lt;VerificationResult&gt; {
        // ...
        // Sender must have enough balance to pay for extra command fee.
		const availableBalance = await this._tokenMethod.getAvailableBalance(
			context.getMethodContext(),
			senderAddress,
			TOKEN_ID_LSK,
		);
		if (availableBalance &lt; REGISTRATION_FEE) {
            // ...
		}
        // ...
	}
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" aria-labelledby="tabset3_reducers---sdkv5">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">An interface for module-to-module communication.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class TokenModule extends BaseModule {
	// [...]
	public reducers = {
		credit: async (params: Record&lt;string, unknown&gt;, stateStore: StateStore): Promise&lt;void&gt; =&gt; {
			// [...]
		},
		debit: async (params: Record&lt;string, unknown&gt;, stateStore: StateStore): Promise&lt;void&gt; =&gt; {
			// [...]
		},
		getBalance: async (
			params: Record&lt;string, unknown&gt;,
			stateStore: StateStore,
		): Promise&lt;bigint&gt; =&gt; {
			const { address } = params;
			if (!Buffer.isBuffer(address)) {
				throw new Error('Address must be a buffer');
			}
			const account = await stateStore.account.getOrDefault&lt;TokenAccount&gt;(address);
			return account.token.balance;
		}
	};
    // [...]
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reducers can be invoked through the <code>reducerHandler</code>, which is available inside the lifecycle hooks and assets of a module.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">await reducerHandler.invoke("token:debit", {
  address: senderAddress,
  amount: asset.initValue,
});</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="endpoints-replace-actions"><a class="anchor" href="#endpoints-replace-actions"></a>7. Endpoints replace actions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The module actions are renamed to <a href="../../understand-blockchain/sdk/modules-commands.html#endpoints" class="xref page">endpoints</a>.</p>
</div>
<div class="paragraph">
<p>Endpoints in Lisk SDK v6 still have the same purpose as actions in v5, but besides the name change, they are also defined a bit differently, as summarized below:</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Improved developer experience</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>By providing a base class for the creation of module endpoints, developers can follow a dedicated pattern to include endpoints into a module in a straightforward manner.</p>
</li>
<li>
<p>The renaming from actions to endpoints was introduced to improve intuitive understanding of the meaning behind this data structure.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</details>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_endpoints---sdkv6"></a>Endpoints - SDKv6</p>
</li>
<li>
<p><a id="tabset4_actions---sdkv5"></a>Actions - SDKv5</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_endpoints---sdkv6">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">An interface between a module and an external system via an RPC endpoint.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseEndpoint, ModuleEndpointContext, cryptography } from 'lisk-sdk';
import { MessageStore, MessageStoreData } from './stores/message';

export class HelloEndpoint extends BaseEndpoint {
    public async getHello(ctx: ModuleEndpointContext): Promise&lt;MessageStoreData&gt; {
        // 1. Get message store
        const messageSubStore = this.stores.get(MessageStore);
        // 2. Get the address from the endpoint params
        const { address } = ctx.params;
        // 3. Validate address
        if (typeof address !== 'string') {
            throw new Error('Parameter address must be a string.');
        }
        cryptography.address.validateLisk32Address(address);
        // 4. Get the Hello message for the address from the message store
        const helloMessage = await messageSubStore.get(
            ctx,
            cryptography.address.getAddressFromLisk32Address(address),
        );
        // 5. Return the Hello message
        return helloMessage;
    }
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl --location --request GET 'http://localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "hello_getHello",
    "params": {
        "address": "lskuz5p98kz3mqzxnu68qdrjxtvdvr2o7pprtj4yv"
    }
}'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">const data = await client.invoke('namespace_endpointName', input);
console.log(data);</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" aria-labelledby="tabset4_actions---sdkv5">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Description</p></th>
<td class="tableblock halign-left valign-top"><p class="tableblock">An interface between a module and an external system via an RPC endpoint.</p></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {

    // ...

    public actions = {
        amountOfHellos: async () =&gt; {
            const res = await this._dataAccess.getChainState(CHAIN_STATE_HELLO_COUNTER);
            const count = codec.decode(
                helloCounterSchema,
                res
            );
            return count;
        },
    };

    // ...
}</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">const data = await client.invoke('app:actionName', input);</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="migration-of-store-from-v5-to-v6"><a class="anchor" href="#migration-of-store-from-v5-to-v6"></a>8. Migration of store from v5 to v6</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A store, aka key-value store is a special kind of database that follows a data storage paradigm designed for storing, retrieving, and managing associative arrays.</p>
</div>
<div class="paragraph">
<p>In the Lisk SDK, stores are used to store the on-chain and off-chain related data of a node.
Each module has its own dedicated store, which only the module itself can access.</p>
</div>
<div class="paragraph">
<p>In Lisk SDK v5, this principle was not followed consistently: There were the chain store and the account store, and the account store was accessible by every module.</p>
</div>
<div class="paragraph">
<p>In Lisk SDK v6, <strong>the account store is removed completely</strong>, and integrated into the respective module stores.
Additionally, the <strong>implementation of stores into modules is improved</strong>, to store any key-value pair in the database consistently.</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Improved developer experience</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>By providing a base class for the creation of module stores, developers can follow a dedicated pattern to include stores into a module in a consistent manner.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Improved modularity</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Confines data per module</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</details>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Stores in Lisk SDK v6</caption>
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<tbody>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Definition</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">How to define a new module store</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseStore } from 'lisk-sdk';

export interface MessageStoreData {
	message: String;
}

export const messageStoreSchema = {
	$id: '/hello/message',
	type: 'object',
	required: ['message'],
	properties: {
		message: {
			dataType: 'string',
			fieldNumber: 1,
		},
	},
};

export class MessageStore extends BaseStore&lt;MessageStoreData&gt; {
	public schema = messageStoreSchema;
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">How to register stores with the module</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { CounterStore } from './stores/counter';
import { MessageStore } from './stores/message';


export class HelloModule extends BaseModule {
    // [...]

    public constructor() {
        super();
        // registration of stores and events
        this.stores.register(CounterStore, new CounterStore(this.name));
        this.stores.register(MessageStore, new MessageStore(this.name));
    }
    // [...]
 }</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<th class="tableblock halign-left valign-top"><p class="tableblock">Usage</p></th>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="title">Example: How to get data from the store</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { BaseEndpoint, ModuleEndpointContext, cryptography } from 'lisk-sdk';
import { MessageStore, MessageStoreData } from './stores/message';

export class HelloEndpoint extends BaseEndpoint {
    public async getHello(ctx: ModuleEndpointContext): Promise&lt;MessageStoreData&gt; {
        // 1. Get message store
        const messageSubStore = this.stores.get(MessageStore);
        // 2. Get the address from the endpoint params
        const { address } = ctx.params;
        // 3. Validate address
        if (typeof address !== 'string') {
            throw new Error('Parameter address must be a string.');
        }
        cryptography.address.validateLisk32Address(address);
        // 4. Get the Hello message for the address from the message store
        const helloMessage = await messageSubStore.get(
            ctx,
            cryptography.address.getAddressFromLisk32Address(address),
        );
        // 5. Return the Hello message
        return helloMessage;
    }
}</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="addition-of-metadata"><a class="anchor" href="#addition-of-metadata"></a>9. Addition of metadata</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Lisk SDK v6 introduces a new RPC endpoint to get all existing metadata related to a node.
This includes metadata of all the modules which are registered on the node.</p>
</div>
<div class="paragraph">
<p>The module developer can now easily define which data should be returned by the endpoint for the particular module by adjusting the newly introduced <a href="../../understand-blockchain/sdk/modules-commands.html#module-metadata" class="xref page">metadata</a> method.</p>
</div>
<details>
<summary class="title">Main benefits of this change</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Improved user experience</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Users can now query all the relevant metadata about a module in a consistent manner.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">Improved modularity</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Metadata for a module is now defined inside it.</p>
</li>
<li>
<p>The metadata to be returned can be defined for each module individually.</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
</div>
</details>
<div class="listingblock">
<div class="title">How to define metadata for a module</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">export class HelloModule extends BaseModule {
    // [...]

	public metadata(): ModuleMetadata {
		return {
			name: '',
			endpoints: [],
			commands: this.commands.map(command =&gt; ({
				name: command.name,
				params: command.schema,
			})),
			events: this.events.values().map(v =&gt; ({
				name: v.name,
				data: v.schema,
			})),
			assets: [],
		};
	}

    // [...]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use the RPC endpoint <code>system_getMetadata</code> to retrieve the metadata of all modules registered to the blockchain client.</p>
</div>
<div class="listingblock">
<div class="title">How to get the metadata</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">curl --location --request POST 'localhost:7887/rpc' \
--header 'Content-Type: application/json' \
--data-raw '{
    "jsonrpc": "2.0",
    "id": "1",
    "method": "system_getMetadata",
    "params": {}
}'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="module-dependencies-registration-updates"><a class="anchor" href="#module-dependencies-registration-updates"></a>10. Module dependencies registration updates</h2>
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The following changes were introduced to complement the improvements made in the module structure, see <a href="#methods-replace-reducers">Methods replace reducers</a>, <a href="#addition-of-blockchain-events">Addition of blockchain events</a>, and <a href="#migration-of-store-from-v5-to-v6">Migration of store from v5 to v6</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In Lisk SDK v6, module dependencies can be registered in the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#init">init()</a></p>
</li>
<li>
<p><a href="#adddependencies">addDependencies()</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="init"><a class="anchor" href="#init"></a>10.1. init()</h3>
<div class="paragraph">
<p><code>init()</code> is a method that can be implemented inside a module and/or a command to register the required dependencies for the module.</p>
</div>
<div class="paragraph">
<p>The <code>init()</code> method of the command can be called inside the <code>init()</code> function of the module to pass config options to a command, if desired.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Dependencies added inside the init() method</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>Configuration options for the module</p>
</li>
<li>
<p>The stores used by the module</p>
</li>
<li>
<p>The events emitted by the module</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Stores and events can be registered in the constructor of the module alternatively.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public async init(args: ModuleInitArgs): Promise&lt;void&gt; {
    // registration of stores and events
    this.stores.register(CounterStore, new CounterStore(this.name));
    this.stores.register(MessageStore, new MessageStore(this.name));
    this.events.register(NewHelloEvent, new NewHelloEvent(this.name));
    // Get the module config defined in the config.json file
    const { moduleConfig } = args;
    // Overwrite the default module config with values from config.json, if set
    const config = utils.objects.mergeDeep({}, defaultConfig, moduleConfig) as ModuleConfigJSON;
    // Validate the provided config with the config schema
    validator.validate&lt;ModuleConfigJSON&gt;(configSchema, config);
    // Call the command init() method with config values as parameters
    this.commands[0].init(config).catch(err =&gt; {
        console.log("Error: ", err);
    });
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="adddependencies"><a class="anchor" href="#adddependencies"></a>10.2. addDependencies()</h3>
<div class="paragraph">
<p><code>addDependencies()</code> is a method that can be implemented inside a module and/or a command to register methods of other modules.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Dependencies added inside the addDependencies() method</dt>
<dd>
<div class="ulist">
<ul>
<li>
<p>The methods of other modules used by the module</p>
</li>
</ul>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
By registering them in <code>addDependencies()</code>, methods keep their type information which improves the development experience greatly.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">public addDependencies(tokenMethod: TokenMethod) {
    this._tokenMethod = tokenMethod;
}</code></pre>
</div>
</div>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="../plugins/index.html">Plugins</a></span>
  <span class="next"><a href="lisk-elements/index.html">Lisk Elements</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p> 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/glossary.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../_/js/vendor/component-versions.js"></script>
<script src="../../_/js/vendor/custom.js"></script>

  </body>
</html>
