<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Broadcast a transaction :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/lisk-sdk/v4/guides/app-development/broadcast.html">
    <link rel="prev" href="interact-with-api.html">
    <link rel="next" href="frontend.html">
    <meta name="description" content="How to create, sign and broadcast a transaction object the network, including how to validate the fee for a transaction.">
    <meta name="generator" content="Antora 3.1.1">

  <link id="theme" rel="stylesheet" title="Default" href="../../../../_/css/site.css">
  <link rel="stylesheet" title="Dark" href="../../../../_/css/dark-site.css">

    <script>var uiRootPath = '../../../../_'</script>
    <script src="../../../../_/js/vendor/medium-zoom.js"></script>
    <script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
    <!-- Matomo -->
    <script>
      var _paq = window._paq = window._paq || [];
      /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
      _paq.push(['trackPageView']);
      _paq.push(['enableLinkTracking']);
      (function() {
        var u="https://lisk.matomo.cloud/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', '2']);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
      })();
    </script>
    <!-- End Matomo Code -->
    <!-- Matomo Tag Manager -->
    <script>
      var _mtm = window._mtm = window._mtm || [];
      _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
    </script>
    <!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../../.." class="lisk-logo"></a>
        <a href="../../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
        <div id="docsearch" class="navbar-menu search-box hide-for-print">
          <!--<input id="search-input-toolbar" type="text" placeholder="Search me ...">-->
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../../api/lisk-node-http.html">Lisk node HTTP API</a>
            <a class="navbar-item" href="../../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../../api/lisk-service-http.html">Lisk Service HTTP API</a>
            <a class="navbar-item" href="../../../../api/lisk-service-rpc.html">Lisk Service RPC API</a>
            <a class="navbar-item" href="../../../../api/lisk-service-pubsub.html">Lisk Service Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk SDK</button>
    <div class="component-menu">
        <a class="component" href="../../../../lisk-core/v2/index.html">Lisk Core</a>
        <a class="component" href="../../../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component" href="../../../../beta/index.html">Lisk Documentation</a>
        <a class="component is-current" href="../../../v6/index.html">Lisk SDK</a>
        <a class="component" href="../../../../lisk-service/v0.7/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">4.0.0</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../../v6/index.html">6.0.0 (beta)</a>
    <a class="version is-current" href="broadcast.html">4.0.0</a>
    <a class="version" href="../../../v3/guides/app-development/broadcast.html">3.0.2</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
  <a href="../../../../beta/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Lisk SDK</a></li>
    <li><a href="../index.html">Guides</a></li>
    <li>Application development</li>
    <li><a href="interact-with-api.html">Interact with the API</a></li>
    <li><a href="broadcast.html">Broadcast a transaction</a></li>
  </ul>
</nav>
    <div id="docsearch-toolbar" class="search-box hide-for-print toolbar-search">
      <!--<input id="search-input" type="text" placeholder="Search me ...">-->
    </div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-sdk-4.0.0/modules/ROOT/pages/guides/app-development/broadcast.adoc"><img class="pencil">Edit this Page</a></div>
  </div>
<div class="body">
<div class="nav-container" data-component="lisk-sdk" data-version="v4">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Lisk SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../setup.html">Prerequisites</a>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Explanations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../explanations/consensus.html">Consensus in Lisk</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../index.html">Guides</a>
        </span>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Application development</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configuration.html">Configure a blockchain application</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="custom-transactions.html">Create a custom transaction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="test-transaction.html">Test a transaction</a>
  </li>
  <li class="nav-item parent" data-depth="3">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="interact-with-api.html">Interact with the API</a>
        </span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="4">
    <a class="nav-link" href="broadcast.html">Broadcast a transaction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="frontend.html">Connect a frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="launch.html">Launch a blockchain application</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Node management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/managing-accounts.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/forging.html">Enable forging</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/api-access.html">API access</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/enable-ssl.html">Enable SSL</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../node-management/logging.html">Logging</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../tutorials/index.html">Tutorials</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tutorials/hello-world.html">Hello World</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../tutorials/supply-chain/index.html">Supply Chain</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part1.html">Part 1: Installation &amp; setup</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part2.html">Part 2: Track a packet on the blockchain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part3.html">Part 3: A simple supply chain management system</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tutorials/supply-chain/part4.html">Part 4: How to publish the application</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="1">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/index.html">References</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/api-specification.html">API specification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/config.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/changelog.html">ChangeLog 3.x to 4.x</a>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/lisk-commander/index.html">Lisk Commander</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/commands.html">Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/lisk-core-commands.html">Lisk Core commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-commander/sensitive-inputs.html">Sensitive inputs</a>
  </li>
</ul>
  </li>
  <li class="nav-item parent" data-depth="2">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/lisk-elements/index.html">Lisk Elements</a>
        </span>
<ul class="nav-list">
  <li class="nav-item parent" data-depth="3">
    <button class="nav-item-toggle"></button>
        <span>
    <a class="nav-link" href="../../references/lisk-elements/api-client.html">API client</a>
        </span>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/accounts.html">Accounts</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/blocks.html">Blocks</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/dapps.html">DApps</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/delegates.html">Delegates</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/node.html">Node</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/peers.html">Peers</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/voters.html">Voters</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../references/lisk-elements/api-client/votes.html">Votes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/bft.html">BFT</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/chain.html">Chain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/client.html">Client</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/constants.html">Constants</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/cryptography.html">Cryptography</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/dpos.html">DPoS</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/p2p.html">P2P</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/passphrase.html">Passphrase</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/transaction-pool.html">Transaction pool</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../references/lisk-elements/validator.html">Validator</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../references/lisk-framework/index.html">Lisk Framework</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk SDK</span>
    <span class="version">4.0.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../../lisk-core/v2/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../../lisk-core/v4/index.html">4.0.0-beta.0</a>
        </li>
        <li class="version is-latest">
          <a href="../../../../lisk-core/v2/index.html">2.1.7</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../beta/index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../beta/index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../../v6/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../v6/index.html">6.0.0 (beta)</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">4.0.0</a>
        </li>
        <li class="version">
          <a href="../../../v3/index.html">3.0.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../../lisk-service/v0.7/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../../lisk-service/v0.7/index.html">0.7.0 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Broadcast a transaction</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#create">1. Create a transaction object</a></li>
<li><a href="#nonce">2. Acquire the nonce</a></li>
<li><a href="#sign">3. Sign a transaction</a></li>
<li><a href="#fee">4. Validate the fee</a></li>
<li><a href="#post">5. Broadcast a transaction</a></li>
<li><a href="#what-happens-to-a-transaction-after-a-node-received-it">6. What happens to a transaction after a node received it?</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This guide explains how to create a transaction object of a specific transaction type, and how to broadcast it to the network.</p>
</div>
<div class="paragraph">
<p>To achieve this a small script in Javascript needs to be written, that utilizes the <a href="../../references/lisk-elements/index.html" class="xref page">Lisk Elements packages</a> in order to create the transaction object, sign it, and send it to the network.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For the default transaction types, it is also possible to use Lisk Commander to <a href="../../references/lisk-commander/commands.html#create-tx" class="xref page">create</a> and <a href="../../references/lisk-commander/commands.html#broadcast-tx" class="xref page">broadcast transactions from the command-line</a> or <a href="https://lisk.io/wallet" target="_blank" rel="noopener">Lisk Desktop</a> to send a transaction via a user-friendly UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Ensure that Node.js is the latest LTS (version 12 or higher), and create a Node.js project by creating a <code>package.json</code> file inside of your current folder.</p>
</div>
<div class="listingblock">
<div class="title">Install dependencies</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir create-tx
cd create-tx
node --version
# v12.15.0
npm init --yes
npm i @liskhq/lisk-transactions
npm i @liskhq/lisk-cryptography
npm i @liskhq/lisk-api-client</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, create a new file <code>index.js</code> that will contain the script to generate a transaction, sign it and posts it to the network.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the full script at <a href="#post">3. Broadcast a transaction</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create"><a class="anchor" href="#create"></a>1. Create a transaction object</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_default-transaction"></a>Default transaction</p>
</li>
<li>
<p><a id="tabset1_custom-transaction"></a>Custom transaction</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_default-transaction">
<div class="listingblock">
<div class="title">How to create a tx object with Lisk Elements</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const transactions = require('@liskhq/lisk-transactions');

const tx = new transactions.TransferTransaction({
    asset: {
        amount: '1',
        recipientId: '1L',
    },
    fee: '10000000',
    nonce: '0',
});

console.log(tx.stringify());</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "asset": {
        "amount": "1",
        "recipientId": "1L"
    },
    "fee": "10000000",
    "nonce": "0",
    "senderId": "",
    "senderPublicKey": "",
    "signatures": [],
    "type": 8
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset1_custom-transaction">
<div class="paragraph">
<p>The <code>HelloTransaction</code> from the <a href="../index.html#hello_world_app" class="xref page">Hello World app</a> is used as an example here.</p>
</div>
<div class="listingblock">
<div class="title">How to create a custom tx object with Lisk Elements</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const HelloTransaction = require('../transactions/hello_transaction');

const tx = new HelloTransaction({
    asset: {
        hello: 'world',
    },
    fee: "10000000",
    nonce: "0",
});

console.log(tx.stringify());</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "asset": {
        "hello": "world"
    },
    "fee": "10000000",
    "nonce": "0",
    "senderId": "",
    "senderPublicKey": "",
    "signatures": [],
    "type": 20
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nonce"><a class="anchor" href="#nonce"></a>2. Acquire the nonce</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">How to acquire the current nonce of an account via API call</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const HelloTransaction = require('../transactions/hello_transaction');
const { APIClient } = require('@liskhq/lisk-api-client');
const API_BASEURL = 'http://localhost:4000';
const api = new APIClient([API_BASEURL]);

api.accounts.get({address: '5059876081639179984L'}).then(response =&gt; {

    const nonce = parseInt(response.data[0].nonce);
    const tx = new HelloTransaction({
        asset: {
            hello: 'world',
        },
        fee: "10000000",
        nonce: nonce,
    });

    console.log(tx.stringify());
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sign"><a class="anchor" href="#sign"></a>3. Sign a transaction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before any transaction can be sent to the network, it is required for the sender account to sign the transaction object.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
See the Lisk protocol for more information about the <a href="../../../../beta/understand-blockchain/lisk-protocol/appendix.html#signature_scheme" class="xref page">signature scheme</a>.
</td>
</tr>
</table>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_default-transaction"></a>Default transaction</p>
</li>
<li>
<p><a id="tabset2_custom-transaction"></a>Custom transaction</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_default-transaction">
<div class="listingblock">
<div class="title">How to sign tx object with Lisk Elements</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const transactions = require('@liskhq/lisk-transactions');
const {getNetworkIdentifier} = require('@liskhq/lisk-cryptography');

const networkIdentifier = getNetworkIdentifier(
    "19074b69c97e6f6b86969bb62d4f15b888898b499777bda56a3a2ee642a7f20a",
    "Lisk",
);

const tx = new transactions.TransferTransaction({
    asset: {
        amount: '1',
        recipientId: '1L',
    },
    fee: '10000000',
    nonce: '0',});

tx.sign(
    networkIdentifier,
    'peanut hundred pen hawk invite exclude brain chunk gadget wait wrong ready'
);

console.log(tx.stringify());</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "asset": {
        "amount": "1",
        "recipientId": "1L"
    },
    "fee": "10000000",
    "id": "8778308710378369285",
    "nonce": "0",
    "senderId": "11237980039345381032L",
    "senderPublicKey": "5c554d43301786aec29a09b13b485176e81d1532347a351aeafe018c199fd7ca",
    "signatures": [
        "5afdf01938e63fbe7187633df4bd403ed9faf664c03b2f886fe6c90733d0c8e15a69b280714a6b05ab88701f80e2cfa2c616c33a0bbfc787f87513e774412f0c"
    ],
    "type": 8
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset2_custom-transaction">
<div class="paragraph">
<p>The <code>HelloTransaction</code> from the <a href="../index.html#hello_world_app" class="xref page">Hello World app</a> is used as an example here.</p>
</div>
<div class="listingblock">
<div class="title">How to sign a custom tx object with Lisk Elements</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const HelloTransaction = require('../transactions/hello_transaction');
const {getNetworkIdentifier} = require('@liskhq/lisk-cryptography');

const networkIdentifier = getNetworkIdentifier(
    "19074b69c97e6f6b86969bb62d4f15b888898b499777bda56a3a2ee642a7f20a",
    "Lisk",
);

const tx = new HelloTransaction({
    asset: {
        hello: 'world',
    },
    fee: "10000000",
    nonce: "0",
});

tx.sign(
    networkIdentifier,
    'peanut hundred pen hawk invite exclude brain chunk gadget wait wrong ready'
);
console.log(tx.stringify());</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    "asset": {
        "hello": "world"
    },
    "fee": "10000000",
    "id": "9283551789433227429",
    "nonce": "0",
    "senderId": "16313739661670634666L",
    "senderPublicKey": "c094ebee7ec0c50ebee32918655e089f6e1a604b83bcaa760293c61e0f18ab6f",
    "signatures": [
        "ebb1c78e412b7cd83984e7633180ec1649bdb1e16db43759011b8567d78a47162d5209501a9462570dabeab6605412e7fc1f50db982b1f502c35f6a7daa69604"
    ],
    "type": 20
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="fee"><a class="anchor" href="#fee"></a>4. Validate the fee</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">How to validate the fee for a transaction before sending it to a node</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const HelloTransaction = require('../hello_world/transactions/hello_transaction');
const { getNetworkIdentifier } = require("@liskhq/lisk-cryptography");
const networkIdentifier = getNetworkIdentifier(
    "19074b69c97e6f6b86969bb62d4f15b888898b499777bda56a3a2ee642a7f20a",
    "Lisk"
);

const tx = new HelloTransaction({
    asset: {
        hello: 'world',
    },
    fee: "10",
    nonce: "0",
});

tx.sign(
    networkIdentifier,
    "peanut hundred pen hawk invite exclude brain chunk gadget wait wrong ready"
);

// Validate that the fee for the transaction is equal to, or higher than the minimum fee.
if ( tx.minFee &gt; tx.fee) {
    console.log("Please provide a higher fee. Minimum fee for the current transaction: " + tx.minFee);
    console.dir(tx);
} else {
    console.log(tx.stringify());
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="post"><a class="anchor" href="#post"></a>5. Broadcast a transaction</h2>
<div class="sectionbody">
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_default-transaction"></a>Default transaction</p>
</li>
<li>
<p><a id="tabset3_custom-transaction"></a>Custom Transaction</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_default-transaction">
<div class="listingblock">
<div class="title">How to create, sign and post a transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const transactions = require('@liskhq/lisk-transactions');
const {getNetworkIdentifier} = require('@liskhq/lisk-cryptography');
const { APIClient } = require('@liskhq/lisk-api-client');

// Constants
const API_BASEURL = 'http://localhost:4000'; <i class="conum" data-value="1"></i><b>(1)</b>
const networkIdentifier = getNetworkIdentifier(
    "19074b69c97e6f6b86969bb62d4f15b888898b499777bda56a3a2ee642a7f20a",
    "Lisk",
);

// Initialize
const api = new APIClient([API_BASEURL]);

const tx = new transactions.TransferTransaction({
    asset: {
        amount: '1',
        recipientId: '1L',
    },
    fee: '10000000',
    nonce: '103',});

tx.sign(
    networkIdentifier,
    'peanut hundred pen hawk invite exclude brain chunk gadget wait wrong ready'
);

api.transactions.broadcast(tx.toJSON()).then(res =&gt; {
    console.log("++++++++++++++++ API Response +++++++++++++++++");
    console.log(res.data);
    console.log("++++++++++++++++ Transaction Payload +++++++++++++++++");
    console.log(tx.stringify());
    console.log("++++++++++++++++ End Script +++++++++++++++++");
}).catch(err =&gt; {
    console.log(JSON.stringify(err.errors, null, 2));
});</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code><a href="http://localhost:4000" class="bare">http://localhost:4000</a></code> will post the transaction to a node that runs locally (this is indicated by the url <code><a href="http://localhost" class="bare">http://localhost</a></code>), and is connected to the Devnet (this is indicated by the port number <code>4000</code>).
Replace <code><a href="http://localhost:4000" class="bare">http://localhost:4000</a></code> with the url of the node, where you wish to broadcast the transaction.</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">//++++++++++++++++ API Response +++++++++++++++++
{ message: 'Transaction(s) accepted' }
//++++++++++++++++ Transaction Payload +++++++++++++++++
{
   "id":"17387110868403092024",
   "type":8,
   "senderPublicKey":"0fe9a3f1a21b5530f27f87a414b549e79a940bf24fdf2b2f05e7f22aeeecc86a",
   "senderId":"5059876081639179984L",
   "nonce":"105",
   "fee":"10000000",
   "signatures":[
      "ee65a1b47c536463fa7b46d366246ae5aad4e1ecf05344bba92fcd2d1dd028bab36d98aefe35be4831e048cef258b20e785853f8f3f612d25cd41491f247030b"
   ],
   "asset":{
      "amount":"1",
      "recipientId":"1L"
   }
}
//++++++++++++++++ End Script +++++++++++++++++</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_custom-transaction">
<div class="paragraph">
<p>The <code>HelloTransaction</code> from the <a href="../index.html#hello_world_app" class="xref page">Hello World app</a> is used as an example here.</p>
</div>
<div class="listingblock">
<div class="title">How to create, sign and post a transaction</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const HelloTransaction = require('./transactions/hello_transaction.js');
const { getNetworkIdentifier } = require('@liskhq/lisk-cryptography');
const { APIClient } = require('@liskhq/lisk-api-client');

// Constants
const API_BASEURL = 'http://localhost:4000';
const networkIdentifier = getNetworkIdentifier(
    "19074b69c97e6f6b86969bb62d4f15b888898b499777bda56a3a2ee642a7f20a",
    "Lisk",
);

// Initialize
const api = new APIClient([API_BASEURL]);

const tx = new HelloTransaction({
    asset: {
        hello: 'world',
    },
    fee: "10000000",
    nonce: "0",});

tx.sign(
    networkIdentifier,
    'peanut hundred pen hawk invite exclude brain chunk gadget wait wrong ready'
);

api.transactions.broadcast(tx.toJSON()).then(res =&gt; {
    console.log("++++++++++++++++ API Response +++++++++++++++++");
    console.log(res.data);
    console.log("++++++++++++++++ Transaction Payload +++++++++++++++++");
    console.log(tx.stringify());
    console.log("++++++++++++++++ End Script +++++++++++++++++");
}).catch(err =&gt; {
    console.log(JSON.stringify(err.errors, null, 2));
});</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example output</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">//++++++++++++++++ API Response +++++++++++++++++
{ message: 'Transaction(s) accepted' }
//++++++++++++++++ Transaction Payload +++++++++++++++++
{
   "id":"14010199306117184554",
   "type":20,
   "senderPublicKey":"0fe9a3f1a21b5530f27f87a414b549e79a940bf24fdf2b2f05e7f22aeeecc86a",
   "senderId":"5059876081639179984L",
   "nonce":"104",
   "fee":"10000000",
   "signatures":[
      "56a17864d905fc96d2755f16d9c75088d23e88050e6958c21faf99c4cc3d09fb6889cee7551866f6568ae8fc730f4fd7175b17f143dda2ea842afe4ad051f004"
   ],
   "asset":{
      "hello":"world"
   }
}
//++++++++++++++++ End Script +++++++++++++++++</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="what-happens-to-a-transaction-after-a-node-received-it"><a class="anchor" href="#what-happens-to-a-transaction-after-a-node-received-it"></a>6. What happens to a transaction after a node received it?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The transaction will be <strong>validated</strong> by the node, and added to the transaction pool if it is valid.
To validate the transaction, it will execute the logic defined in the <code>validateAsset()</code> method.</p>
</div>
<div class="paragraph">
<p>The node will also <strong>inform its peer nodes</strong> about the new transaction, so in turn all of them will validate the transaction and add it to their transaction pool as well.
If the transaction is added to the transaction pool of a forging node, the transaction will be included in one of the next new blocks, if it is not included already by another forger.</p>
</div>
<div class="paragraph">
<p><strong>Once the transaction is included into a block, it becomes part of the blockchain.</strong></p>
</div>
<div class="paragraph">
<p>By including a transaction into a block, the node executes the logic defined in the <code>applyAsset()</code> method of the transaction.</p>
</div>
<div class="paragraph">
<p><strong>To ensure that the transaction is final, it is recommended to wait for at least 150 blocks.</strong></p>
</div>
<div class="paragraph">
<p>It is possible to verify the finality of a particular transaction via the <a href="../../references/api-specification.html" class="xref page">API</a>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>GET <code>api/node/status</code> to receive the node status data.
It should contain a property <code>chainMaxHeightFinalized</code> which describes the highest block height of the network, that is already finalized.</p>
</li>
<li>
<p>GET <code>api/transactions?id=&lt;TRANSACTION_ID&gt;</code> to receive the data of the transaction that you want to check for finality.
Replace <code>&lt;TRANSACTION_ID&gt;</code> with the ID of the transaction.
The data should contain a property <code>height</code>, which indicates the block height at the time, the transaction was included into the blockchain.</p>
</li>
<li>
<p>All that is required now, is to compare the two values: The transaction is final, if <code>chainMaxHeightFinalized &gt; height</code>.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a transaction is finalized, it becomes a permanent part of the blockchain, and cannot be removed anymore.
</td>
</tr>
</table>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="interact-with-api.html">Interact with the API</a></span>
  <span class="next"><a href="frontend.html">Connect a frontend</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>Â© 2022 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
        <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
        <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
        <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
  <!--    </div> -->
    </div>
  </div>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script async src="../../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../../_/js/vendor/component-versions.js"></script>
<script src="../../../../_/js/vendor/custom.js"></script>
  <script src="../../../../_/js/vendor/docsearch.js"></script>
  <!--<script src="../../../../_/js/vendor/docsearch.min.js"></script>-->
  <!--<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>-->
  <script>
    docsearch({
      container: '#docsearch',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
    docsearch({
      container: '#docsearch-toolbar',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
  </script>
  <!--<script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>-->
<!--  <script>
    function focusSearchInputToolbar () { document.querySelector('#search-input-toolbar').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input-toolbar',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInputToolbar()
    window.addEventListener('load', focusSearchInputToolbar)
  </script>-->
  </body>
</html>
