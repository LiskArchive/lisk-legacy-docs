<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Setting up a relayer node :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/run-blockchain/setup-relayer.html">
    <link rel="prev" href="reward-sharing.html">
    <link rel="next" href="blockchain-reset.html">
    <meta name="description" content="How to setup a relayer node.">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../_/css/dark-site.css">

<script>var uiRootPath = '../_'</script>
<script src="../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href=".." class="lisk-logo"></a>
        <a href=".." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../index.html">Lisk Documentation</a>
        <a class="component" href="../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">default</button>
  <div class="version-menu">
    <a class="version is-current" href="setup-relayer.html">default</a>
    <a class="version is-missing" href="../lisk-v3/index.html">lisk-v3</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Documentation</a></li>
    <li><a href="index.html">Run Blockchain</a></li>
    <li><a href="setup-relayer.html">Setting up a relayer node</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/1944-update-setup-relayer-node-guide/docs/modules/ROOT/pages/run-blockchain/setup-relayer.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="ROOT" data-version="">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Introduction</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/what-is-blockchain.html">What is blockchain?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/how-blockchain-works.html">How blockchain works</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/blockchain-scalability.html">Blockchain Scalability</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/lisk-products.html">Lisk products</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../intro/blockchain-interoperability.html">Blockchain Interoperability</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/index.html">Understand Lisk Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/state-machine.html">State machine</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/consensus/index.html">Consensus protocols</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/consensus/pos-poa.html">Proof of Stake (PoS) &amp; Proof of Authority (PoA) in Lisk</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/mainchain.html">Mainchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/interoperability/index.html">Lisk Interoperability</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/interoperability/communication.html">Cross-chain communication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/interoperability/sidechain-registration-and-recovery.html">Sidechain Registration &amp; Recovery</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/blocks-txs.html">Blocks and Transactions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk SDK</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/modules-commands.html">Modules and Commands</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/rpc.html">Communicating to a Lisk node via RPC</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/sdk/codec-schema.html">Schemas &amp; Codec</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../build-blockchain/index.html">Build Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-blockchain-client.html">Creating a new blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/configuration.html">Blockchain client configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../build-blockchain/module/index.html">How to create a module</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/configuration.html">1. How to create a module configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/stores.html">2. How to create stores</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/command.html">3. How to create a command</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/endpoints-methods.html">4. How to create endpoints and methods</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/module/blockchain-event.html">5. How to create a blockchain event</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../build-blockchain/plugin/index.html">How to create a plugin</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/schema-types.html">1. Defining off-chain data structures</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/offchain-db.html">2. Setting up an Off-chain database</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/configuring-plugin.html">3. Configuring a Plugin</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/plugin-class.html">4. Updating the Plugin Class</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/plugin/plugin-endpoints.html">5. Creating an endpoint &amp; Testing the plugin</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/using-dashboard.html">Using the Dashboard with a blockchain client</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/enable-faucet.html">How to enable a Faucet for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/register-sidechain.html">How to register a sidechain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../build-blockchain/interoperable-module/index.html">How to implement cross-chain communication</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/interoperable-module/create-ccm.html">How to create a CCM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../build-blockchain/interoperable-module/execute-ccm.html">How to execute a CCM</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/test-app.html">Testing the blockchain application</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Run Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="process-management.html">Process management with PM2</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="become-a-validator.html">How to become a validator</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="staking.html">How to stake and un-stake tokens</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enable-block-generation.html">How to enable/disable block generation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="reward-sharing.html">How to share block rewards</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="setup-relayer.html">Setting up a relayer node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="blockchain-reset.html">Resetting and snapshotting the blockchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="enabling-misbehavior-report.html">How to enable the "Report Misbehavior" plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="monitoring-node.html">How to enable the Monitor plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integrate-blockchain/index.html">Integrate Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/connecting-endpoints.html">Connecting via endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/subscribing-to-events.html">Retrieving on-chain events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Transaction creation, signing, and posting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/create-sign-transactions.html">How to create and sign a transaction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/multisignature-accounts-and-transactions.html">How to create multi-signature accounts and transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/create-multiSig-tx-offline.html">Creating and signing a multi-signature transaction (Offline)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/calculating-min-fee.html">How to calculate the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/posting-transactions.html">How to post a transaction</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/overwriting-transactions.html">How to overwrite a transaction in the transaction pool</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integrate-blockchain/integrate-ui/index.html">Integrating a user interface</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/integrate-ui/create-get-account.html">1. Handling accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/integrate-ui/faucet-transfer.html">2. Using faucet and transferring tokens</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/integrate-ui/send-get-hello.html">3. Sending and retrieving hello</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integrate-blockchain/aggregate-blockchain-data/index.html">Aggregate blockchain data with Lisk Service</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../integrate-blockchain/aggregate-blockchain-data/extend-indexer.html">Extending the Indexer microservice</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Module RPC APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/auth-endpoints.html">Auth module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/dynamic-reward-endpoints.html">Dynamic Reward module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/fee-endpoints.html">Fee module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/interoperability-endpoints.html">Sidechain Interoperability module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/mainchain-interoperability-endpoints.html">Mainchain Interoperability module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/token-endpoints.html">Token module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/validators-endpoints.html">Validators module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/random-endpoints.html">Random module: Endpoint reference</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/module-rpc-api/pos-endpoints.html">Proof of Stake module: Endpoint reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Plugin RPC APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/plugin-rpc-api/chain-connector-api.html">Chain Connector plugin: Endpoint reference</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Lisk Service APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/lisk-service-rpc.html">RPC API of Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/lisk-service-http.html">HTTP API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/lisk-service-pubsub.html">Publish/Subscribe API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../api/lisk-service-api-migration.html">Lisk Service API v2 vs v3</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lisk-sdk/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lisk-service/index.html">Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../lisk-core/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">default</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-core/index.html">4.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-core/v3/index.html">3.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">default</a>
        </li>
        <li class="version">
          <a href="../lisk-v3/index.html">lisk-v3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-sdk/index.html">6.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-sdk/v5/index.html">5.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../lisk-service/index.html">0.7 (latest)</a>
        </li>
        <li class="version">
          <a href="../lisk-service/v0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="4">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Setting up a relayer node</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>On this page, you&#8217;ll learn:</p>
</div>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> How to set up a relayer node on a sidechain?</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> How to set up a relayer node on a mainchain?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>The process of setting up a <a href="index.html#relayer-nodes" class="xref page">relayer node</a> on a mainchain and sidechain are almost identical.
The subsequent sections describe the steps to set up a relayer node.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Prerequisites</div>
<div class="paragraph">
<p>To use this guide, it is assumed that the following criteria have been met:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An up-and-running node connected to the mainchain exists, see <a href="../lisk-core/setup/npm.html" class="xref page">How to set up a Lisk Mainnet node</a>.</p>
</li>
<li>
<p>An up-and-running node connected to the sidechain exists.</p>
</li>
<li>
<p>The sidechain must be registered to the mainchain as described in the <a href="../build-blockchain/register-sidechain.html" class="xref page">How to register a sidechain</a> guide.</p>
</li>
<li>
<p>The sidechain account on the mainchain must have either the <code>registered</code> or <code>active</code> status.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#installing-the-chain-connector-plugin">1. Installing the Chain Connector plugin</a></li>
<li><a href="#configuration">2. Configuration</a>
<ul class="sectlevel2">
<li><a href="#configuring-the-chain-connector-plugin">2.1. Configuring the Chain Connector plugin</a></li>
<li><a href="#configuring-the-system">2.2. Configuring the <code>system</code></a>
<ul class="sectlevel3">
<li><a href="#what-are-prefixes-and-how-to-get-them">2.2.1. What are Prefixes and how to get them?</a></li>
<li><a href="#calculating-inclusionproofkeys">2.2.2. Calculating <code>inclusionProofKeys</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#enabling-the-chain-connector-plugin">3. Enabling the Chain Connector plugin</a>
<ul class="sectlevel2">
<li><a href="#creating-an-encrypted-private-key">3.1. Creating an encrypted private key</a></li>
<li><a href="#prepare-config-for-chain-connector-plugin">3.2. Prepare config for chain connector plugin</a></li>
<li><a href="#register-plugin">3.3. Register plugin</a></li>
<li><a href="#result">3.4. Result</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="installing-the-chain-connector-plugin"><a class="anchor" href="#installing-the-chain-connector-plugin"></a>1. Installing the Chain Connector plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The chain connector plugin comes pre-installed with any chain that has been initialized with Lisk SDK v6.
However, in case it is required to install it manually, run the following command in the root folder of the client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm install @liskhq/lisk-framework-chain-connector-plugin</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>2. Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To set up a relayer node, one needs to set up the node according to the following configurations:</p>
</div>
<div class="sect2">
<h3 id="configuring-the-chain-connector-plugin"><a class="anchor" href="#configuring-the-chain-connector-plugin"></a>2.1. Configuring the Chain Connector plugin</h3>
<div class="paragraph">
<p>Once the plugin is installed, various configurations are available for the node operator to set.
With these configurations, the details such as the receiving chainâ€™s chainID and its IPC path or WS URL, CCU frequency, encrypted private key, etc. can be set.</p>
</div>
<div class="paragraph">
<p>The following table describes the available configuration options.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset1_configuration-options"></a>Configuration options</p>
</li>
<li>
<p><a id="tabset1_sample-configuration"></a>Sample configuration</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset1_configuration-options">
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 2%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>receivingChainIPCPath</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The IPC path of a receiving node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">~/.lisk/lisk-core</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>receivingChainWsURL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The WS URL of a receiving node</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ws://142.93.230.246:4002/rpc-ws</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ccuFrequency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of blocks after which a CCU should be created</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>encryptedPrivateKey</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Encrypted privateKey of the relayer</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"kdf=argon2id&amp;cipher=aes-256-gcm&amp;version=1&amp;ciphertext=da36ef64cbf2687d62b014dafdfa8ef8c823b2b1562ae78819599080e4500529b75e80093fba066879f0767e0de83abe285efb259dd9be5109b8a4ef66cfc52ec613314586c1aa1da3a6737c0f8b7f0de7fb4d1b85860cd23915bbcee774e1d85b357e342816a917e517f7c702e1a1deb28dd69a4b69ae2ac67a5c4c4236101c&amp;mac=e253decce05dd50758400d5c7408532a162fedf583ff9cafcb7ad3e12f6b8011&amp;salt=40ab2dcdd387e4372ed1dbb948a9ef84&amp;iv=4559dcaee67eb2c1a0957ecf&amp;tag=81c2c332d915454bed4be26018c598c5&amp;iterations=1&amp;parallelism=4&amp;memorySize=2024"</code></pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ccuFee</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The fee to be paid for each CCU transaction.
It&#8217;s an optional value and is only used if the user wants to pay a fee higher than the minimum calculated fee.
In that case, the minimum calculated fee is overridden with the value passed with the <code>ccuFee</code> property.
If the user-provided fee is lower than the calculated minimum fee then the calculated minimum fee will be used in that case.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100000000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isSaveCCU</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag for the user to either save or send a CCU on creation. Sending a CCU is the default option.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ccuSaveLimit</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of CCUs to save.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">300</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxCCUSize</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum size of CCU to be allowed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>registrationHeight</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">integer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Height at the time of registration on the receiving chain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>receivingChainID</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Chain ID of the receiving chain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">04000000</p></td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" aria-labelledby="tabset1_sample-configuration">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    // [...]
    "plugins": {
        "chainConnector": {
            "encryptedPrivateKey": "kdf=argon2id&amp;cipher=aes-256-gcm&amp;version=1&amp;ciphertext=da36ef64cbf2687d62b014dafdfa8ef8c823b2b1562ae78819599080e4500529b75e80093fba066879f0767e0de83abe285efb259dd9be5109b8a4ef66cfc52ec613314586c1aa1da3a6737c0f8b7f0de7fb4d1b85860cd23915bbcee774e1d85b357e342816a917e517f7c702e1a1deb28dd69a4b69ae2ac67a5c4c4236101c&amp;mac=e253decce05dd50758400d5c7408532a162fedf583ff9cafcb7ad3e12f6b8011&amp;salt=40ab2dcdd387e4372ed1dbb948a9ef84&amp;iv=4559dcaee67eb2c1a0957ecf&amp;tag=81c2c332d915454bed4be26018c598c5&amp;iterations=1&amp;parallelism=4&amp;memorySize=2024",
            "ccuFee": "800000",
            "receivingChainIPCPath": "~/.lisk/lisk-core",
            "receivingChainID": "04000000"
        }
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
A node operator must add either the value of <code><strong>receivingChainIPCPath</strong></code> or <code><strong>receivingChainWsURL</strong></code> in the chain connector&#8217;s config.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuring-the-system"><a class="anchor" href="#configuring-the-system"></a>2.2. Configuring the <code>system</code></h3>
<div class="paragraph">
<p>Before we discuss how to set up a node to act as a relayer node, we need to understand the concept of prefixes, how to retrieve them, and how to calculate <code>inclusionProofKeys</code>.</p>
</div>
<div class="sect3">
<h4 id="what-are-prefixes-and-how-to-get-them"><a class="anchor" href="#what-are-prefixes-and-how-to-get-them"></a>2.2.1. What are Prefixes and how to get them?</h4>
<div class="paragraph">
<p>We can get the <code>MODULE_PREFIX</code> and the <code>SUBSTORE_PREFIX</code> from the <a href="../api/lisk-node-rpc.html#system_getmetadata" class="xref page">system_getMetadata</a> endpoint.
Each module has a set of <code>stores</code> and each store has a unique <code>key</code>.
After invoking the aforementioned endpoint, search for the <code>"stores"</code> property of the <code>interoperability</code> module.</p>
</div>
<div class="paragraph">
<p>Then, look for the <code>outbox</code> store of the <code>interoperability</code> module.
The following details have been retrieved by invoking the <a href="../api/lisk-node-rpc.html#system_getmetadata" class="xref page">system_getMetadata</a> endpoint.</p>
</div>
<div class="listingblock">
<div class="title">Example of store info retrieved via the "system_getMetadata" endpoint.</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"stores": [
    {
        "key": "83ed0d250000",
        "data": {
            "$id": "/modules/interoperability/outbox",
            "type": "object",
            "required": [
                "root"
            ],
            "properties": {
                "root": {
                    "dataType": "bytes",
                    "minLength": 32,
                    "maxLength": 32,
                    "fieldNumber": 1
                }
            }
        }
    },
]</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<caption class="title">Table 1. Properties required to create "inclusionProofKeys"</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Prefix</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MODULE_PREFIX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The first 8 bytes of the <code>key</code> value is the <code>MODULE_PREFIX</code>.
For example, in the above-mentioned snippet, the <code>MODULE_PREFIX</code> is: <code>83ed0d25</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SUBSTORE_PREFIX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The last 4 bytes of the <code>key</code> value is the <code>SUBSTORE_PREFIX</code>.
For example, in the above-mentioned snippet, the <code>SUBSTORE_PREFIX</code> is: <code>0000</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STORE_KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>STORE_KEY</code> is a hexadecimal string, calculated based on the Chain ID of the sidechain.
For example, the Chain ID used in the following example is: <code>04000001</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="calculating-inclusionproofkeys"><a class="anchor" href="#calculating-inclusionproofkeys"></a>2.2.2. Calculating <code>inclusionProofKeys</code></h4>
<div class="paragraph">
<p>To save inclusion proof of <code>outboxRoot</code> for a sidechain on the mainchain on the <code>outbox</code> substore, do the following:</p>
</div>
<div class="listingblock">
<div class="title">Calculating "inclusionProofKeys"</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-javascript hljs" data-lang="javascript">// 1. Calculate the MODULE_PREFIX using the Interoperability module.
MODULE_PREFIX = Buffer.from('83ed0d25', 'hex')

// 2. Calculate the SUBSTORE_PREFIX using the Outbox Substore.
SUBSTORE_PREFIX = Buffer.from('0000', 'hex') ()

// 3. Calculate the STORE_KEY using the Chain ID of a sidechain.
STORE_KEY = Buffer.from('04000001', 'hex') ()

// 4. Finally, calculate the inclusionProofKeys as described below:
inclusionProofKeys = Buffer.concat([MODULE_PREFIX, SUBSTORE_PREFIX, cryptography.utils.hash(STORE_KEY)]);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the <code>inclusionProofKeys</code> value(s) is retrieved, it should be added to the <code>system</code> configuration available inside the <strong>config.json</strong> file of a node.
To save inclusion proof with every new block we need to pass the following configurations:</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset2_configuration-options"></a>Configuration options</p>
</li>
<li>
<p><a id="tabset2_sample-configuration"></a>Sample configuration</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset2_configuration-options">
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 3%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>keepInclusionProofsForHeights</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of blocks for which the inclusion proofs are to be kept.
By default, inclusion proofs are kept for the latest 300 blocks.
If <code>-1</code> is passed to this property, then it will keep all the inclusion proofs forever.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>inclusionProofKeys</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string[]</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains the keys for which we need to store inclusion proofs against the state tree.
This can be created or deduced by the user by concatenating the following:
<code>MODULE_PREFIX</code> + <code>SUBSTORE_PREFIX</code> + <code>HASH(STORE_KEY)</code></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"inclusionProofKeys": [
			"83ed0d250000fb5e512425fc9449316ec95969ebe71e2d576dbab833d61e2a5b9330fd70ee02"
		]</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="tab-pane" aria-labelledby="tabset2_sample-configuration">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
    // Default configurations
    "system": {
		"dataPath": "~/.lisk/pos-sidechain-example-one",
		"keepEventsForHeights": 300,
		"logLevel": "info",

        // Properties relevant to setting up a relayer node
		"keepInclusionProofsForHeights": -1,
		"inclusionProofKeys": [
			"83ed0d250000fb5e512425fc9449316ec95969ebe71e2d576dbab833d61e2a5b9330fd70ee02"
		]
	},
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The above approach should be used to configure the Chain connector plugin as the plugin requires the inclusion proof of the outbox root of the receiving chain to calculate <code>outboxRootWitness</code> in CCU transaction.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-the-chain-connector-plugin"><a class="anchor" href="#enabling-the-chain-connector-plugin"></a>3. Enabling the Chain Connector plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A node operator can perform the following steps to enable the chain connector plugin and turn a node into a relayer node.</p>
</div>
<div class="sect2">
<h3 id="creating-an-encrypted-private-key"><a class="anchor" href="#creating-an-encrypted-private-key"></a>3.1. Creating an encrypted private key</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The first step is to create an encrypted private key.
A node operator can use a REPL session to call the Lisk cryptography libraries.</p>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset3_sidechain"></a>Sidechain</p>
</li>
<li>
<p><a id="tabset3_mainchain"></a>Mainchain</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset3_sidechain">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./bin/run console
Entering Lisk REPL: type `Ctrl+C` or `.exit` to exit</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset3_mainchain">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core console
Entering Lisk REPL: type `Ctrl+C` or `.exit` to exit</code></pre>
</div>
</div>
</div>
</div>
</div>
</li>
<li>
<p>The <code>encryptedPrivateKey</code> can be created by calling the <code>encryptMessageWithPassword</code> function.
It accepts two arguments: a <strong>private key</strong> of the account which is supposed to be used as a relayer address and a <strong>password</strong>.</p>
<div class="paragraph">
<p>The account should have sufficient balance so that the encrypted private key can be used for signing and sending the transaction.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset4_sidechain"></a>Sidechain</p>
</li>
<li>
<p><a id="tabset4_mainchain"></a>Mainchain</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset4_sidechain">
<div class="listingblock">
<div class="title">Creating an encrypted key on a sidechain node</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">sidechain_client&gt; lisk.cryptography.encrypt.stringifyEncryptedMessage(await lisk.cryptography.encrypt.encryptMessageWithPassword('0d7501d3d5c9accaefb3c0b6a569473b59391ae406f6324f98fa6dd70e119368a6454f898d3b82c41b158206c72ecfe917a1071c8084b496a0c5867afc10830b', 'lisk'))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Encrypted key</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">'kdf=argon2id&amp;cipher=aes-256-gcm&amp;version=1&amp;ciphertext=57db80457db93a1abeceee5c6f951ca04579c447a06f45cf5e8b5398e207a26da53a6b191a02c479ede455950eacb48f32d6609f2cd4b5a1a51e895b210b587ef046e6c3151ef2212efd0808b45328742d09a279e7d667f1670ff02a2fd5c91f4afd0a08efb8e6e90b0b11e93b15da8daaeea543a0ff54f3dd51c66cac3b04c6&amp;mac=7822258b12e0c787f5bd622c562914438a9d74ca1e11e11b840f3001a678b04f&amp;salt=d4d051a123326ad2b82c022603e790b6&amp;iv=0bb9e76cd5163d6c5af9d89d&amp;tag=fbcdb355b5135d48df948841de5fcdf5&amp;iterations=1&amp;parallelism=4&amp;memorySize=2024'</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset4_mainchain">
<div class="listingblock">
<div class="title">Creating an encrypted key on a mainchain node</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core&gt; lisk.cryptography.encrypt.stringifyEncryptedMessage(await lisk.cryptography.encrypt.encryptMessageWithPassword('0d7501d3d5c9accaefb3c0b6a569473b59391ae406f6324f98fa6dd70e119368a6454f898d3b82c41b158206c72ecfe917a1071c8084b496a0c5867afc10830b', 'lisk'))</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Encrypted key</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">'kdf=argon2id&amp;cipher=aes-256-gcm&amp;version=1&amp;ciphertext=f4dd49061a128d06184308a235311dc487737b7c4a688409224ed39b7d8e76a6cdd814500dd7221297ed122d277af8ba46d42ebd340d228fe6c77132543b303c97ab89e151ecd9f2739284c60c66ab68c0f3531ffc6cbdedad2acc431e8d8e48dffd7c7eda3dfe5f404e00ef7ae825d34da7787bf792b6ecb84ea1bfe10e9ca6&amp;mac=363141e645d5564a150a2634060bd273276b0c987a65cf64513a7871565c3f2a&amp;salt=93213d2d1c11e91d64771c173f8bf3c1&amp;iv=0132fa14a4ed289deb07ee11&amp;tag=7b64ed4a0453302d54bba29d4f7a68ea&amp;iterations=1&amp;parallelism=4&amp;memorySize=2024'</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>encryptMessageWithPassword</code> function will return an encrypted key, which should be added to the config of the blockchain.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="prepare-config-for-chain-connector-plugin"><a class="anchor" href="#prepare-config-for-chain-connector-plugin"></a>3.2. Prepare config for chain connector plugin</h3>
<div class="paragraph">
<p>Each node whether a mainchain or a sidechain expects mandatory configurations as shown in the following snippets.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset5_sidechain"></a>Sidechain</p>
</li>
<li>
<p><a id="tabset5_mainchain"></a>Mainchain</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset5_sidechain">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"chainConnector": {
    "encryptedPrivateKey": "kdf=argon2id&amp;cipher=aes-256-gcm&amp;version=1&amp;ciphertext=57db80457db93a1abeceee5c6f951ca04579c447a06f45cf5e8b5398e207a26da53a6b191a02c479ede455950eacb48f32d6609f2cd4b5a1a51e895b210b587ef046e6c3151ef2212efd0808b45328742d09a279e7d667f1670ff02a2fd5c91f4afd0a08efb8e6e90b0b11e93b15da8daaeea543a0ff54f3dd51c66cac3b04c6&amp;mac=7822258b12e0c787f5bd622c562914438a9d74ca1e11e11b840f3001a678b04f&amp;salt=d4d051a123326ad2b82c022603e790b6&amp;iv=0bb9e76cd5163d6c5af9d89d&amp;tag=fbcdb355b5135d48df948841de5fcdf5&amp;iterations=1&amp;parallelism=4&amp;memorySize=2024",
    "ccuFee": "800000",
    "receivingChainIPCPath": "~/.lisk/lisk-core"
    "receivingChainID": "04000000"
}</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset5_mainchain">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">"chainConnector": {
    "encryptedPrivateKey": "kdf=argon2id&amp;cipher=aes-256-gcm&amp;version=1&amp;ciphertext=f4dd49061a128d06184308a235311dc487737b7c4a688409224ed39b7d8e76a6cdd814500dd7221297ed122d277af8ba46d42ebd340d228fe6c77132543b303c97ab89e151ecd9f2739284c60c66ab68c0f3531ffc6cbdedad2acc431e8d8e48dffd7c7eda3dfe5f404e00ef7ae825d34da7787bf792b6ecb84ea1bfe10e9ca6&amp;mac=363141e645d5564a150a2634060bd273276b0c987a65cf64513a7871565c3f2a&amp;salt=93213d2d1c11e91d64771c173f8bf3c1&amp;iv=0132fa14a4ed289deb07ee11&amp;tag=7b64ed4a0453302d54bba29d4f7a68ea&amp;iterations=1&amp;parallelism=4&amp;memorySize=2024",
    "ccuFee": "800000",
    "receivingChainIPCPath": "~/.lisk/relayer",
    "receivingChainID": "04000002"
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Once the configuration is ready, update the <strong>config.json</strong> file of the respective client such as mainchain or sidechain.</p>
</div>
</div>
<div class="sect2">
<h3 id="register-plugin"><a class="anchor" href="#register-plugin"></a>3.3. Register plugin</h3>
<div class="paragraph">
<p>Once the <strong>config.json</strong> has been updated, it is required to register the plugin with the client.
The process differs for both sidechain and mainchain.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset6_sidechain"></a>Sidechain</p>
</li>
<li>
<p><a id="tabset6_mainchain"></a>Mainchain</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset6_sidechain">
<div class="paragraph">
<p>On a sidechain, the plugin can be enabled using the <code>--enable-chain-connector-plugin</code> flag whilst starting the blockchain client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./bin/run start --enable-chain-connector-plugin --overwrite-config</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, the <strong>plugins.ts</strong> file of the client can be updated to have the following options:</p>
</div>
<div class="listingblock">
<div class="title">sidechain_client/src/app/plugins.ts</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Application } from 'lisk-sdk';
// Import the 'ChainConnectorPlugin'
import { ChainConnectorPlugin } from '@liskhq/lisk-framework-chain-connector-plugin';

export const registerPlugins = (app: Application): void =&gt; {
    // Register the ChainConnectorPlugin with the app
    app.registerPlugin(new ChainConnectorPlugin());
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>The client must be rebuilt to entertain the changes to the code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm run build</code></pre>
</div>
</div>
<div class="paragraph">
<p>The client can then be started with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">./bin/run start --overwrite-config</code></pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset6_mainchain">
<div class="paragraph">
<p>On a mainchain, the plugin can be enabled using the <code>--enable-chain-connector-plugin</code> flag whilst starting the blockchain client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">lisk-core start --network alphanet --enable-chain-connector-plugin --overwrite-config</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Since the config of the chain is updated during the process, the node operator must update the existing config with the <code>--overwrite-config</code> flag.</p>
</div>
</div>
<div class="sect2">
<h3 id="result"><a class="anchor" href="#result"></a>3.4. Result</h3>
<div class="paragraph">
<p>Once the client is running, the node operators should see the following log messages, depending on the type of node.</p>
</div>
<div class="tabset is-loading">
<div class="ulist tabs">
<ul>
<li>
<p><a id="tabset7_sidechain"></a>Sidechain</p>
</li>
<li>
<p><a id="tabset7_mainchain"></a>Mainchain</p>
</li>
</ul>
</div>
<div class="content">
<div class="tab-pane" aria-labelledby="tabset7_sidechain">
<div class="listingblock">
<div class="content">
<pre>2023-03-17T14:42:30.426Z INFO XYZ.local application 96733 No valid CCU can be generated for the height: 58</pre>
</div>
</div>
</div>
<div class="tab-pane" aria-labelledby="tabset7_mainchain">
<div class="listingblock">
<div class="content">
<pre>2023-03-17T14:42:30.426Z INFO XYZ.local plugin_chainConnector 96899 No valid CCU can be generated for the height: 58</pre>
</div>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Since we just set up a relayer node and haven&#8217;t sent a CCU/CCM, the aforementioned log messages are expected.</p>
</div>
<div class="paragraph">
<p>The messages suggest that the blockchain doesn&#8217;t have any finalized block height for which we can create a certificate, or there are no pending CCUs/CCMs to send across the chain.</p>
</div>
<div class="paragraph">
<p>The relayer node will start relaying CCUs to the receiving chain, once the finalized height is reached.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Once the plugin is enabled, it is essential to invoke the <a href="../api/plugin-rpc-api/chain-connector-api.html#chainconnector_authorize" class="xref page">chainConnector_authorize</a> endpoint to authorize the signing and sending of CCUs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A node can also output various <strong>warnings</strong> or <strong>error</strong> messages as log output; the details of which can be seen in the following tables:</p>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<caption class="title">Table 2. Various log messages and their descriptions</caption>
<colgroup>
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Log message</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Warnings messages</strong>: The following log messages can be considered as warnings and they <strong>don&#8217;t require restarting a node or plugin</strong> to fix the underlying issue as such messages usually suggest problems with chain registration or <code>apiClient</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Sending chain is not registered to the receiving chain yet and has no chain data.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As the log suggests, the sending chain is not registered yet on the receiving chain but at the same time, all the data related to CCU creation is saved such as <code>blockheaders</code>, <code>aggregateCommits</code>, events containing CCM creation, proof of <code>outboxRootWitness</code> and <code>validatorsInfo</code>, etc.
For more information read <a href="https://github.com/LiskHQ/lips/blob/main/proposals/lip-0053.md#appendix" target="_blank" rel="noopener">LIP 53</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>No CCU generation is possible as the node is syncing.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In this scenario, the node is syncing with the network, hence, it cannot generate a CCU.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>No attempt to create CCU either due to provided ccuFrequency</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In this scenario, the data required for CCU creation is saved and only CCU creation is delayed due to the provided <code>ccuFrequency</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Receiving chain is not registered yet on the sending chain.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In this case, the plugin is running fine and saving data for CCU creation, however, it cannot yet create or send CCU as the user has not yet registered the receiving chain on their own chain.
For more information, read <a href="https://github.com/LiskHQ/lips/blob/main/proposals/lip-0043.md">LIP 43</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CCU cant be created as there are no pending CCMs for the last certificate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If no new certificate has been created since the last certificate and no pending CCMs are left then, no CCU can be created and the user needs to wait for the next certificate height on its sending chain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Not able to connect to receivingChainAPIClient. Trying again on next new block.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In this case, the plugin will try again on the next new block if the API issue is resolved to create/send a CCU.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Error occurred while submitting CCU for the blockHeader at height:</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The log message suggests that the CCU was created successfully but its submission failed for some reason.
In this case, the user needs to check the error attached to the log to debug further.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Error occurred while accessing receivingChainAPIClient but all data is saved on newBlock.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">This error occurs when <code>receivingChainAPIClient</code> is not working, the user needs to check the <code>receivingChainAPIClient</code> or <code>receivingChain</code> node if they are working properly or not once they see this error within the logs.
For example, <code>receivingChainWsURL</code> or <code>receivingChainIPCPath</code> provided by a user could be incorrect.
In this case, all the data is saved required for CCU creation which means when the user fixes <code>apiClient</code>, the plugin would still be able to create/send CCUs.</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock"><strong>Error messages</strong>: The following error-related logs should be fixed by the user and <strong>require a node restart</strong>.
In these cases, the plugin is usually missing the data required to create CCUs, and that usually happens when something goes wrong while saving data on the plugin.
Such errors also occur when the user enables the <code>config.registrationHeight</code> or the <code>height</code> after the height from where the plugin started looking for certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>No block header found for the last certified height ${lastCertificate.height}.</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">In this case, the plugin is looking at a different height and when it is unable to find a certificate, it logs out the aforementioned error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>No validatorsHash preimage data present for the given validatorsHash</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">As the error suggests, the node is unable to retrieve the <code>validatorHash</code> preimage at the given height.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>No validators data found for the given validatorsHash</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the node is unable to find data based on the given <code>validatorsHash</code> on the given height, it will log the aforementioned error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>No validators data found for the given last certificate height</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the node is unable to find data based on the given <code>last certificate height</code>, it will log the aforementioned error.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Possible ways to debug the case when the first CCU is not sent and the user sees the aforementioned errors are described below:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reset the node and start syncing from the height before <code>config.registrationHeight</code>.</p>
</li>
<li>
<p>Try to give a higher value to the <code>config.registrationHeight</code> property from where the plugin started storing data correctly, assuming that the chain of trust is maintained.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sometimes if the node is very busy with syncing over a long period of time, the plugin misses out on storing information from the new block event, which might lead to the aforementioned errors.
This should not usually happen, however, if it does then, the user must re-sync their node.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="reward-sharing.html">How to share block rewards</a></span>
  <span class="next"><a href="blockchain-reset.html">Resetting and snapshotting the blockchain</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>Â© 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../_/js/site.js" data-ui-root-path="../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/glossary.js"></script>
<script async src="../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../_/js/vendor/swagger-ui.js"></script>
<script async src="../_/js/vendor/component-versions.js"></script>
<script src="../_/js/vendor/custom.js"></script>

  </body>
</html>
