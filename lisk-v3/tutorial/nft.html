<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Non-fungible token (NFT) Tutorial :: Lisk documentation</title>
    <link rel="canonical" href="https://liskhq.github.io/lisk-docs/tutorial/nft.html">
    <link rel="prev" href="index.html">
    <link rel="next" href="srs.html">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../../_/css/dark-site.css">

<script>var uiRootPath = '../../_'</script>
<script src="../../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../.." class="lisk-logo"></a>
        <a href="../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://liskhq.github.io/lisk-docs">Lisk documentation</a>-->
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Documentation</button>
    <div class="component-menu">
        <a class="component" href="../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
        <a class="component is-current" href="../../index.html">Lisk Documentation</a>
        <a class="component" href="../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component" href="../../lisk-service/index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">lisk-v3</button>
  <div class="version-menu">
    <a class="version" href="../../tutorial/nft.html">default</a>
    <a class="version is-current" href="nft.html">lisk-v3</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Documentation</a></li>
    <li><a href="index.html">Tutorials</a></li>
    <li><a href="nft.html">Non-fungible token (NFT) Tutorial</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-docs/edit/docs-lisk-v3/docs/modules/ROOT/pages/tutorial/nft.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="ROOT" data-version="lisk-v3">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Documentation</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/index.html">Understand Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/architecture.html">SDK Architecture</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/block-life-cycle.html">Block life cycle</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/modules-assets.html">Modules and assets</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/plugins.html">Plugins</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/endpoints.html">RPC endpoints of a Lisk node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/reducers.html">Reducers</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../understand-blockchain/codec-schema.html">Codec &amp; schema</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/index.html">Lisk Protocol</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/accounts.html">Accounts</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/blocks.html">Blocks</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/consensus-algorithm.html">Consensus algorithm</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/network.html">Network</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/transactions.html">Transactions</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../understand-blockchain/lisk-protocol/appendix.html">Appendix</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../build-blockchain/index.html">Build Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-blockchain-app.html">Creating a new blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-module.html">Creating a new module</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-asset.html">Creating a new asset</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-genesis-block.html">How to create a new genesis block</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/create-plugin.html">Creating a new plugin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/configure-app.html">How to configure a blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/test-app.html">Testing the blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/using-dashboard.html">Using dashboard with the blockchain application</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/enable-faucet.html">How to enable a faucet for testing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../build-blockchain/launch-test-network.html">Launching a public test network</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../run-blockchain/index.html">Run Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/account-management.html">Managing accounts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/forging.html">Enabling forging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/blockchain-reset.html">Resetting and snapshotting the blockchain</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/forging-node-protection.html">Protecting a forging node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/non-forging-node-protection.html">Protecting a non-forging node</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../run-blockchain/logging.html">Managing logs</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../integrate-blockchain/index.html">Integrate Blockchain</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/calculating-min-fee.html">Calculating the minimum fee for a transaction</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/create-send-transactions.html">How to send a transaction to the network</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/create-tx-offline.html">Creating transactions and signing them offline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/encode-decode.html">Decoding &amp; encoding data</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../integrate-blockchain/create-user-interface.html">Creating a user interface</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Tutorials</a>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="nft.html">Non-fungible token (NFT) Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="srs.html">Social Recovery System (SRS) Tutorial</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="lns/index.html">Lisk Name Service (LNS) Tutorial</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lns/1-blockchain.html">Chapter 1: Blockchain</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lns/2-frontend.html">Chapter 2: Frontend</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lns/3-cli.html">Chapter 3: CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="lns/4-tests.html">Chapter 4: Tests</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-node-http.html">HTTP API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-node-rpc.html">RPC API for Lisk nodes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-service-http.html">Mainnet HTTP API (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-service-rpc.html">RPC endpoints (Lisk Service)</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../api/lisk-service-pubsub.html">Publish/Subscribe API (Lisk Service)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Products</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-sdk/v5/index.html">Lisk SDK</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-service/v0.6/index.html">Lisk Service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../lisk-core/v3/index.html">Lisk Core</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../bug-bounty-program.html">Lisk Bug Bounty Program</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../glossary.html">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Documentation</span>
    <span class="version">lisk-v3</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-core/index.html">4.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-core/v3/index.html">3.1.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-docs-manual/index.html">Lisk docs manual</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-docs-manual/index.html">0.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">default</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">lisk-v3</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-sdk/index.html">6.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-sdk/v5/index.html">5.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lisk-service/index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lisk-service/index.html">0.7 (latest)</a>
        </li>
        <li class="version">
          <a href="../../lisk-service/v0.6/index.html">0.6</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Non-fungible token (NFT) Tutorial</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>How to create a blockchain application that supports NFTs.
You will learn how to create a custom module that adds the feature to create and purchase NFTs in a blockchain application, and a custom plugin that provides additional NFT-related features.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The example app for this tutorial was build without bootstrapping via Lisk Commander, therefore the project setup and file structure are different in this tutorial.
If you wish to see an example how to easily bootstrap a blockchain application with the Lisk Commander, check out <a href="../build-blockchain/create-blockchain-app.html#bootstrapping-a-new-blockchain-application-with-lisk-commander" class="xref page">how to bootstrap the Hello World application</a>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For the <strong>full code example</strong> please see the <a href="https://github.com/LiskHQ/lisk-sdk-examples/tree/development/tutorials/nft" target="_blank" rel="noopener">NFT app on Github</a>.
</td>
</tr>
</table>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#fungible-vs-non-fungible-tokens">Fungible vs non-fungible tokens</a></li>
<li><a href="#nft-blockchain-overview">NFT blockchain overview</a></li>
<li><a href="#project-setup">1. Project setup</a></li>
<li><a href="#nft-related-functions">2. NFT related functions</a></li>
<li><a href="#transaction-assets">3. Transaction assets</a>
<ul class="sectlevel2">
<li><a href="#createnft-asset">3.1. CreateNFT asset</a></li>
<li><a href="#purchasenft-asset">3.2. PurchaseNFT asset</a></li>
<li><a href="#transfernft-asset">3.3. TransferNFT asset</a></li>
</ul>
</li>
<li><a href="#the-nft-module">4. The NFT module</a>
<ul class="sectlevel2">
<li><a href="#module-id-and-name">4.1. Module ID and name</a></li>
<li><a href="#the-account-schema">4.2. The account schema</a></li>
<li><a href="#importing-transaction-assets-into-the-module">4.3. Importing transaction assets into the module</a></li>
<li><a href="#actions">4.4. Actions</a></li>
</ul>
</li>
<li><a href="#the-nft-plugin">5. The NFT plugin</a>
<ul class="sectlevel2">
<li><a href="#database-related-functions">5.1. Database related functions</a></li>
<li><a href="#the-plugin-logic">5.2. The plugin logic</a></li>
</ul>
</li>
<li><a href="#registering-module-and-plugin">6. Registering module and plugin</a></li>
<li><a href="#frontend-application">7. Frontend application</a>
<ul class="sectlevel2">
<li><a href="#frontend-walkabout">7.1. Frontend walkabout</a></li>
<li><a href="#api-related-functions">7.2. API related functions</a></li>
<li><a href="#functions-for-creating-transactions">7.3. Functions for creating transactions</a></li>
<li><a href="#dialogs">7.4. Dialogs</a></li>
<li><a href="#components">7.5. Components</a></li>
</ul>
</li>
<li><a href="#summary">Summary</a></li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="fungible-vs-non-fungible-tokens"><a class="anchor" href="#fungible-vs-non-fungible-tokens"></a>Fungible vs non-fungible tokens</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"></th>
<th class="tableblock halign-left valign-top">Fungible tokens</th>
<th class="tableblock halign-left valign-top">Non-fungible tokens</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tokens that can be readily interchanged with each other.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Each token has unique characteristics which make it special.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Characteristics</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Not unique.</p>
</li>
<li>
<p>Divisible.</p>
</li>
<li>
<p>Mutually interchangeable.</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Unique.</p>
</li>
<li>
<p>Indivisible.</p>
</li>
<li>
<p>Not mutually interchangeable.</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Examples</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Real world: Fiat currencies like the Dollar($) or Euro(â‚¬).</p>
</li>
<li>
<p>Digital tokens: Bitcoin(BTC) or Lisk(LSK).</p>
</li>
</ul>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="ulist">
<ul>
<li>
<p>Real world: Paintings or music.</p>
</li>
<li>
<p>Digital tokens: Crypto collectibles (e.g. Cryptokitties), event tickets, or other virtual assets.</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="nft-blockchain-overview"><a class="anchor" href="#nft-blockchain-overview"></a>NFT blockchain overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In our example, we will design the following characteristics for the blockchain application:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/nft-overview.png" alt="nft overview"></span></p>
</div>
<div class="paragraph">
<p>As can be seen in the above image, it is necessary to create the following components:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The NFT module (on-chain).</p>
</li>
<li>
<p>Three new transaction assets for the NFT module.</p>
</li>
<li>
<p>The NFT plugin (off-chain).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In addition to the blockchain application, we will also implement a <strong>frontend application</strong>, which allows us to interact with the blockchain application through a UI (User Interface), in the browser.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="project-setup"><a class="anchor" href="#project-setup"></a>1. Project setup</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new folder, which will contain all the files for the NFT app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir nft
mkdir nft/blockchain_app
cd nft/blockchain_app
npm init
npm i lisk-sdk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, create a new file <code>index.js</code> then copy and paste the following:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { Application, genesisBlockDevnet, configDevnet } = require('lisk-sdk');

const app = Application.defaultApplication(genesisBlockDevnet, configDevnet);

app
	.run()
	.then(() =&gt; app.logger.info('App started...'))
	.catch(error =&gt; {
		console.error('Faced error in application', error);
		process.exit(1);
	});</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code snippet creates a default blockchain application, which is configured for development purposes.
We will use this app as a basis for the NFT app and extend it with a module and a plugin in the following steps, to suit the desired use case.</p>
</div>
<div class="paragraph">
<p>Create a new folder <code>nft_module/</code> and inside a new file <code>index.js</code>:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir nft_module</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="nft-related-functions"><a class="anchor" href="#nft-related-functions"></a>2. NFT related functions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>For a better overview, create a new file <code>nft.js</code> in the <code>nft_module/</code> folder.</p>
</div>
<div class="paragraph">
<p>Now open <code>nft.js</code> and define the functions related to the NFT, which will be used in the assets and the module in the next steps.</p>
</div>
<div class="paragraph">
<p>The following functions are implemtented:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>registeredNFTTokensSchema</code>: The schema, how the NFTs are saved in the database.
Each NFT has the following properties:</p>
<div class="ulist">
<ul>
<li>
<p>id: The unique ID of the NFT.</p>
</li>
<li>
<p>value: The value of the NFT.</p>
</li>
<li>
<p>ownerAddress: The address of the owner of the NFT.</p>
</li>
<li>
<p>minPurchaseMargin: The minimum price increase, that should happen with every purchase of the NFT in percentage.</p>
</li>
<li>
<p>name: The NFT name.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>CHAIN_STATE_NFT_TOKENS</code>: The key under which the NFTs are saved in the database.</p>
</li>
<li>
<p><code>createNFTToken()</code>: Creates a new NFT based on the provided <code>name</code>, <code>ownerAddress</code>, <code>nonce</code>, <code>value</code>, and  <code>minPurchaseMargin</code>.
The ID for the NFT is created by combining and hashing the owner address and its' current nonce, which in combination always creates a unique value.
This way it is ensured that each newly created NFT has a unique ID in the database.</p>
</li>
<li>
<p><code>setAllNFTTokens()</code>: Saves provided NFTs to the database.</p>
</li>
<li>
<p><code>getAllNFTTokens()</code>: Retrieves NFTs from the database.</p>
</li>
<li>
<p><code>getAllNFTTokensAsJSON()</code>: Returns all NFTs from the database as JSON.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You may have noticed that we use special parameters in the functions, such as <code>stateStore</code> and <code>_dataAccess</code>.
These variables are available in the module and are explained in more detail in the coming sections <a href="#the-apply-function">The apply function</a> and <a href="#actions">Actions</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/nft.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { codec, cryptography } = require("lisk-sdk");

const registeredNFTTokensSchema = {
  $id: "lisk/nft/registeredTokens",
  type: "object",
  required: ["registeredNFTTokens"],
  properties: {
    registeredNFTTokens: {
      type: "array",
      fieldNumber: 1,
      items: {
        type: "object",
        required: ["id", "value", "ownerAddress", "minPurchaseMargin", "name"],
        properties: {
          id: {
            dataType: "bytes",
            fieldNumber: 1,
          },
          value: {
            dataType: "uint64",
            fieldNumber: 2,
          },
          ownerAddress: {
            dataType: "bytes",
            fieldNumber: 3,
          },
          minPurchaseMargin: {
            dataType: "uint32",
            fieldNumber: 4,
          },
          name: {
            dataType: "string",
            fieldNumber: 5,
          },
        },
      },
    },
  },
};

const CHAIN_STATE_NFT_TOKENS = "nft:registeredNFTTokens";

const createNFTToken = ({ name, ownerAddress, nonce, value, minPurchaseMargin }) =&gt; {
  const nonceBuffer = Buffer.alloc(8);
  nonceBuffer.writeBigInt64LE(nonce);
  // Create a unique seed by using a combination of the owner account address and the current nonce of the account.
  const seed = Buffer.concat([ownerAddress, nonceBuffer]);
  const id = cryptography.hash(seed);

  return {
    id,
    minPurchaseMargin,
    name,
    ownerAddress,
    value,
  };
};

const getAllNFTTokens = async (stateStore) =&gt; {
  const registeredTokensBuffer = await stateStore.chain.get(
    CHAIN_STATE_NFT_TOKENS
  );
  if (!registeredTokensBuffer) {
    return [];
  }

  const registeredTokens = codec.decode(
    registeredNFTTokensSchema,
    registeredTokensBuffer
  );

  return registeredTokens.registeredNFTTokens;
};

const getAllNFTTokensAsJSON = async (dataAccess) =&gt; {
  const registeredTokensBuffer = await dataAccess.getChainState(
    CHAIN_STATE_NFT_TOKENS
  );

  if (!registeredTokensBuffer) {
    return [];
  }

  const registeredTokens = codec.decode(
    registeredNFTTokensSchema,
    registeredTokensBuffer
  );

  return codec.toJSON(registeredNFTTokensSchema, registeredTokens)
    .registeredNFTTokens;
};

const setAllNFTTokens = async (stateStore, NFTTokens) =&gt; {
  const registeredTokens = {
    registeredNFTTokens: NFTTokens.sort((a, b) =&gt; a.id.compare(b.id)),
  };

  await stateStore.chain.set(
    CHAIN_STATE_NFT_TOKENS,
    codec.encode(registeredNFTTokensSchema, registeredTokens)
  );
};

module.exports = {
  registeredNFTTokensSchema,
  CHAIN_STATE_NFT_TOKENS,
  getAllNFTTokens,
  setAllNFTTokens,
  getAllNFTTokensAsJSON,
  createNFTToken,
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="transaction-assets"><a class="anchor" href="#transaction-assets"></a>3. Transaction assets</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The user shall have the ability to create, purchase, and transfer NFTs in the network.
To do this, we create the corresponding transaction assets for the NFT module.
These transaction assets each define both the asset schema for the transaction data, and the logic, which determine how this data is applied and stored in the database.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir transactions <i class="conum" data-value="1"></i><b>(1)</b>
cd transactions/</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Create a new folder <code>transactions/</code>, which will contain the files for the transaction assets.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="createnft-asset"><a class="anchor" href="#createnft-asset"></a>3.1. CreateNFT asset</h3>
<div class="paragraph">
<p>Create a new file <code>create_nft_asset.js</code> inside the newly created <code>transactions/</code> folder.</p>
</div>
<div class="paragraph">
<p>Now open the file and copy and paste the code below:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/create_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");

// extend base asset to implement your custom asset
class CreateNFTAsset extends BaseAsset { <i class="conum" data-value="1"></i><b>(1)</b>

}

module.exports = CreateNFTAsset; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Extend from the base asset to implement a custom asset.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Export the asset, so it can be imported later into the custom module.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now define all required properties for the transaction asset one after another.</p>
</div>
<div class="sect3">
<h4 id="asset-id-and-name"><a class="anchor" href="#asset-id-and-name"></a>3.1.1. Asset ID and name</h4>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/create_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");

// extend base asset to implement your custom asset
class CreateNFTAsset extends BaseAsset {
  // define unique asset name and id
  name = "createNFT"; <i class="conum" data-value="1"></i><b>(1)</b>
  id = 0; <i class="conum" data-value="2"></i><b>(2)</b>
}

module.exports = CreateNFTAsset;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the asset name to <code>"createNFT"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the asset id to <code>0</code>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="asset-schema"><a class="anchor" href="#asset-schema"></a>3.1.2. Asset schema</h4>
<div class="paragraph">
<p>The asset schema describes the required datatypes and the structure of the data in the respective transaction asset.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
For more information how schemas are used in the application, check out the <a href="../understand-blockchain/codec-schema.html" class="xref page">Codec &amp; schema</a> reference.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For creating a new NFT, we require the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Name: The name of the NFT.</p>
</li>
<li>
<p>Initial value: The inital value of the NFT.</p>
</li>
<li>
<p>Minimal purchase margin: The % value of the initial value, that is added to the initial value when purchasing the NFT.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Therefore, create the schema as described below:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/create_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");

// extend base asset to implement your custom asset
class CreateNFTAsset extends BaseAsset {
  // define unique asset name and id
  name = "createNFT";
  id = 0;
  // define asset schema for serialization
  schema = {
    $id: "lisk/nft/create",
    type: "object",
    required: ["minPurchaseMargin", "initValue", "name"],
    properties: {
      minPurchaseMargin: {
        dataType: "uint32",
        fieldNumber: 1,
      },
      initValue: {
        dataType: "uint64",
        fieldNumber: 2,
      },
      name: {
        dataType: "string",
        fieldNumber: 3,
      },
    },
  };
}

module.exports = CreateNFTAsset;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that the <code>schema</code> defines what data to expect, we can use the <code>validate()</code> function to validate the received data of the transaction asset before applying it.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-validate-function"><a class="anchor" href="#the-validate-function"></a>3.1.3. The <code>validate()</code> function</h4>
<div class="paragraph">
<p>Before the data in the transaction asset is applied in the next step, use the <code>validate()</code> function to verify the correctness of the submitted data.</p>
</div>
<div class="paragraph">
<p>The <code>validate()</code> function has access to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>asset</code>: the posted transaction asset.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/create_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");

// extend base asset to implement your custom asset
class CreateNFTAsset extends BaseAsset {
  // define unique asset name and id
  name = "createNFT";
  id = 0;
  // define asset schema for serialization
  schema = {
    $id: "lisk/nft/create",
    type: "object",
    required: ["minPurchaseMargin", "initValue", "name"],
    properties: {
      minPurchaseMargin: {
        dataType: "uint32",
        fieldNumber: 1,
      },
      initValue: {
        dataType: "uint64",
        fieldNumber: 2,
      },
      name: {
        dataType: "string",
        fieldNumber: 3,
      },
    },
  };

  // verify data in the transaction asset
  validate({asset}) {
    if (asset.initValue &lt;= 0) { <i class="conum" data-value="1"></i><b>(1)</b>
      throw new Error("NFT init value is too low.");
    } else if (asset.minPurchaseMargin &lt; 0 || asset.minPurchaseMargin &gt; 100) { <i class="conum" data-value="2"></i><b>(2)</b>
      throw new Error("The NFT minimum purchase value needs to be between 0-100.");
    }
  };
}

module.exports = CreateNFTAsset;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Verifies that the initial value of the NFT is greater than 0.
If not, the transaction is not applied, and a corresponding error is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Verifies that the minimal purchase margin is a value between 0 and 100.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="the-apply-function"><a class="anchor" href="#the-apply-function"></a>3.1.4. The apply function</h4>
<div class="paragraph">
<p>The <code>apply()</code> function has access to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>asset</code>: the posted transaction asset.</p>
</li>
<li>
<p><code>stateStore</code>: The <a href="../../lisk-sdk/v5/references/lisk-elements/chain.html#state-store" class="xref page">state store</a> is a data structure that holds a temporary state while processing a block.
It is used here to get and set certain data from and to the database.</p>
</li>
<li>
<p><code>reducerHandler</code>: Allows the user to utilize reducer functions of other modules inside the <code>apply()</code> function.</p>
</li>
<li>
<p><code>transaction</code>: the complete transaction object.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/create_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");
const {
  getAllNFTTokens,
  setAllNFTTokens,
  createNFTToken,
} = require("../nft"); <i class="conum" data-value="1"></i><b>(1)</b>

// extend base asset to implement your custom asset
class CreateNFTAsset extends BaseAsset {
  // define unique asset name and id
  name = "createNFT";
  id = 0;
  // define asset schema for serialization
  schema = {
    $id: "lisk/nft/create",
    type: "object",
    required: ["minPurchaseMargin", "initValue", "name"],
    properties: {
      minPurchaseMargin: {
        dataType: "uint32",
        fieldNumber: 1,
      },
      initValue: {
        dataType: "uint64",
        fieldNumber: 2,
      },
      name: {
        dataType: "string",
        fieldNumber: 3,
      },
    },
  };

  // verify data in the transaction asset
  validate({asset}) {
    if (asset.initValue &lt;= 0) {
      throw new Error("The NFT init value is too low.");
    } else if (asset.minPurchaseMargin &lt; 0 || asset.minPurchaseMargin &gt; 100) {
      throw new Error("The NFT minimum purchase value needs to be between 0-100.");
    }
  };

  async apply({ asset, stateStore, reducerHandler, transaction }) {
    // create NFT <i class="conum" data-value="2"></i><b>(2)</b>
    const senderAddress = transaction.senderAddress;
    const senderAccount = await stateStore.account.get(senderAddress);
    const nftToken = createNFTToken({
      name: asset.name,
      ownerAddress: senderAddress,
      nonce: transaction.nonce,
      value: asset.initValue,
      minPurchaseMargin: asset.minPurchaseMargin,
    });

    // update sender account with unique NFT ID <i class="conum" data-value="3"></i><b>(3)</b>
    senderAccount.nft.ownNFTs.push(nftToken.id);
    await stateStore.account.set(senderAddress, senderAccount);

    // debit tokens from sender account to create an NFT <i class="conum" data-value="4"></i><b>(4)</b>
    await reducerHandler.invoke("token:debit", {
      address: senderAddress,
      amount: asset.initValue,
    });

    // save NFTs <i class="conum" data-value="5"></i><b>(5)</b>
    const allTokens = await getAllNFTTokens(stateStore);
    allTokens.push(nftToken);
    await setAllNFTTokens(stateStore, allTokens);
  }
}

module.exports = CreateNFTAsset;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Import <code>getAllNFTTokens</code>, <code>setAllNFTTokens</code> and <code>createNFTToken</code> from the <code>nft.js</code> file.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create the NFT based on the asset data and the sender address of the transaction.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Push the ID of the newly created NFT into the sender account and save the updated sender account in the database.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Debit the initial value of the NFT from the sender account.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Push the newly created NFT into the list of all NFTs and save it in the database.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="purchasenft-asset"><a class="anchor" href="#purchasenft-asset"></a>3.2. PurchaseNFT asset</h3>
<div class="paragraph">
<p>Create a new file <code>purchase_nft_asset.js</code> inside the <code>transactions/</code> folder.</p>
</div>
<div class="paragraph">
<p>Analog to the implementation of the <code>createNFT</code> asset, create the <code>purchaseNFT</code> asset by pasting the snippet below.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The validation of the asset inputs is done in the <code>apply()</code> function, as it is necessary to access the database in order to validate the transaction inputs.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/purchase_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");
const { getAllNFTTokens, setAllNFTTokens } = require("../nft");

// extend base asset to implement your custom asset
class PurchaseNFTAsset extends BaseAsset {
  // define unique asset name and id
  name = "purchaseNFT";
  id = 1;
  // define asset schema for serialization
  schema = {
    $id: "lisk/nft/purchase",
    type: "object",
    required: ["nftId", "purchaseValue", "name"],
    properties: {
      nftId: {
        dataType: "bytes",
        fieldNumber: 1,
      },
      purchaseValue: {
        dataType: "uint64",
        fieldNumber: 2,
      },
      name: {
        dataType: "string",
        fieldNumber: 3,
      },
    },
  };

  async apply({ asset, stateStore, reducerHandler, transaction }) {
    // verify if purchasing nft exists <i class="conum" data-value="1"></i><b>(1)</b>
    const nftTokens = await getAllNFTTokens(stateStore);
    const nftTokenIndex = nftTokens.findIndex((t) =&gt; t.id.equals(asset.nftId));

    if (nftTokenIndex &lt; 0) {
      throw new Error("Token id not found");
    }
    // verify if minimum nft purchasing condition met <i class="conum" data-value="2"></i><b>(2)</b>
    const token = nftTokens[nftTokenIndex];
    const tokenOwner = await stateStore.account.get(token.ownerAddress);
    const tokenOwnerAddress = tokenOwner.address;

    if (token &amp;&amp; token.minPurchaseMargin === 0) {
      throw new Error("This NFT can not be purchased");
    }

    const tokenCurrentValue = token.value;
    const tokenMinPurchaseValue =
      tokenCurrentValue +
      (tokenCurrentValue * BigInt(token.minPurchaseMargin)) / BigInt(100);
    const purchaseValue = asset.purchaseValue;

    if (tokenMinPurchaseValue &gt; purchaseValue) {
      throw new Error("Token can not be purchased. Purchase value is too low. Minimum value: " + tokenMinPurchaseValue);
    }

    // remove nft from owner account <i class="conum" data-value="3"></i><b>(3)</b>
    const purchaserAddress = transaction.senderAddress;
    const purchaserAccount = await stateStore.account.get(purchaserAddress);

    const ownerTokenIndex = tokenOwner.nft.ownNFTs.findIndex((a) =&gt;
      a.equals(token.id)
    );
    tokenOwner.nft.ownNFTs.splice(ownerTokenIndex, 1);
    await stateStore.account.set(tokenOwnerAddress, tokenOwner);

    // add nft to purchaser account <i class="conum" data-value="4"></i><b>(4)</b>
    purchaserAccount.nft.ownNFTs.push(token.id);
    await stateStore.account.set(purchaserAddress, purchaserAccount);

    token.ownerAddress = purchaserAddress;
    token.value = purchaseValue;
    nftTokens[nftTokenIndex] = token;
    await setAllNFTTokens(stateStore, nftTokens);

    // debit LSK tokens from purchaser account <i class="conum" data-value="5"></i><b>(5)</b>
    await reducerHandler.invoke("token:debit", {
      address: purchaserAddress,
      amount: purchaseValue,
    });

    // credit LSK tokens to purchaser account <i class="conum" data-value="6"></i><b>(6)</b>
    await reducerHandler.invoke("token:credit", {
      address: tokenOwnerAddress,
      amount: purchaseValue,
    });
  }
}

module.exports = PurchaseNFTAsset;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Verify, that the NFT which is purchased exists in the database.
To do this, we request all NFTs with <code>getAllNFTTokens()</code> and search inside the returned list for the desired NFT ID.
If no NFT is found, a corresponding error is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If the NFT was found, it is retrieved from the database, and the minimum purchase value of the token is compared to the purchase value in the transaction asset.
If the purchase value in the transaction asset is equal or higher than the minimal purchase value of the NFT, the NFT can be purchased.
Otherwise, an error will be thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Remove the NFT from the current owner account.
The <code>StateStore</code> is used here to retrieve the owner account data from the database and later to update the owner account in the database, after the token ID has been removed from their owned tokens.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Add the NFT to the account of the purchaser.
The <code>StateStore</code> is used again to update the purchaser account in the database, after the token ID has been added to their owned tokens.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Debit the purchase value from the purchasers account.
We use the <code>reducerHandler</code> here and invoke <code>token:debit</code> from <a href="../../lisk-sdk/v5/modules/token-module.html" class="xref page">Token module</a> which allows us to conveniently debit tokens from an account.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Credit the purchase value to the owners account.
We use the <code>reducerHandler</code> here and invoke <code>token:debit</code> from <a href="../../lisk-sdk/v5/modules/token-module.html" class="xref page">Token module</a> which allows us to conveniently credit tokens to an account.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="transfernft-asset"><a class="anchor" href="#transfernft-asset"></a>3.3. TransferNFT asset</h3>
<div class="paragraph">
<p>The last transaction asset that we want to implement in this tutorial is the <code>transferNFT</code> transaction.</p>
</div>
<div class="paragraph">
<p>Create a new file <code>transfer_nft_asset.js</code> inside the <code>transactions/</code> folder.
Create the <code>transferNFT</code> asset by pasting the snippet below.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/transactions/transfer_nft_asset.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseAsset } = require("lisk-sdk");
const { getAllNFTTokens, setAllNFTTokens } = require("../nft");

// 1.extend base asset to implement your custom asset
class TransferNFTAsset extends BaseAsset {
  // 2.define unique asset name and id
  name = "transferNFT";
  id = 2;
  // 3.define asset schema for serialization
  schema = {
    $id: "lisk/nft/transfer",
    type: "object",
    required: ["nftId", "recipient"],
    properties: {
      nftId: {
        dataType: "bytes",
        fieldNumber: 1,
      },
      recipient: {
        dataType: "bytes",
        fieldNumber: 2,
      },
      name: {
        dataType: "string",
        fieldNumber: 3,
      },
    },
  };

  async apply({ asset, stateStore, transaction }) {
    const nftTokens = await getAllNFTTokens(stateStore);
    const nftTokenIndex = nftTokens.findIndex((t) =&gt; t.id.equals(asset.nftId));

    // 4.verify if the nft exists <i class="conum" data-value="1"></i><b>(1)</b>
    if (nftTokenIndex &lt; 0) {
      throw new Error("Token id not found");
    }
    const token = nftTokens[nftTokenIndex];
    const tokenOwnerAddress = token.ownerAddress;
    const senderAddress = transaction.senderAddress;
    // 5.verify that the sender owns the nft <i class="conum" data-value="2"></i><b>(2)</b>

    if (!tokenOwnerAddress.equals(senderAddress)) {
      throw new Error("An NFT can only be transferred by the owner of the NFT.");
    }

    const tokenOwner = await stateStore.account.get(tokenOwnerAddress);
    // 6.remove nft from the owner account <i class="conum" data-value="3"></i><b>(3)</b>
    const ownerTokenIndex = tokenOwner.nft.ownNFTs.findIndex((a) =&gt;
      a.equals(token.id)
    );
    tokenOwner.nft.ownNFTs.splice(ownerTokenIndex, 1);
    await stateStore.account.set(tokenOwnerAddress, tokenOwner);

    // 7.add nft to the recipient account <i class="conum" data-value="4"></i><b>(4)</b>
    const recipientAddress = asset.recipient;
    const recipientAccount = await stateStore.account.get(recipientAddress);
    recipientAccount.nft.ownNFTs.push(token.id);
    await stateStore.account.set(recipientAddress, recipientAccount);

    token.ownerAddress = recipientAddress;
    nftTokens[nftTokenIndex] = token;
    await setAllNFTTokens(stateStore, nftTokens);
  }
}

module.exports = TransferNFTAsset;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Verify, that the NFT which is purchased exists in the database.
To do this, we request all NFTs with <code>getAllNFTTokens()</code> and search inside the returned list for the desired NFT ID.
If no NFT is found, a corresponding error is thrown.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Verify, that the account who wants to transfer the NFT actually owns the NFT.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Remove the NFT from the current owner account.
The <code>StateStore</code> is used here to retrieve the owner account data from the database and later to update the owner account in the database, after the token ID has been removed from their owned tokens.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Add the NFT to the account of the recipient.
The <code>StateStore</code> is used again to update the recipient account in the database, after the token ID has been added to their owned tokens.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-nft-module"><a class="anchor" href="#the-nft-module"></a>4. The NFT module</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Inside the <code>nft_module/</code> folder, create a new file <code>index.js</code>.</p>
</div>
<div class="paragraph">
<p>Open <code>index.js</code> and create the skeleton, which will contain all parts of the NFT module:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule } = require("lisk-sdk");

class NFTModule extends BaseModule { <i class="conum" data-value="1"></i><b>(1)</b>

}

module.exports = { NFTModule }; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Extend from the base module to implement a custom module.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Export the module, so it can be imported into the application later.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now define all required properties for the module one after another.</p>
</div>
<div class="sect2">
<h3 id="module-id-and-name"><a class="anchor" href="#module-id-and-name"></a>4.1. Module ID and name</h3>
<div class="paragraph">
<p>It is recommended to start with the easiest ones: defining the module name and ID.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule } = require("lisk-sdk");

class NFTModule extends BaseModule {
  public name = "nft"; <i class="conum" data-value="1"></i><b>(1)</b>
  public id = 1024; <i class="conum" data-value="2"></i><b>(2)</b>
}

module.exports = { NFTModule };</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the module name to <code>"nft"</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the module id to <code>1024</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The module ID has to be unique within the network.
The minimum value for it is <code>1000</code>, as the other IDs are reserved for future default modules of the <a href="../glossary.html#lisk-sdk" class="xref page">Lisk SDK</a>.
If the module ID is not unique, it will cause forks in the network.</p>
</div>
<div class="paragraph">
<p>The module name should be unique within the network as well, otherwise, it will lead to confusion.
For example, when subscribing to events or invoking actions of that module.</p>
</div>
</div>
<div class="sect2">
<h3 id="the-account-schema"><a class="anchor" href="#the-account-schema"></a>4.2. The account schema</h3>
<div class="paragraph">
<p>Next, define the account schema.
This defines the properties that are added to each network account by the module if it is registered with the application later.</p>
</div>
<div class="paragraph">
<p>Here, we expect each account to have a property <code>ownNFTs</code>, which is an array of NFTs which the account owns.
By default, it is empty.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule } = require("lisk-sdk");

// Extend base module to implement your custom module
class NFTModule extends BaseModule {
  public name = "nft";
  public id = 1024;
  public accountSchema = {
    type: "object",
    required: ["ownNFTs"],
    properties: {
      ownNFTs: {
        type: "array",
        fieldNumber: 1,
        items: {
          dataType: "bytes",
        },
      },
    },
    default: {
      ownNFTs: [],
    },
  };
}

module.exports = { NFTModule };</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="importing-transaction-assets-into-the-module"><a class="anchor" href="#importing-transaction-assets-into-the-module"></a>4.3. Importing transaction assets into the module</h3>
<div class="paragraph">
<p>Now, import the transactions which were created in section 2: <a href="#transaction-assets">Transaction assets</a> into the module.</p>
</div>
<div class="paragraph">
<p>Add them to the <code>transactionAssets</code> property as shown in the snippet below.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Best practice</div>
<div class="paragraph">
<p>It is good practice to name the imported transaction assets after their corresponding classname.</p>
</div>
<div class="paragraph">
<p>In this example: <code>CreateNFTAsset</code>, <code>PurchaseNFTAsset</code>, and <code>TransferNFTAsset</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule } = require("lisk-sdk");

const CreateNFTAsset = require("./transactions/create_nft_asset");
const PurchaseNFTAsset = require("./transactions/purchase_nft_asset");
const TransferNFTAsset = require("./transactions/transfer_nft_asset");

// Extend base module to implement your custom module
class NFTModule extends BaseModule {
  public name = "nft";
  public id = 1024;
  public accountSchema = {
    type: "object",
    required: ["ownNFTs"],
    properties: {
      ownNFTs: {
        type: "array",
        fieldNumber: 4,
        items: {
          dataType: "bytes",
        },
      },
    },
    default: {
      ownNFTs: [],
    },
  };
  // Add the transaction assets to the module
  public transactionAssets = [new CreateNFTAsset(), new PurchaseNFTAsset(), new TransferNFTAsset()];
}

module.exports = { NFTModule };</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="actions"><a class="anchor" href="#actions"></a>4.4. Actions</h3>
<div class="paragraph">
<p>The last remaining feature for the NFT module consists of creating the following action <code>getAllNFTTokens</code> which will allow the NFT plugin to retrieve a list of all existing NFT tokens later.</p>
</div>
<div class="paragraph">
<p>To implement it, we use the function <code>getAllNFTTokensAsJSON()</code>, which has been described in the section <a href="#nft-related-functions">NFT related functions</a>.</p>
</div>
<div class="paragraph">
<p>The variable <code>this._dataAccess</code> is passed as a parameter.
This variable is available throughout the module and is used in the <code>actions</code> to access data from the database.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_module/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BaseModule } = require("lisk-sdk");
const { getAllNFTTokensAsJSON } = require("./nft");

const CreateNFTAsset = require("./transactions/create_nft_asset");
const PurchaseNFTAsset = require("./transactions/purchase_nft_asset");
const TransferNFTAsset = require("./transactions/transfer_nft_asset");

// Extend from the base module to implement the NFT module
class NFTModule extends BaseModule {
  public name = "nft";
  public id = 1024;
  public accountSchema = {
    type: "object",
    required: ["ownNFTs"],
    properties: {
      ownNFTs: {
        type: "array",
        fieldNumber: 1,
        items: {
          dataType: "bytes",
        },
      },
    },
    default: {
      ownNFTs: [],
    },
  };
  public transactionAssets = [new CreateNFTAsset(), new PurchaseNFTAsset(), new TransferNFTAsset()];
  public actions = {
    // get all the registered NFT tokens from blockchain
    getAllNFTTokens: async () =&gt; getAllNFTTokensAsJSON(this._dataAccess),
  };
}

module.exports = { NFTModule };</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-nft-plugin"><a class="anchor" href="#the-nft-plugin"></a>5. The NFT plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that all on-chain logic for the NFTs is defined in the NFT module, let&#8217;s add a corresponding NFT plugin, which will handle the off-chain logic for the NFT app.</p>
</div>
<div class="paragraph">
<p>The NFT plugin shall provide an HTTP API that offers new endpoints for NFT related data from the blockchain.</p>
</div>
<div class="paragraph">
<p>Navigate out of the <code>nft_module</code> folder back into the <code>blockchain_app</code> folder.</p>
</div>
<div class="paragraph">
<p>If you haven&#8217;t done it yet, now add an author to your <code>package.json</code> file.
This information will be used later in the plugin.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">vim package.json</code></pre>
</div>
</div>
<div class="paragraph">
<p>Press <kbd>i</kbd> to switch to the insert mode.</p>
</div>
<div class="paragraph">
<p>Set the author name as a string of your choice and exit the insert mode by pressing <kbd>Esc</kbd>.</p>
</div>
<div class="paragraph">
<p>Save and exit the file by pressing <kbd>:wq</kbd> and <kbd>Enter</kbd>.</p>
</div>
<div class="paragraph">
<p>Create a new folder <code>nft_api_plugin/</code>.</p>
</div>
<div class="paragraph">
<p>Inside the <code>nft_api_plugin/</code> folder, create a new file <code>index.js</code>.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mkdir nft_api_plugin
touch nft_api_plugin/index.js</code></pre>
</div>
</div>
<div class="paragraph">
<p>Open <code>index.js</code> and create the skeleton, which will contain all parts of the NFT plugin:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_api_plugin/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const { BasePlugin } = require("lisk-sdk");
const pJSON = require("../package.json");

class NFTAPIPlugin extends BasePlugin { <i class="conum" data-value="1"></i><b>(1)</b>
  _server = undefined;
  _app = undefined;
  _channel = undefined;
  _db = undefined;
  _nodeInfo = undefined;

  static get alias() { <i class="conum" data-value="2"></i><b>(2)</b>
    return "NFTHttpApi";
  }

  static get info() { <i class="conum" data-value="3"></i><b>(3)</b>
    return {
      author: pJSON.author,
      version: pJSON.version,
      name: pJSON.name,
    };
  }

  get defaults() {
    return {};
  }

  get events() {
    return [];
  }

  get actions() {
    return {};
  }
}

module.exports = { NFTAPIPlugin }; <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Extend from the base plugin to implement a custom plugin.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set the alias for the plugin to <code>NFTHttpApi</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Set the meta information for the plugin.
Here, we use the data from the <code>package.json</code> file.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Export the plugin, so it can be imported into the application later.</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="database-related-functions"><a class="anchor" href="#database-related-functions"></a>5.1. Database related functions</h3>
<div class="paragraph">
<p>For an enhanced overview, first, create another file that will contain the functions related to the plugin database.
Here, we use a key-value store to save the data, similar to how the on-chain related data is saved in the default key-value store of the blockchain application.</p>
</div>
<div class="paragraph">
<p>Create a new file <code>db.js</code>.
Copy and paste the below snippet into the newly created file <code>db.js</code>.</p>
</div>
<div class="paragraph">
<p><code>db.js</code> contains various functions that take care of the following aspects:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>getDBInstance(dataPath,dbName)</code>: Creates a new key-value store <code>nft_plugin.db</code> for the NFT plugin.
The key-value store is used to store NFT related blockchain information of the plugin in a schema that makes it conveniently accessible for third party services.</p>
</li>
<li>
<p><code>saveTransactions(db, payload)</code>: Saves new transactions to the DB.</p>
</li>
<li>
<p><code>getAllTransactions(db, registeredSchema)</code>: Returns a list of all transactions from the DB.</p>
</li>
<li>
<p><code>getNFTHistory(db, dbKey)</code>: Returns the owner history of an NFT.</p>
</li>
<li>
<p><code>saveNFTHistory(db, decodedBlock, registeredModules)</code>: Filters for transactions of the NFT module in the decoded block.
Updates the NFT history based on the found NFT transaction in the block.
Saves the individual owner history for the corresponding NFTs in the database.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_api_plugin/db.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const fs_extra = require("fs-extra");
const os = require("os");
const path = require("path");
const { cryptography, codec, db } = require("lisk-sdk");

const DB_KEY_TRANSACTIONS = "nft:transactions"; <i class="conum" data-value="1"></i><b>(1)</b>
const CREATENFT_ASSET_ID = 0;
const TRANSFERNFT_ASSET_ID = 2;

// Schemas
const encodedTransactionSchema = { <i class="conum" data-value="2"></i><b>(2)</b>
  $id: 'nft/encoded/transactions',
  type: 'object',
  required: ['transactions'],
  properties: {
    transactions: {
      type: 'array',
      fieldNumber: 1,
      items: {
        dataType: 'bytes',
      },
    },
  },
};

const encodedNFTHistorySchema = { <i class="conum" data-value="3"></i><b>(3)</b>
  $id: 'nft/encoded/nftHistory',
  type: 'object',
  required: ['nftHistory'],
  properties: {
    nftHistory: {
      type: 'array',
      fieldNumber: 1,
      items: {
        dataType: 'bytes',
      },
    },
  },
};

const getDBInstance = async (dataPath = '~/.lisk/nft-app/', dbName = 'nft_plugin.db') =&gt; {
  const dirPath = path.join(dataPath.replace('~', os.homedir()), 'plugins/data', dbName);
  await fs_extra.ensureDir(dirPath);
  return new db.KVStore(dirPath);
};

const saveTransactions = async (db, payload) =&gt; {
  const savedTransactions = await getTransactions(db);
  const transactions = [...savedTransactions, ...payload];
  const encodedTransactions = codec.encode(encodedTransactionSchema, { transactions });
  await db.put(DB_KEY_TRANSACTIONS, encodedTransactions);
};

const getTransactions = async (db) =&gt; {
  try {
    const encodedTransactions = await db.get(DB_KEY_TRANSACTIONS);
    const { transactions } = codec.decode(encodedTransactionSchema, encodedTransactions);
    return transactions;
  }
  catch (error) {
    return [];
  }
};

const getAllTransactions = async (db, registeredSchema) =&gt; {
  const savedTransactions = await getTransactions(db);
  const transactions = [];
  for (const trx of savedTransactions) {
    transactions.push(decodeTransaction(trx, registeredSchema));
  }
  return transactions;
};

const getNFTHistory = async (db, dbKey) =&gt; {
  try {
    const encodedNFTHistory = await db.get(dbKey);
    const { nftHistory } = codec.decode(encodedNFTHistorySchema, encodedNFTHistory);

    return nftHistory;
  }
  catch (error) {
    return [];
  }
};

const saveNFTHistory = async (db, decodedBlock, registeredModules, channel) =&gt; {
  decodedBlock.payload.map(async trx =&gt; {
    const module = registeredModules.find(m =&gt; m.id === trx.moduleID);
    if (module.name === 'nft') {
      let dbKey, savedHistory, base32Address, nftHistory, encodedNFTHistory;
      if (trx.assetID === CREATENFT_ASSET_ID){
        channel.invoke('nft:getAllNFTTokens').then(async (val) =&gt; {
          for (let i = 0; i &lt; val.length; i++) {
            const senderAdress = cryptography.getAddressFromPublicKey(Buffer.from(trx.senderPublicKey, 'hex'));
            if (val[i].ownerAddress === senderAdress.toString('hex')) {
              dbKey = `nft:${val[i].id}`; <i class="conum" data-value="4"></i><b>(4)</b>
              savedHistory = await getNFTHistory(db, dbKey);
              if (savedHistory &amp;&amp; savedHistory.length &lt; 1) {
                base32Address = cryptography.getBase32AddressFromPublicKey(Buffer.from(trx.senderPublicKey, 'hex'), 'lsk');
                nftHistory = [Buffer.from(base32Address, 'binary'), ...savedHistory];
                encodedNFTHistory = codec.encode(encodedNFTHistorySchema, { nftHistory });
                await db.put(dbKey, encodedNFTHistory);
              }
            }
          };
        });
      } else {
        dbKey = `nft:${trx.asset.nftId}`; <i class="conum" data-value="5"></i><b>(5)</b>
        base32Address = (trx.assetID === TRANSFERNFT_ASSET_ID) ? cryptography.getBase32AddressFromAddress(Buffer.from(trx.asset.recipient, 'hex')) : cryptography.getBase32AddressFromPublicKey(Buffer.from(trx.senderPublicKey, 'hex'), 'lsk');
        savedHistory = await getNFTHistory(db, dbKey);
        nftHistory = [Buffer.from(base32Address, 'binary'), ...savedHistory];
        encodedNFTHistory = codec.encode(encodedNFTHistorySchema, { nftHistory });
        await db.put(dbKey, encodedNFTHistory);
      }
    }
  });
};

const decodeTransaction = (
  encodedTransaction,
  registeredSchema,
) =&gt; {
  const transaction = codec.decode(registeredSchema.transaction, encodedTransaction);
  const assetSchema = getTransactionAssetSchema(transaction, registeredSchema);
  const asset = codec.decode(assetSchema, transaction.asset);
  const id = cryptography.hash(encodedTransaction);
  return {
    ...codec.toJSON(registeredSchema.transaction, transaction),
    asset: codec.toJSON(assetSchema, asset),
    id: id.toString('hex'),
  };
};

const getTransactionAssetSchema = (
  transaction,
  registeredSchema,
) =&gt; {
  const txAssetSchema = registeredSchema.transactionsAssets.find(
    assetSchema =&gt;
      assetSchema.moduleID === transaction.moduleID &amp;&amp; assetSchema.assetID === transaction.assetID,
  );
  if (!txAssetSchema) {
    throw new Error(
      // eslint-disable-next-line @typescript-eslint/restrict-template-expressions
      `ModuleID: ${transaction.moduleID} AssetID: ${transaction.assetID} is not registered.`,
    );
  }
  return txAssetSchema.schema;
};

module.exports = {
  getDBInstance,
  getAllTransactions,
  getTransactions,
  saveTransactions,
  saveNFTHistory,
  getNFTHistory,
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>DB_KEY_TRANSACTIONS</code>: The key used to save the transactions in the key-value store.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><code>encodedTransactionSchema</code>: The schema how the transactions will be saved in the key-value store.
Here, we define a simple array which contains the encoded transactions.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><code>encodedNFTHistorySchema</code>: The schema how the owner history of an NFT is saved in the key-value store.
Here, we define a simple array, which contains the addresses of the current and all previous owners of the NFT.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><code>dbKey</code>: The key we use to save the owner history of a newly created NFT in the key-value store.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><code>dbKey</code>: The same key as in &lt;4&gt;, but it can be retrieved directly from the transaction asset for an existing NFT in the key-value store.</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="the-plugin-logic"><a class="anchor" href="#the-plugin-logic"></a>5.2. The plugin logic</h3>
<div class="paragraph">
<p>Now go back to <code>index.js</code> and implement the desired plugin logic.</p>
</div>
<div class="paragraph">
<p>The plugin shall provide the following additional data to the application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a list of all existing NFTs and their corresponding owner history.</p>
</li>
<li>
<p>details of an NFT including the owner history, by NFT ID.</p>
</li>
<li>
<p>a list of all transactions, including their module and asset IDs and the transaction asset.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create this data, the plugin needs to listen to events for new blocks in the blockchain application.
When a new block is created, the plugin checks if the block contains transactions and if so, saves them in the key-value store of the plugin.
In case the block contains transactions of the NFT module, it will also update the owner history of the NFTs in the key-value store.</p>
</div>
<div class="paragraph">
<p>We will then create an HTTP server and also create the required API endpoints to serve the data to the frontend application.</p>
</div>
<div class="paragraph">
<p>This will all be defined inside of the <code>load()</code> function.
All code inside the <code>load()</code> function is executed by the blockchain application when it loads the plugin.</p>
</div>
<div class="paragraph">
<p>The code in the <code>unload()</code> function is executed in complement by the blockchain application when it unloads the plugin.</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/nft_api_plugin/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">const express = require("express");
const cors = require("cors");
const { BasePlugin, codec } = require("lisk-sdk");
const pJSON = require("../package.json");
const { getDBInstance, getNFTHistory, getAllTransactions, saveNFTHistory, saveTransactions } = require("./db");

// 1.plugin can be a daemon/HTTP/Websocket service for off-chain processing
class NFTAPIPlugin extends BasePlugin {
  _server = undefined;
  _app = undefined;
  _channel = undefined;
  _db = undefined;
  _nodeInfo = undefined;

  static get alias() {
    return "NFTHttpApi";
  }

  static get info() {
    return {
      author: pJSON.author,
      version: pJSON.version,
      name: pJSON.name,
    };
  }

  get defaults() {
    return {};
  }

  get events() {
    return [];
  }

  get actions() {
    return {};
  }

  async load(channel) {
    this._app = express();
    this._channel = channel;
    this._db = await getDBInstance();
    this._nodeInfo = await this._channel.invoke("app:getNodeInfo");


    this._app.use(cors({ origin: "*", methods: ["GET", "POST", "PUT"] }));
    this._app.use(express.json());

    this._app.get("/api/nft_tokens", async (_req, res) =&gt; {
      const nftTokens = await this._channel.invoke("nft:getAllNFTTokens");
      const data = await Promise.all(nftTokens.map(async token =&gt; {
        const dbKey = `${token.name}`;
        let tokenHistory = await getNFTHistory(this._db, dbKey);
        tokenHistory = tokenHistory.map(h =&gt; h.toString('binary'));
        return {
          ...token,
          tokenHistory,
        }
      }));

      res.json({ data });
    });

    this._app.get("/api/nft_tokens/:id", async (req, res) =&gt; {
      const nftTokens = await this._channel.invoke("nft:getAllNFTTokens");
      const token = nftTokens.find((t) =&gt; t.id === req.params.id);
      const dbKey = `${token.name}`;
      let tokenHistory = await getNFTHistory(this._db, dbKey);
      tokenHistory = tokenHistory.map(h =&gt; h.toString('binary'));

      res.json({ data: { ...token, tokenHistory } });
    });

    this._app.get("/api/transactions", async (_req, res) =&gt; {
      const transactions = await getAllTransactions(this._db, this.schemas);

      const data = transactions.map(trx =&gt; {
        const module = this._nodeInfo.registeredModules.find(m =&gt; m.id === trx.moduleID);
        const asset = module.transactionAssets.find(a =&gt; a.id === trx.assetID);
        return {
          ...trx,
          ...trx.asset,
          moduleName: module.name,
          assetName: asset.name,
        }
      })
      res.json({ data });
    });

    this._subscribeToChannel();

    this._server = this._app.listen(8080, "0.0.0.0");
  }

  _subscribeToChannel() {
    // listen to application events and enrich blockchain data for UI/third party application
    this._channel.subscribe('app:block:new', async (data) =&gt; {
      const { block } = data;
      const { payload } = codec.decode(
        this.schemas.block,
        Buffer.from(block, 'hex'),
      );
      if (payload.length &gt; 0) {
        await saveTransactions(this._db, payload);
        const decodedBlock = this.codec.decodeBlock(block);
        // save NFT transaction history
        await saveNFTHistory(this._db, decodedBlock, this._nodeInfo.registeredModules, this._channel);
      }
    });
  }

  async unload() {
    // close http server
    await new Promise((resolve, reject) =&gt; {
      this._server.close((err) =&gt; {
        if (err) {
          reject(err);
          return;
        }
        resolve();
      });
    });
    // close database connection
    await this._db.close();
  }
}

module.exports = { NFTAPIPlugin };</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="registering-module-and-plugin"><a class="anchor" href="#registering-module-and-plugin"></a>6. Registering module and plugin</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now that the NFT module and plugin have been implemented, it is necessary to inform the blockchain application about them.</p>
</div>
<div class="paragraph">
<p>This is done by registering them with the blockchain application as shown below.</p>
</div>
<div class="paragraph">
<p>Open the <code>nft/blockchain_app/index.js</code> file again and copy and paste the following code:</p>
</div>
<div class="listingblock">
<div class="title">nft/blockchain_app/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">// 1.Import lisk sdk to create the blockchain application
const {
	Application,
	configDevnet,
	genesisBlockDevnet,
	HTTPAPIPlugin,
	utils,
} = require('lisk-sdk');

// 2.Import NFT module and Plugin
const { NFTModule } = require('./nft_module');
const { NFTAPIPlugin } = require('./nft_api_plugin');

// 3.Update the genesis block accounts to include NFT module attributes
genesisBlockDevnet.header.timestamp = 1605699440;
genesisBlockDevnet.header.asset.accounts = genesisBlockDevnet.header.asset.accounts.map(
	(a) =&gt;
		utils.objects.mergeDeep({}, a, {
			nft: {
				ownNFTs: [],
			},
		}),
);

// 4.Update application config to include unique label
// and communityIdentifier to mitigate transaction replay
const appConfig = utils.objects.mergeDeep({}, configDevnet, {
	label: 'nft-app',
	genesisConfig: { communityIdentifier: 'NFT' }, //In order to have a unique networkIdentifier
	logger: {
		consoleLogLevel: 'info',
	},
});

// 5.Initialize the application with genesis block and application config
const app = Application.defaultApplication(genesisBlockDevnet, appConfig);

// 6.Register custom NFT Module and Plugins
app.registerModule(NFTModule);
app.registerPlugin(HTTPAPIPlugin);
app.registerPlugin(NFTAPIPlugin);

// 7.Run the application
app
	.run()
	.then(() =&gt; console.info('NFT Blockchain running....'))
	.catch(console.error);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Save and close the <code>index.js</code>.</p>
</div>
<div class="paragraph">
<p>Now when the application is started again with <code>node index.js</code>, the blockchain application will load the newly created NFT module and the plugins, and the new features will become available to the blockchain application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When using the macOS, please ensure that a different port other than <code>5000</code> is used, for example, <code>8756</code> or <code>4724</code>, as port <code>5000</code> is already used by the latest macOS starting from v12 Monterey and above.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In the next step, we will build a simple React frontend, which allows us to interact with the blockchain application through the browser.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="frontend-application"><a class="anchor" href="#frontend-application"></a>7. Frontend application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The final part of the NFT application is the frontend application.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The development of the frontend application is completely flexible, and you can use any technology stack that you feel comfortable with.</p>
</div>
<div class="paragraph">
<p>In this example, we use React to build the client application.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This tutorial is mainly about explaining how to build with the Lisk SDK, therefore other parts of the frontend app are not explained in much detail here.
For example, you can find more information about how to build a React application in the <a href="https://reactjs.org/docs/getting-started.html" target="_blank" rel="noopener">official React documentation</a>.</p>
</div>
<div class="paragraph">
<p>For convenience, clone the <code>development</code> branch from the <code>lisk-sdk-examples</code> GitHub repository and use the prepared NFT frontend_app from the sdk examples.</p>
</div>
<div class="listingblock">
<div class="title">nft/</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">git clone https://github.com/LiskHQ/lisk-sdk-examples.git
mv lisk-sdk-examples/tutorials/nft/frontend_app frontend_app
rm -r ./lisk-sdk-examples
cd frontend_app
npm i</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point it is now possible to already try out the frontend and verify that the NFT blockchain application works as expected:</p>
</div>
<div class="paragraph">
<p>First, open a second terminal window and navigate to the <code>nft/blockchain_app</code>. Now start the blockchain application with <code>node index.js</code>, if it is not already running.</p>
</div>
<div class="paragraph">
<p>In the first terminal window, start the frontend application with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">npm start</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should open the React app in the browser under <a href="http://localhost:3000/" class="bare">http://localhost:3000/</a>.</p>
</div>
<div class="sect2">
<h3 id="frontend-walkabout"><a class="anchor" href="#frontend-walkabout"></a>7.1. Frontend walkabout</h3>
<div class="paragraph">
<p>Before we explore the code of the frontend app, let&#8217;s first take a tour through the frontend in the browser to see how it all works together.</p>
</div>
<div class="paragraph">
<p>We will perform the following:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create 3 different accounts.</p>
</li>
<li>
<p>Send an initial amount of tokens to each account.</p>
</li>
<li>
<p>Create a new NFT with the first account.</p>
</li>
<li>
<p>Transfer the newly created NFT to the second account.</p>
</li>
<li>
<p>Purchase the NFT with the third account.</p>
</li>
<li>
<p>Create a second NFT with the first account, which is non-purchasable.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>In the example screenshots we use the following account credentials:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-txt hljs" data-lang="txt">================================
Artist
passphrase: boss annual room suspect ride robot connect repeat relax govern dolphin depth
address: lsktxksfsbmkmoto68y7edszaecgpnaxqqg7cs43d
--------------------------------
Collector1
passphrase: mammal fan below aspect thing iron uniform then humble double endorse gauge
address: lskybgqryr9tk4m3rdp66ethaf6xurm6hj8c93udo
--------------------------------
Collector2
passphrase: emotion project prepare cream double damage gentle basket submit enhance between drill
address: lskha38ewso7do8zeuqx8qnyoqd8962mk48atknbs
================================</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, you can also create new credentials by using the <code>Create Account</code> dialog:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/02-create-account.png" alt="02 create account"></span></p>
</div>
<div class="sect3">
<h4 id="the-home-page"><a class="anchor" href="#the-home-page"></a>7.1.1. The home page</h4>
<div class="paragraph">
<p>The home page is the landing page you see when opening the frontend app under <code><a href="http://localhost:3000/" class="bare">http://localhost:3000/</a></code> in the browser.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/01-home-notes.png" alt="01 home notes"></span></p>
</div>
<div class="paragraph">
<p>On the first start of the app, the page is quite empty. However, once we have created the first NFTs, the home page will display all existing NFTs and their details.</p>
</div>
<div class="paragraph">
<p>In the top bar there is a link to the transactions explorer, which displays a list of all transactions which are included in the blockchain.
Currently, it should also be empty as we haven&#8217;t sent any transactions yet.</p>
</div>
<div class="paragraph">
<p>On the bottom right, there is a button that can be used for opening the different dialogs for creating a new account, transferring tokens from one account to another, and most importantly, for creating new NFTs.</p>
</div>
<div class="paragraph">
<p>To be able to create and purchase a new NFT, an account needs to have some tokens in the account balance.
Therefore, we first need to transfer some tokens to the created accounts.</p>
</div>
</div>
<div class="sect3">
<h4 id="transferring-funds"><a class="anchor" href="#transferring-funds"></a>7.1.2. Transferring funds</h4>
<div class="paragraph">
<p>Click on the <code>Transfer tokens</code> dialog and transfer an adequate amount of tokens to the above described demo accounts.
In our example, we transferred 2000 tokens to the artist account and 1000 tokens each to the collector accounts.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/03-transfer-funds.png" alt="03 transfer funds"></span></p>
</div>
<div class="paragraph">
<p>For the passphrase, use the passphrase of the genesis account, by clicking on the button <code>Use genesis account</code>.
Now click on <code>Send funds</code>.
This will send the specified tokens from the genesis account to the specified account in the <code>Recipient Address</code> field.</p>
</div>
<div class="paragraph">
<p>This will post a corresponding transfer transaction to the blockchain application.</p>
</div>
<div class="paragraph">
<p>It is possible to verify the transaction was included in a block by observing the logs of the blockchain application:</p>
</div>
<div class="listingblock">
<div class="title">Logs of the blockchain app when a valid transaction is posted to the node</div>
<div class="content">
<pre>15:20:56 INFO lisk-framework: Added transaction to pool (module=lisk:app)
{
 "id": "b9d81d996886f28d2f9fd102c2d8407dc86df941eeea0b03c004080e0f100f27",
 "nonce": "0",
 "senderPublicKey": "836d4f07c7db6d10c84394c60549d3f95cf61354e2ab5b0965a3fe7120e2f70d"
}
15:21:00 INFO lisk-framework: New block added to the chain (module=lisk:app)
{
 "id": "f6d2ee7cb0e76938340f0b8a946389d518e7f27c062759f2c78f47d2841a7010",
 "height": 787,
 "numberOfTransactions": 1
}</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-a-new-nft"><a class="anchor" href="#creating-a-new-nft"></a>7.1.3. Creating a new NFT</h4>
<div class="paragraph">
<p>Now that all accounts have some tokens in their account balance, use the artist account passphrase to create a new NFT.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/04-create-nft.png" alt="04 create nft"></span></p>
</div>
<div class="paragraph">
<p>After approximately 10 seconds, the NFT should appear on the home page, after refreshing the page.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/05-home-nft.png" alt="05 home nft"></span></p>
</div>
<div class="paragraph">
<p>At the bottom of the NFT card, the user now has the option to <code>transfer</code> or <code>purchase</code> the NFT.</p>
</div>
</div>
<div class="sect3">
<h4 id="transferring-an-nft"><a class="anchor" href="#transferring-an-nft"></a>7.1.4. Transferring an NFT</h4>
<div class="paragraph">
<p>To test the <code>Transfer NFT</code> option, transfer the NFT now to the Collector1 account:</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You must use the passphrase of the current owner of the NFT to sign this transaction.</p>
</div>
<div class="paragraph">
<p>If a different account than the owner tries to transfer the NFT, the application will throw an error <code>An NFT can only be transferred by the owner of the NFT.</code>, which we defined previously in the <a href="#transfernft-asset">TransferNFT asset</a> section.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/06-transfer-nft.png" alt="06 transfer nft"></span></p>
</div>
<div class="paragraph">
<p>Now wait 10 seconds and refresh the home page again, to see the updated owner and history of the NFT.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/07-home-nft.png" alt="07 home nft"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="purchasing-an-nft"><a class="anchor" href="#purchasing-an-nft"></a>7.1.5. Purchasing an NFT</h4>
<div class="paragraph">
<p>To test the <code>Purchase NFT</code> option, purchase the NFT with the Collector2 account:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/08-purchase-nft.png" alt="08 purchase nft"></span></p>
</div>
<div class="paragraph">
<p>Now wait again 10 seconds, to see the updated owner and history of the NFT.</p>
</div>
<div class="paragraph">
<p>Click on the account addresses in the NFT history, to view the account details of the corresponding account on a new page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../_images/tutorials/nft/10-collector1-account-page.png" alt="10 collector1 account page">
</div>
<div class="title">Figure 1. Collector1 account details</div>
</div>
<div id="account-page" class="imageblock">
<div class="content">
<img src="../_images/tutorials/nft/09-collector2-account-page.png" alt="09 collector2 account page">
</div>
<div class="title">Figure 2. Collector2 account details</div>
</div>
<div class="paragraph">
<p>On the account page of Collector2, the NFT is now included.</p>
</div>
<div class="paragraph">
<p>Have a close look at the <code>Token value</code> property, which has increased from 120 to 132 due to the purchase.</p>
</div>
</div>
<div class="sect3">
<h4 id="the-transactions-explorer"><a class="anchor" href="#the-transactions-explorer"></a>7.1.6. The transactions explorer</h4>
<div class="paragraph">
<p>Click on the <code>Transactions</code> link in the top bar, to go to the transaction explorer.</p>
</div>
<div class="paragraph">
<p>Here you can see a list of all transactions, which have been posted in the network so far, including a few details such as their respective module and asset name, the sender address, and the transaction ID.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/11-transactions.png" alt="11 transactions"></span></p>
</div>
</div>
<div class="sect3">
<h4 id="creating-non-purchasable-nfts"><a class="anchor" href="#creating-non-purchasable-nfts"></a>7.1.7. Creating non-purchasable NFTs</h4>
<div class="paragraph">
<p>To become more familiar with the process, play around a little more with the NFT app by creating more NFTs.</p>
</div>
<div class="paragraph">
<p>For example, it is also possible to create non-purchasable NFTs by setting the minimum purchase margin to zero.</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/12-create-mew.png" alt="12 create mew"></span></p>
</div>
<div class="paragraph">
<p>The refreshed home page will then look like this:</p>
</div>
<div class="paragraph">
<p><span class="image"><img src="../_images/tutorials/nft/13-home-nft.png" alt="13 home nft"></span></p>
</div>
<div class="paragraph">
<p>That&#8217;s it, the frontend walkabout in the browser is now complete.</p>
</div>
<div class="paragraph">
<p>Next let&#8217;s take a dive into the most important parts of the frontend app, regarding the blockchain related logic.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-related-functions"><a class="anchor" href="#api-related-functions"></a>7.2. API related functions</h3>
<div class="paragraph">
<p>At first define multiple functions that fetch data from the HTTP API of the blockchain information.</p>
</div>
<div class="paragraph">
<p>The NFT blockchain app offers two different HTTP APIs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="http://localhost:4000/api/" class="bare">http://localhost:4000/api/</a> : The API of the <code>HTTPAPIPlugin</code>.
Used to retrieve general blockchain information from the database.</p>
</li>
<li>
<p><a href="http://localhost:8080/api/" class="bare">http://localhost:8080/api/</a> : The API of the <code>NFTAPIPlugin</code>.
Used to retrieve NFT related information from the database.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We will use both APIs and their provided endpoints to retrieve or post the following data:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>General blockchain information</p>
<div class="ulist">
<ul>
<li>
<p><code>fetchNodeInfo()</code>: Returns information about the connected node.</p>
</li>
<li>
<p><code>fetchAccountInfo(address)</code>: Returns details of a specific account, based on its address.</p>
</li>
<li>
<p><code>sendTransactions(tx)</code>: Sends a specified transaction object <code>tx</code> to the node.</p>
</li>
</ul>
</div>
</li>
<li>
<p>NFT related information</p>
<div class="ulist">
<ul>
<li>
<p><code>fetchAllNFTTokens()</code>: Fetches a list of all registered NFTs in the network.</p>
</li>
<li>
<p><code>fetchNFTToken()</code>: Returns details of a specific NFT, based on its ID.</p>
</li>
<li>
<p><code>getAllTransactions()</code>: Returns a list of all posted transactions in the network.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/api/index.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">export const fetchNodeInfo = async () =&gt; {
  return fetch("http://localhost:4000/api/node/info")
    .then((res) =&gt; res.json())
    .then((res) =&gt; res.data);
};

export const fetchAccountInfo = async (address) =&gt; {
  return fetch(`http://localhost:4000/api/accounts/${address}`)
    .then((res) =&gt; res.json())
    .then((res) =&gt; res.data);
};

export const sendTransactions = async (tx) =&gt; {
  return fetch("http://localhost:4000/api/transactions", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(tx),
  })
    .then((res) =&gt; res.json())
    .then((res) =&gt; res.data);
};

export const fetchAllNFTTokens = async () =&gt; {
  return fetch("http://localhost:8080/api/nft_tokens")
    .then((res) =&gt; res.json())
    .then((res) =&gt; res.data);
};

export const fetchNFTToken = async (id) =&gt; {
  return fetch(`http://localhost:8080/api/nft_tokens/${id}`)
    .then((res) =&gt; res.json())
    .then((res) =&gt; res.data);
};

export const getAllTransactions = async () =&gt; {
  return fetch(`http://localhost:8080/api/transactions`)
    .then((res) =&gt; res.json())
    .then((res) =&gt; {
      return res.data;
    });
};</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="functions-for-creating-transactions"><a class="anchor" href="#functions-for-creating-transactions"></a>7.3. Functions for creating transactions</h3>
<div class="paragraph">
<p>The <code>utils/</code> folder of the frontend app stores certain utility functions for creating the different transaction types.</p>
</div>
<div class="paragraph">
<p>The functions will be used in the <a href="#dialogs">Dialogs</a> below to create and send the transaction objects based on the form data in the dialog.</p>
</div>
<div class="paragraph">
<p>The transactions are created and signed by utilizing the <code>signTransaction()</code> from the <code>@liskhq/lisk-client</code> package.</p>
</div>
<div class="paragraph">
<p>The nonce for each transaction is retrieved from the sender account by running <code>fetchAccountInfo()</code> from the <a href="#api-related-functions">API related functions</a> section.</p>
</div>
<div class="sect3">
<h4 id="create-nft"><a class="anchor" href="#create-nft"></a>7.3.1. Create NFT</h4>
<div class="listingblock">
<div class="title">frontend_app/src/utils/transactions/create_nft_token.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">/* global BigInt */

import { transactions, codec, cryptography } from "@liskhq/lisk-client";
import { getFullAssetSchema, calcMinTxFee } from "../common";
import { fetchAccountInfo } from "../../api";

export const createNFTTokenSchema = {
  $id: "lisk/create-nft-asset",
  type: "object",
  required: ["minPurchaseMargin", "initValue", "name"],
  properties: {
    minPurchaseMargin: {
      dataType: "uint32",
      fieldNumber: 1,
    },
    initValue: {
      dataType: "uint64",
      fieldNumber: 2,
    },
    name: {
      dataType: "string",
      fieldNumber: 3,
    },
  },
};

export const createNFTToken = async ({
  name,
  initValue,
  minPurchaseMargin,
  passphrase,
  fee,
  networkIdentifier,
  minFeePerByte,
}) =&gt; {
  const { publicKey } = cryptography.getPrivateAndPublicKeyFromPassphrase(
    passphrase
  );
  const address = cryptography.getAddressFromPassphrase(passphrase).toString("hex");

  const {
    sequence: { nonce },
  } = await fetchAccountInfo(address);

  const { id, ...rest } = transactions.signTransaction(
    createNFTTokenSchema,
    {
      moduleID: 1024,
      assetID: 0,
      nonce: BigInt(nonce),
      fee: BigInt(transactions.convertLSKToBeddows(fee)),
      senderPublicKey: publicKey,
      asset: {
        name,
        initValue: BigInt(transactions.convertLSKToBeddows(initValue)),
        minPurchaseMargin: parseInt(minPurchaseMargin),
      },
    },
    Buffer.from(networkIdentifier, "hex"),
    passphrase
  );

  return {
    id: id.toString("hex"),
    tx: codec.codec.toJSON(getFullAssetSchema(createNFTTokenSchema), rest),
    minFee: calcMinTxFee(createNFTTokenSchema, minFeePerByte, rest),
  };
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="purchase-nft"><a class="anchor" href="#purchase-nft"></a>7.3.2. Purchase NFT</h4>
<div class="listingblock">
<div class="title">frontend_app/src/utils/transactions/purchase_nft_token.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">/* global BigInt */

import { transactions, codec, cryptography } from "@liskhq/lisk-client";
import { getFullAssetSchema, calcMinTxFee } from "../common";
import { fetchAccountInfo } from "../../api";

export const purchaseNFTTokenSchema = {
  $id: "lisk/nft/purchase",
  type: "object",
  required: ["nftId", "purchaseValue"],
  properties: {
    nftId: {
      dataType: "bytes",
      fieldNumber: 1,
    },
    purchaseValue: {
      dataType: "uint64",
      fieldNumber: 2,
    },
    name: {
      dataType: "string",
      fieldNumber: 3,
    },
  },
};

export const purchaseNFTToken = async ({
  name,
  nftId,
  purchaseValue,
  passphrase,
  fee,
  networkIdentifier,
  minFeePerByte,
}) =&gt; {
  const { publicKey } = cryptography.getPrivateAndPublicKeyFromPassphrase(
    passphrase
  );
  const address = cryptography.getAddressFromPassphrase(passphrase);
  const {
    sequence: { nonce },
  } = await fetchAccountInfo(address.toString("hex"));

  const { id, ...rest } = transactions.signTransaction(
    purchaseNFTTokenSchema,
    {
      moduleID: 1024,
      assetID: 1,
      nonce: BigInt(nonce),
      fee: BigInt(transactions.convertLSKToBeddows(fee)),
      senderPublicKey: publicKey,
      asset: {
        name,
        nftId: Buffer.from(nftId, "hex"),
        purchaseValue: BigInt(transactions.convertLSKToBeddows(purchaseValue)),
      },
    },
    Buffer.from(networkIdentifier, "hex"),
    passphrase
  );

  return {
    id: id.toString("hex"),
    tx: codec.codec.toJSON(getFullAssetSchema(purchaseNFTTokenSchema), rest),
    minFee: calcMinTxFee(purchaseNFTTokenSchema, minFeePerByte, rest),
  };
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="transfer-funds"><a class="anchor" href="#transfer-funds"></a>7.3.3. Transfer funds</h4>
<div class="listingblock">
<div class="title">frontend_app/src/utils/transactions/transfer.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">/* global BigInt */

import { transactions, codec, cryptography } from "@liskhq/lisk-client";
import { getFullAssetSchema, calcMinTxFee } from "../common";
import { fetchAccountInfo } from "../../api";

export const transferAssetSchema = {
  $id: "lisk/transfer-asset",
  title: "Transfer transaction asset",
  type: "object",
  required: ["amount", "recipientAddress", "data"],
  properties: {
    amount: {
      dataType: "uint64",
      fieldNumber: 1,
    },
    recipientAddress: {
      dataType: "bytes",
      fieldNumber: 2,
      minLength: 20,
      maxLength: 20,
    },
    data: {
      dataType: "string",
      fieldNumber: 3,
      minLength: 0,
      maxLength: 64,
    },
  },
};

export const transfer = async ({
  recipientAddress,
  amount,
  passphrase,
  fee,
  networkIdentifier,
  minFeePerByte,
}) =&gt; {
  const { publicKey } = cryptography.getPrivateAndPublicKeyFromPassphrase(
    passphrase
  );
  const address = cryptography.getAddressFromPassphrase(passphrase);
  const {
    sequence: { nonce },
  } = await fetchAccountInfo(address.toString("hex"));
  const recipient = cryptography.getAddressFromBase32Address(recipientAddress);
  const { id, ...rest } = transactions.signTransaction(
    transferAssetSchema,
    {
      moduleID: 2,
      assetID: 0,
      nonce: BigInt(nonce),
      fee: BigInt(transactions.convertLSKToBeddows(fee)),
      senderPublicKey: publicKey,
      asset: {
        amount: BigInt(transactions.convertLSKToBeddows(amount)),
        recipientAddress: recipient,
        data: "",
      },
    },
    Buffer.from(networkIdentifier, "hex"),
    passphrase
  );

  return {
    id: id.toString("hex"),
    tx: codec.codec.toJSON(getFullAssetSchema(transferAssetSchema), rest),
    minFee: calcMinTxFee(transferAssetSchema, minFeePerByte, rest),
  };
};</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="transfer-nft"><a class="anchor" href="#transfer-nft"></a>7.3.4. Transfer NFT</h4>
<div class="listingblock">
<div class="title">frontend_app/src/utils/transactions/transfer_nft.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">/* global BigInt */

import { transactions, codec, cryptography } from "@liskhq/lisk-client";
import { getFullAssetSchema, calcMinTxFee } from "../common";
import { fetchAccountInfo } from "../../api";

export const transferNFTSchema = {
  $id: "lisk/nft/transfer",
  type: "object",
  required: ["nftId", "recipient"],
  properties: {
    nftId: {
      dataType: "bytes",
      fieldNumber: 1,
    },
    recipient: {
      dataType: "bytes",
      fieldNumber: 2,
    },
    name: {
      dataType: "string",
      fieldNumber: 3,
    },
  },
};

export const transferNFT = async ({
                                         name,
                                         nftId,
                                         recipientAddress,
                                         passphrase,
                                         fee,
                                         networkIdentifier,
                                         minFeePerByte,
                                       }) =&gt; {
  const { publicKey } = cryptography.getPrivateAndPublicKeyFromPassphrase(
    passphrase
  );
  const address = cryptography.getAddressFromPassphrase(passphrase);
  const recipient = cryptography.getAddressFromBase32Address(recipientAddress);
  const {
    sequence: { nonce },
  } = await fetchAccountInfo(address.toString("hex"));

  const { id, ...rest } = transactions.signTransaction(
    transferNFTSchema,
    {
      moduleID: 1024,
      assetID: 2,
      nonce: BigInt(nonce),
      fee: BigInt(transactions.convertLSKToBeddows(fee)),
      senderPublicKey: publicKey,
      asset: {
        name,
        nftId: Buffer.from(nftId, "hex"),
        recipient: recipient,
      },
    },
    Buffer.from(networkIdentifier, "hex"),
    passphrase
  );

  return {
    id: id.toString("hex"),
    tx: codec.codec.toJSON(getFullAssetSchema(transferNFTSchema), rest),
    minFee: calcMinTxFee(transferNFTSchema, minFeePerByte, rest),
  };
};</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dialogs"><a class="anchor" href="#dialogs"></a>7.4. Dialogs</h3>
<div class="sect3">
<h4 id="create-account-dialog"><a class="anchor" href="#create-account-dialog"></a>7.4.1. Create account dialog</h4>
<div class="paragraph">
<p>The create account dialog creates new account details each time it is opened.</p>
</div>
<div class="paragraph">
<p>Note, that these account details are only created locally, and are not included in the blockchain yet.</p>
</div>
<div class="paragraph">
<p>To include an account in the blockchain, simply send some funds to the account with the <a href="#transfer-funds-dialog">Transfer funds dialog</a>.</p>
</div>
<div class="paragraph">
<p>To create the account details, the <code>passphrase</code> and <code>cryptography</code> library of the <code>@liskhq/lisk-client</code> package are used.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/dialogs/CreateAccountDialog.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { Fragment, useState, useEffect } from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  TextField,
} from "@material-ui/core";
import { makeStyles } from "@material-ui/core/styles";
import { passphrase, cryptography } from "@liskhq/lisk-client";

const useStyles = makeStyles((theme) =&gt; ({
  root: {
    "&amp; .MuiTextField-root": {
      margin: theme.spacing(1),
    },
  },
}));

export default function CreateAccountDialog(props) {
  const [data, setData] = useState({ passphrase: "", address: "" });
  const classes = useStyles();

  useEffect(() =&gt; {
    const pw = passphrase.Mnemonic.generateMnemonic();
    const address = cryptography.getBase32AddressFromPassphrase(pw).toString("hex");
    setData({ passphrase: pw, address });
  }, [props.open]);

  return (
    &lt;Fragment&gt;
      &lt;Dialog open={props.open} onBackdropClick={props.handleClose} fullWidth&gt;
        &lt;DialogTitle id="alert-dialog-title"&gt;
          {"Please copy the address and passphrase"}
        &lt;/DialogTitle&gt;
        &lt;DialogContent&gt;
          &lt;form noValidate autoComplete="off" className={classes.root}&gt;
            &lt;TextField
              label="Passphrase"
              value={data.passphrase}
              fullWidth
              InputProps={{
                readOnly: true,
              }}
            /&gt;
            &lt;TextField
              label="Address"
              value={data.address}
              fullWidth
              InputProps={{
                readOnly: true,
              }}
            /&gt;
          &lt;/form&gt;
        &lt;/DialogContent&gt;
      &lt;/Dialog&gt;
    &lt;/Fragment&gt;
  );
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-nft-dialog"><a class="anchor" href="#create-nft-dialog"></a>7.4.2. Create NFT dialog</h4>
<div class="paragraph">
<p>The create NFT dialog allows a user to create a new NFT.</p>
</div>
<div class="paragraph">
<p>It renders a form where a user can enter all important information to create the NFT:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: The name of the NFT.</p>
</li>
<li>
<p><strong>Initial Token value</strong>: The inital value of the token.
The amount will be debited from the balance of the account which creates the NFT.</p>
</li>
<li>
<p><strong>Minimum Purchase Margin</strong>: The minimum margin in %, which is added to the token value on purchase.</p>
</li>
<li>
<p><strong>Fee</strong>: The transaction fee for the <code>createNFT</code> transaction.</p>
</li>
<li>
<p><strong>Passphrase</strong>: The passphrase of the account which creates the NFT.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It then uses the <code>createNFTToken()</code> function we defined in the <a href="#create-nft">Create NFT</a> section to create the <code>createNFT</code> transaction and the <code>sendTransactions()</code> function from the <a href="#api-related-functions">API related functions</a> section to post the transaction to the blockchain application.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/dialogs/CreateNFTTokenDialog.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { Fragment, useContext, useState } from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  TextField,
  Button,
  DialogActions,
} from "@material-ui/core";
import { makeStyles } from "@material-ui/core/styles";
import { NodeInfoContext } from "../../context";
import { createNFTToken } from "../../utils/transactions/create_nft_token";
import * as api from "../../api";

const useStyles = makeStyles((theme) =&gt; ({
  root: {
    "&amp; .MuiTextField-root": {
      margin: theme.spacing(1),
    },
  },
}));

export default function CreateNFTTokenDialog(props) {
  const nodeInfo = useContext(NodeInfoContext);
  const classes = useStyles();
  const [data, setData] = useState({
    name: "",
    initValue: "",
    minPurchaseMargin: "",
    fee: "",
    passphrase: "",
  });

  const handleChange = (event) =&gt; {
    event.persist();
    setData({ ...data, [event.target.name]: event.target.value });
  };

  const handleSend = async (event) =&gt; {
    event.preventDefault();

    const res = await createNFTToken({
      ...data,
      networkIdentifier: nodeInfo.networkIdentifier,
      minFeePerByte: nodeInfo.minFeePerByte,
    });
    await api.sendTransactions(res.tx);
    props.handleClose();
  };

  return (
    &lt;Fragment&gt;
      &lt;Dialog open={props.open} onBackdropClick={props.handleClose}&gt;
        &lt;DialogTitle id="alert-dialog-title"&gt;{"Create NFT"}&lt;/DialogTitle&gt;
        &lt;DialogContent&gt;
          &lt;form className={classes.root} noValidate autoComplete="off"&gt;
            &lt;TextField
              label="Name"
              value={data.name}
              name="name"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Initial Token value"
              value={data.initValue}
              name="initValue"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Minimum Purchase Margin (0 - 100)"
              value={data.minPurchaseMargin}
              name="minPurchaseMargin"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Fee"
              value={data.fee}
              name="fee"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Passphrase"
              value={data.passphrase}
              name="passphrase"
              onChange={handleChange}
              fullWidth
            /&gt;
          &lt;/form&gt;
        &lt;/DialogContent&gt;
        &lt;DialogActions&gt;
          &lt;Button onClick={handleSend}&gt;Create NFT&lt;/Button&gt;
        &lt;/DialogActions&gt;
      &lt;/Dialog&gt;
    &lt;/Fragment&gt;
  );
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="purchase-nft-dialog"><a class="anchor" href="#purchase-nft-dialog"></a>7.4.3. Purchase NFT dialog</h4>
<div class="paragraph">
<p>The purchase NFT dialog allows a user to purchase an existing NFT.</p>
</div>
<div class="paragraph">
<p>It renders a form where a user can enter all important information to purchase the NFT:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Token Name</strong>(pre-filled): The name of the NFT.</p>
</li>
<li>
<p><strong>Token ID</strong>(pre-filled): The ID of the NFT.</p>
</li>
<li>
<p><strong>Purchase Value</strong>: The value the purchaser wants to pay for the NFT.
For assistance, the minimum valid purchase margin for this particular NFT is displayed below.</p>
</li>
<li>
<p><strong>Fee</strong>: The transaction fee for the <code>purchaseNFT</code> transaction.</p>
</li>
<li>
<p><strong>Passphrase</strong>: The passphrase of the account which purchases the NFT.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It then uses the <code>purchaseNFTToken()</code> function we defined in the <a href="#purchase-nft">Purchase NFT</a> section to create the <code>purchaseNFT</code> transaction and the <code>sendTransactions()</code> function from the <a href="#api-related-functions">API related functions</a> section to post the transaction to the blockchain application.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/dialogs/PurchaseNFTTokenDialog.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { Fragment, useContext, useState } from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  TextField,
  Button,
  DialogActions,
} from "@material-ui/core";
import { makeStyles } from "@material-ui/core/styles";
import { NodeInfoContext } from "../../context";
import { purchaseNFTToken } from "../../utils/transactions/purchase_nft_token";
import * as api from "../../api";
import { transactions } from "@liskhq/lisk-client";

const useStyles = makeStyles((theme) =&gt; ({
  root: {
    "&amp; .MuiTextField-root": {
      margin: theme.spacing(1),
    },
  },
}));

export default function PurchaseNFTTokenDialog(props) {
  const nodeInfo = useContext(NodeInfoContext);
  const classes = useStyles();
  const currentValue = parseFloat(
    transactions.convertBeddowsToLSK(props.token.value)
  );
  const minPurchaseMargin = parseFloat(props.token.minPurchaseMargin);
  const minPurchaseValue =
    currentValue + (currentValue * minPurchaseMargin) / 100.0;

  const [data, setData] = useState({
    name: props.token.name,
    nftId: props.token.id,
    purchaseValue: "",
    fee: "",
    passphrase: "",
  });

  const handleChange = (event) =&gt; {
    event.persist();
    setData({ ...data, [event.target.name]: event.target.value });
  };

  const handleSend = async (event) =&gt; {
    event.preventDefault();

    const res = await purchaseNFTToken({
      ...data,
      networkIdentifier: nodeInfo.networkIdentifier,
      minFeePerByte: nodeInfo.minFeePerByte,
    });
    await api.sendTransactions(res.tx);
    props.handleClose();
  };

  return (
    &lt;Fragment&gt;
      &lt;Dialog open={props.open} onBackdropClick={props.handleClose}&gt;
        &lt;DialogTitle id="alert-dialog-title"&gt;
          {"Purchase NFT"}
        &lt;/DialogTitle&gt;
        &lt;DialogContent&gt;
          &lt;form className={classes.root} noValidate autoComplete="off"&gt;
            &lt;TextField
              label="Token Name"
              value={data.name}
              name="name"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Token ID"
              value={data.nftId}
              name="nftId"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Purchase Value"
              value={data.purchaseValue}
              name="purchaseValue"
              onChange={handleChange}
              helperText={`Minimum purchase value: ${minPurchaseValue}`}
              fullWidth
            /&gt;
            &lt;TextField
              label="Fee"
              value={data.fee}
              name="fee"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Passphrase"
              value={data.passphrase}
              name="passphrase"
              onChange={handleChange}
              fullWidth
            /&gt;
          &lt;/form&gt;
        &lt;/DialogContent&gt;
        &lt;DialogActions&gt;
          &lt;Button onClick={handleSend}&gt;Purchase NFT&lt;/Button&gt;
        &lt;/DialogActions&gt;
      &lt;/Dialog&gt;
    &lt;/Fragment&gt;
  );
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="transfer-funds-dialog"><a class="anchor" href="#transfer-funds-dialog"></a>7.4.4. Transfer funds dialog</h4>
<div class="paragraph">
<p>The transfer funds dialog allows a user to transfer tokens from one account to another.</p>
</div>
<div class="paragraph">
<p>It renders a form where a user can enter all important information to transfer the tokens:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Recipient Address</strong>: The base 32 address of the account which receives the funds.</p>
</li>
<li>
<p><strong>Amount</strong>: The amount of tokens being transfered.</p>
</li>
<li>
<p><strong>Fee</strong>: The transaction fee for the <code>transfer</code> transaction.</p>
</li>
<li>
<p><strong>Passphrase</strong>: The passphrase of the account which sends the funds.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It then uses the <code>transfer()</code> function we defined in the <a href="#transfer-funds">Transfer funds</a> section to create the <code>transfer</code> transaction and the <code>sendTransactions()</code> function from the <a href="#api-related-functions">API related functions</a> section to post the transaction to the blockchain application.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/dialogs/TransferFundsDialog.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { Fragment, useContext, useState } from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  TextField,
  Button,
  DialogActions,
} from "@material-ui/core";
import { makeStyles } from "@material-ui/core/styles";
import { NodeInfoContext } from "../../context";
import { transfer } from "../../utils/transactions/transfer";
import * as api from "../../api";

const useStyles = makeStyles((theme) =&gt; ({
  root: {
    "&amp; .MuiTextField-root": {
      margin: theme.spacing(1),
    },
  },
}));

export default function TransferFundsDialog(props) {
  const nodeInfo = useContext(NodeInfoContext);
  const classes = useStyles();
  const [data, setData] = useState({
    recipientAddress: "",
    passphrase: "",
    amount: "",
    fee: "",
  });

  const handleChange = (event) =&gt; {
    event.persist();
    setData({ ...data, [event.target.name]: event.target.value });
  };

  const handleSend = async (event) =&gt; {
    event.preventDefault();

    const res = await transfer({
      ...data,
      networkIdentifier: nodeInfo.networkIdentifier,
      minFeePerByte: nodeInfo.minFeePerByte,
    });
    await api.sendTransactions(res.tx);
    props.handleClose();
  };

  return (
    &lt;Fragment&gt;
      &lt;Dialog open={props.open} onBackdropClick={props.handleClose}&gt;
        &lt;DialogTitle id="alert-dialog-title"&gt;{"Transfer Funds"}&lt;/DialogTitle&gt;
        &lt;DialogContent&gt;
          &lt;form className={classes.root} noValidate autoComplete="off"&gt;
            &lt;TextField
              label="Recipient Address"
              value={data.recipientAddress}
              name="recipientAddress"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Amount"
              value={data.amount}
              name="amount"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Fee"
              value={data.fee}
              name="fee"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Passphrase"
              value={data.passphrase}
              name="passphrase"
              onChange={handleChange}
              fullWidth
            /&gt;

            &lt;Button
              onClick={() =&gt; {
                setData({
                  ...data,
                  passphrase:
                    "peanut hundred pen hawk invite exclude brain chunk gadget wait wrong ready",
                });
              }}
            &gt;
              Use Genesis Account
            &lt;/Button&gt;
          &lt;/form&gt;
        &lt;/DialogContent&gt;
        &lt;DialogActions&gt;
          &lt;Button onClick={handleSend}&gt;Send Funds&lt;/Button&gt;
        &lt;/DialogActions&gt;
      &lt;/Dialog&gt;
    &lt;/Fragment&gt;
  );
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="transfer-nft-dialog"><a class="anchor" href="#transfer-nft-dialog"></a>7.4.5. Transfer NFT dialog</h4>
<div class="paragraph">
<p>The transfer NFT dialog allows the owner of a NFT to transfer the NFT.</p>
</div>
<div class="paragraph">
<p>It renders a form where the current owner can enter all important information to transfer the NFT:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Token Name</strong>(pre-filled): The name of the NFT.</p>
</li>
<li>
<p><strong>Token ID</strong>(pre-filled): The ID of the NFT.</p>
</li>
<li>
<p><strong>Recipient Address</strong>: The base 32 address of the account which receives the NFT.</p>
</li>
<li>
<p><strong>Fee</strong>: The transaction fee for the <code>purchaseNFT</code> transaction.</p>
</li>
<li>
<p><strong>Passphrase</strong>: The passphrase of the owner of the NFT.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It then uses the <code>transferNFT()</code> function we defined in the <a href="#transfer-nft">Transfer NFT</a> section to create the <code>transferNFT</code> transaction and the <code>sendTransactions()</code> function from the <a href="#api-related-functions">API related functions</a> section to post the transaction to the blockchain application.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/dialogs/TransferNFTDialog.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { Fragment, useContext, useState } from "react";
import {
  Dialog,
  DialogTitle,
  DialogContent,
  TextField,
  Button,
  DialogActions,
} from "@material-ui/core";
import { makeStyles } from "@material-ui/core/styles";
import { NodeInfoContext } from "../../context";
import { transferNFT } from "../../utils/transactions/transfer_nft";
import * as api from "../../api";

const useStyles = makeStyles((theme) =&gt; ({
  root: {
    "&amp; .MuiTextField-root": {
      margin: theme.spacing(1),
    },
  },
}));

export default function TransferNFTDialog(props) {
  const nodeInfo = useContext(NodeInfoContext);
  const classes = useStyles();

  const [data, setData] = useState({
    name: props.token.name,
    nftId: props.token.id,
    recipientAddress: "",
    fee: "",
    passphrase: "",
  });

  const handleChange = (event) =&gt; {
    event.persist();
    setData({ ...data, [event.target.name]: event.target.value });
  };

  const handleSend = async (event) =&gt; {
    event.preventDefault();

    const res = await transferNFT({
      ...data,
      networkIdentifier: nodeInfo.networkIdentifier,
      minFeePerByte: nodeInfo.minFeePerByte,
    });
    await api.sendTransactions(res.tx);
    props.handleClose();
  };

  return (
    &lt;Fragment&gt;
      &lt;Dialog open={props.open} onBackdropClick={props.handleClose}&gt;
        &lt;DialogTitle id="alert-dialog-title"&gt;
          {"Transfer NFT"}
        &lt;/DialogTitle&gt;
        &lt;DialogContent&gt;
          &lt;form className={classes.root} noValidate autoComplete="off"&gt;
            &lt;TextField
              label="Token Name"
              value={data.name}
              name="name"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Token ID"
              value={data.nftId}
              name="nftId"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Recipient address"
              value={data.recipientAddress}
              name="recipientAddress"
              onChange={handleChange}
              helperText={`Address of the account that will receive the NFT.`}
              fullWidth
            /&gt;
            &lt;TextField
              label="Fee"
              value={data.fee}
              name="fee"
              onChange={handleChange}
              fullWidth
            /&gt;
            &lt;TextField
              label="Passphrase"
              value={data.passphrase}
              name="passphrase"
              onChange={handleChange}
              fullWidth
            /&gt;
          &lt;/form&gt;
        &lt;/DialogContent&gt;
        &lt;DialogActions&gt;
          &lt;Button onClick={handleSend}&gt;Transfer NFT&lt;/Button&gt;
        &lt;/DialogActions&gt;
      &lt;/Dialog&gt;
    &lt;/Fragment&gt;
  );
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="components"><a class="anchor" href="#components"></a>7.5. Components</h3>
<div class="paragraph">
<p>In React, components are like JavaScript functions.
They accept arbitrary inputs (called â€œpropsâ€) and return React elements describing what should appear on the screen.</p>
</div>
<div class="paragraph">
<p>For the frontend we define the following components:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HomePage</code>: A component for rendering <a href="#the-home-page">The home page</a>.</p>
</li>
<li>
<p><code>NFTToken</code>: A component for rendering an NFT including its details and related actions.</p>
</li>
<li>
<p><code>TransactionsPage</code>: A component for rendering <a href="#the-transactions-explorer">The transactions explorer</a>.</p>
</li>
<li>
<p><code>AccountPage</code>: A component for rendering the <a href="#account-page">account page</a>.</p>
</li>
<li>
<p><code>Account</code>: A component for rendering details to a specific account.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The code examples for the <code>HomePage</code> and <code>NFTToken</code> components can be found below.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="title">Account addresses in the frontend</div>
<div class="paragraph">
<p>As you may be aware, the account address can be represented in different formats, such as <code>bytes</code>, <code>Buffer</code>,<code>hex</code> or <code>Lisk32</code>.</p>
</div>
<div class="paragraph">
<p>The <code>Lisk32</code> format is the most human-readable representation of an account address, and therefore users of the application should only see this address in the UI.</p>
</div>
<div class="paragraph">
<p>More information about the different data formats can be found on the <a href="../understand-blockchain/codec-schema.html" class="xref page">Codec &amp; schema</a> reference page.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="nft-component"><a class="anchor" href="#nft-component"></a>7.5.1. NFT component</h4>
<div class="paragraph">
<p>The NFT component renders the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Name</strong>: The name of the NFT as the title.</p>
</li>
<li>
<p><strong>Token ID</strong>: The unique ID of the NFT.</p>
</li>
<li>
<p><strong>Token value</strong>: The current value of the token.</p>
</li>
<li>
<p><strong>Minimum Purchase Margin</strong>: The minimum margin in %, which is added to the token value on purchase.</p>
</li>
<li>
<p><strong>Current owner</strong>: The current owner of the NFT.</p>
</li>
<li>
<p><strong>NFT history</strong>: The complete owner history of the NFT.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This component makes use of the previously created <code>PurchaseNFTTokenDialog</code> and <code>TransferNFTDialog</code> <a href="#dialogs">Dialogs</a> and attaches them at the bottom of the NFT.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/NFTToken.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { useState } from "react";
import {
  Card,
  CardContent,
  CardActions,
  Typography,
  Link,
  Divider,
  Button,
} from "@material-ui/core";
import { makeStyles } from "@material-ui/core/styles";
import { Link as RouterLink } from "react-router-dom";
import { transactions, cryptography, Buffer } from "@liskhq/lisk-client";

import PurchaseNFTTokenDialog from "./dialogs/PurchaseNFTTokenDialog";
import TransferNFTDialog from "./dialogs/TransferNFTDialog";

const useStyles = makeStyles((theme) =&gt; ({
  propertyList: {
    listStyle: "none",

    "&amp; li": {
      margin: theme.spacing(2, 0),
      borderBottomColor: theme.palette.divider,
      borderBottomStyle: "solid",
      borderBottomWidth: 1,

      "&amp; dt": {
        display: "block",
        width: "100%",
        fontWeight: "bold",
        margin: theme.spacing(1, 0),
      },
      "&amp; dd": {
        display: "block",
        width: "100%",
        margin: theme.spacing(1, 0),
      },
    },
  },
}));

export default function NFTToken(props) {
  const classes = useStyles();
  const [openPurchase, setOpenPurchase] = useState(false);
  const [openTransfer, setOpenTransfer] = useState(false);
  const base32UIAddress = cryptography.getBase32AddressFromAddress(Buffer.from(props.item.ownerAddress, 'hex'), 'lsk').toString('binary');
  return (
    &lt;Card&gt;
      &lt;CardContent&gt;
        &lt;Typography variant="h6"&gt;{props.item.name}&lt;/Typography&gt;
        &lt;Divider /&gt;
        &lt;dl className={classes.propertyList}&gt;
          &lt;li&gt;
            &lt;dt&gt;Token ID&lt;/dt&gt;
            &lt;dd&gt;{props.item.id}&lt;/dd&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;dt&gt;Token value&lt;/dt&gt;
            &lt;dd&gt;{transactions.convertBeddowsToLSK(props.item.value)}&lt;/dd&gt;
          &lt;/li&gt;
          &lt;li&gt;
            &lt;dt&gt;Minimum Purchase Margin&lt;/dt&gt;
            &lt;dd&gt;{props.item.minPurchaseMargin}&lt;/dd&gt;
          &lt;/li&gt;
          {!props.minimum &amp;&amp; (
            &lt;li&gt;
              &lt;dt&gt;Current Owner&lt;/dt&gt;
              &lt;dd&gt;
                &lt;Link
                  component={RouterLink}
                  to={`/accounts/${base32UIAddress}`}
                &gt;
                  {base32UIAddress}
                &lt;/Link&gt;
              &lt;/dd&gt;
            &lt;/li&gt;
          )}
        &lt;/dl&gt;
        &lt;Typography variant="h6"&gt;NFT History&lt;/Typography&gt;
        &lt;Divider /&gt;
        {props.item.tokenHistory.map((base32UIAddress) =&gt; (
          &lt;dl className={classes.propertyList}&gt;
            &lt;li&gt;
              &lt;dd&gt;
                &lt;Link
                  component={RouterLink}
                  to={`/accounts/${base32UIAddress}`}
                &gt;
                  {base32UIAddress}
                &lt;/Link&gt;
              &lt;/dd&gt;
            &lt;/li&gt;
          &lt;/dl&gt;
        ))}

      &lt;/CardContent&gt;
      &lt;CardActions&gt;
        &lt;&gt;
          &lt;Button
            size="small"
            color="primary"
            onClick={() =&gt; {
              setOpenTransfer(true);
            }}
          &gt;
            Transfer NFT
          &lt;/Button&gt;
          &lt;TransferNFTDialog
            open={openTransfer}
            handleClose={() =&gt; {
              setOpenTransfer(false);
            }}
            token={props.item}
          /&gt;
        &lt;/&gt;
        {props.item.minPurchaseMargin &gt; 0 ? (
          &lt;&gt;
            &lt;Button
              size="small"
              color="primary"
              onClick={() =&gt; {
                setOpenPurchase(true);
              }}
            &gt;
              Purchase NFT
            &lt;/Button&gt;
            &lt;PurchaseNFTTokenDialog
              open={openPurchase}
              handleClose={() =&gt; {
                setOpenPurchase(false);
              }}
              token={props.item}
            /&gt;
          &lt;/&gt;
        ) : (
          &lt;Typography variant="body"&gt;Can't purchase this token&lt;/Typography&gt;
        )}
      &lt;/CardActions&gt;
    &lt;/Card&gt;
  );
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="home-page-component"><a class="anchor" href="#home-page-component"></a>7.5.2. Home page component</h4>
<div class="paragraph">
<p>The home page component renders the following information:</p>
</div>
<div class="paragraph">
<p>A list of all existing NFTs, rendered as an <a href="#nft-component">NFT component</a>.</p>
</div>
<div class="paragraph">
<p>The NFTs are fetched by utilizing the <code>fetchAllNFTTokens()</code> function from the <a href="#api-related-functions">API related functions</a>.</p>
</div>
<div class="listingblock">
<div class="title">frontend_app/src/components/HomePage.js</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-jsx hljs" data-lang="jsx">import React, { Fragment, useEffect, useState } from "react";
import NFTToken from "./NFTToken";
import { Grid } from "@material-ui/core";
import { fetchAllNFTTokens } from "../api";

function HomePage() {
  const [NFTAccounts, setNFTAccounts] = useState([]);

  useEffect(() =&gt; {
    async function fetchData() {
      setNFTAccounts(await fetchAllNFTTokens());
    }
    fetchData();
  }, []);

  return (
    &lt;Fragment&gt;
      &lt;Grid container spacing={4}&gt;
        {NFTAccounts.map((item) =&gt; (
          &lt;Grid item md={4}&gt;
            &lt;NFTToken item={item} key={item.id} /&gt;
          &lt;/Grid&gt;
        ))}
      &lt;/Grid&gt;
    &lt;/Fragment&gt;
  );
}

export default HomePage;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>That&#8217;s it! You should now have a complete example NFT blockchain application running, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a blockchain application with the following:</p>
<div class="ulist">
<ul>
<li>
<p>a custom module for handling NFTs.</p>
</li>
<li>
<p>a custom plugin that adds additional features for the NFTs.</p>
</li>
</ul>
</div>
</li>
<li>
<p>a frontend application which allows you to use and test the applications in the browser.</p>
</li>
</ul>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="index.html">Tutorials</a></span>
  <span class="next"><a href="srs.html">Social Recovery System (SRS) Tutorial</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>Â© 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../../_/js/site.js" data-ui-root-path="../../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/glossary.js"></script>
<script async src="../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../_/js/vendor/component-versions.js"></script>
<script src="../../_/js/vendor/custom.js"></script>

  </body>
</html>
