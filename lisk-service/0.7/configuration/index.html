<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lisk Service Configuration Reference :: Lisk documentation</title>
    <link rel="canonical" href="https://lisk.com/documentation/lisk-service/0.7/configuration/index.html">
    <link rel="prev" href="../setup/source.html">
    <link rel="next" href="docker.html">
    <meta name="generator" content="Antora 3.1.1">

<link id="theme" rel="stylesheet" title="Default" href="../../../_/css/site.css">
<link rel="stylesheet" title="Dark" href="../../../_/css/dark-site.css">

<script>var uiRootPath = '../../../_'</script>
<script src="../../../_/js/vendor/medium-zoom.js"></script>
<script type="text/javascript" id="Cookiebot" src="https://consent.cookiebot.com/uc.js" data-cbid="e4db29b5-cd94-4bcf-87e4-04f4ca564240" data-blockingmode="manual"></script>
<!-- Matomo -->
<script>
  var _paq = window._paq = window._paq || [];
  /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
  _paq.push(['trackPageView']);
  _paq.push(['enableLinkTracking']);
  (function() {
    var u="https://lisk.matomo.cloud/";
    _paq.push(['setTrackerUrl', u+'matomo.php']);
    _paq.push(['setSiteId', '2']);
    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
    g.async=true; g.src='//cdn.matomo.cloud/lisk.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
  })();
</script>
<!-- End Matomo Code -->
<!-- Matomo Tag Manager -->
<script>
  var _mtm = window._mtm = window._mtm || [];
  _mtm.push({'mtm.startTime': (new Date().getTime()), 'event': 'mtm.Start'});
  var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
  g.async=true; g.src='https://cdn.matomo.cloud/lisk.matomo.cloud/container_RUW6y8yf.js'; s.parentNode.insertBefore(g,s);
</script>
<!-- End Matomo Tag Manager -->
<link rel="icon" href="../../../_/img/favicon.png" type="image/x-icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="top-logo">
        <a href="../../.." class="lisk-logo"></a>
        <a href="../../.." class="docs-logo"></a>
      </div>
      <!--<a class="navbar-item" href="https://lisk.com/documentation">Lisk documentation</a>-->
        <div id="docsearch" class="navbar-menu search-box hide-for-print">
          <!--<input id="search-input-toolbar" type="text" placeholder="Search me ...">-->
        </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">APIs</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../api/lisk-node-rpc.html">Lisk node RPC API</a>
            <a class="navbar-item" href="../../../api/lisk-service-http.html">Lisk Service HTTP
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-rpc.html">Lisk Service RPC
              API</a>
            <a class="navbar-item" href="../../../api/lisk-service-pubsub.html">Lisk Service
              Pub/Sub API</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Explorers</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://lisk.observer/" target="_blank">Lisk Observer</a>
            <a class="navbar-item" href="https://liskscan.com/" target="_blank">LiskScan</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="../../../lisk-sdk/">Lisk SDK</a>
            <a class="navbar-item" href="../../../lisk-service/">Lisk Service</a>
            <a class="navbar-item" href="../../../lisk-core/">Lisk Core</a>
            <a class="navbar-item" href="https://lisk.com/wallet" target="_blank">Lisk Wallets</a>
          </div>
        </div>
        <button onclick="switch_style('toggle')" id="theme-toggle" class="theme-toggle navbar-item"></button>
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="toolbar" role="navigation">
  <button class="nav-toggle"></button>
  <div class="components-versions">
      <div class="page-components">
    <button class="component-menu-toggle" title="Show other documentations">Lisk Service</button>
    <div class="component-menu">
        <a class="component" href="../../../lisk-core/index.html">Lisk Core</a>
        <a class="component" href="../../../index.html">Lisk Documentation</a>
        <a class="component" href="../../../lisk-sdk/index.html">Lisk SDK</a>
        <a class="component is-current" href="../../index.html">Lisk Service</a>
    </div>
  </div>
    <span></span>
    <div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">0.7 (beta)</button>
  <div class="version-menu">
    <a class="version is-missing" href="../../index.html">0.6.6 (latest)</a>
    <a class="version is-current" href="index.html">0.7 (beta)</a>
  </div>
</div>
  </div>
  <span></span>
  <span></span>
    <a href="../../../index.html" class="home-link"></a>
  <nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Lisk Service</a></li>
    <li><a href="index.html">Configuration</a></li>
  </ul>
</nav>
    <div id="docsearch-toolbar" class="search-box hide-for-print toolbar-search">
      <!--<input id="search-input" type="text" placeholder="Search me ...">-->
    </div>
  <div class="edit-this-page"><a href="https://github.com/LiskHQ/lisk-service/edit/development/docs/antora/modules/ROOT/pages/configuration/index.adoc">Edit this Page</a></div>
</div>

<div class="body">
<div class="nav-container" data-component="lisk-service" data-version="0.7">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Lisk Service</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Setup</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/docker.html">Installation with Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../setup/source.html">Installation from source code</a>
  </li>
</ul>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Configuration</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="docker.html">Configuration with Docker</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="source.html">Configuration with PM2</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Management</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/snapshots.html">Applying database snapshots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/docker.html">Docker commands</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../management/source.html">PM2 commands</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Lisk Service</span>
    <span class="version">0.7 (beta)</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../lisk-core/index.html">Lisk Core</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-core/index.html">3.1.0 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-core/v4/index.html">4.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../index.html">Lisk Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../index.html">default</a>
        </li>
        <li class="version">
          <a href="../../../beta/index.html">beta</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../lisk-sdk/index.html">Lisk SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../lisk-sdk/index.html">5.2.2 (latest)</a>
        </li>
        <li class="version">
          <a href="../../../lisk-sdk/v6/index.html">6.0.0 (beta)</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">Lisk Service</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">0.6.6 (latest)</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">0.7 (beta)</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="3">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
      <h1 class="page">Lisk Service Configuration Reference</h1>
    <div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>On the <a href="../index.html" class="xref page">Introduction to Lisk Service</a> page, we have discussed the various <a href="../index.html#microservices" class="xref page">microservices</a> that combine to form Lisk Service.
On this page, we will thoroughly discuss the configuration options available for each service.</p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#default-configurations">Default configurations</a></li>
<li><a href="#microservice-configurations">Microservice configurations</a>
<ul class="sectlevel2">
<li><a href="#common-configurations">Common configurations</a></li>
<li><a href="#gateway">Gateway</a></li>
<li><a href="#blockchain-connector">Blockchain Connector</a></li>
<li><a href="#blockchain-coordinator">Blockchain Coordinator</a></li>
<li><a href="#blockchain-indexer">Blockchain Indexer</a>
<ul class="sectlevel3">
<li><a href="#database-snapshot-configuration">Database snapshot configuration</a></li>
</ul>
</li>
<li><a href="#blockchain-application-registry">Blockchain application registry</a></li>
<li><a href="#fee-estimator">Fee estimator</a></li>
<li><a href="#transaction-statistics">Transaction statistics</a></li>
<li><a href="#market">Market</a></li>
<li><a href="#export">Export</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="default-configurations"><a class="anchor" href="#default-configurations"></a>Default configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, a Lisk Service installation will have an <code>ecosystem.config.js</code> file with all the default configurations that could be used to run and manage the various microservices with <a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener">pm2</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The actual <a href="https://github.com/LiskHQ/lisk-service/blob/release/0.7.0/ecosystem.config.js" target="_blank" rel="noopener"><code><strong>ecosystem.config.js</strong></code></a> file for Lisk Service can be found in the <a href="https://github.com/LiskHQ/lisk-service" target="_blank" rel="noopener">lisk-service</a> GitHub repository.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The values of various environment variables are automatically picked by the microservices based on the installation environment.
Aside from that, many environment variables can be configured to meet the specific requirements, the details of which have been outlined with each microservice.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="microservice-configurations"><a class="anchor" href="#microservice-configurations"></a>Microservice configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this section, we discuss the common and specific configurations of all the microservices of Lisk Service.</p>
</div>
<div class="sect2">
<h3 id="common-configurations"><a class="anchor" href="#common-configurations"></a>Common configurations</h3>
<div class="paragraph">
<p>The common configurations described in this section apply to all the microservices within Lisk Service.</p>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker.
<strong>Must be identical for all the microservices.</strong>
Make sure that all microservices can connect with the message broker.
This could be a NATS or a Redis instance.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER_TIMEOUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inter-microservice request timeout in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_LOG_LEVEL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set the application logging level; Available options are <code>trace</code>, <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>, and <code>fatal</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_LOG_STDOUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable posting logs to the standard output stream.
Accepted values are <code>true</code> and <code>false</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_LOG_CONSOLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable posting logs to the JavaScript <code>console.log()</code> output (blocking).
This property should be enabled only for debugging purposes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_LOG_FILE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">File path to capture the logs.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./logs/app.log</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_LOG_GELF</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable log output in GELF for remote logging.
For example, Graylog: <code>127.0.0.1:12201/udp</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>127.0.0.1:12201/udp</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DOCKER_HOST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used by the Docker CLI to determine the host to connect to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>local</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example of two microservices having the same environment variables</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-gateway',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_LOG_LEVEL: 'info',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_CONSOLE: 'false',
        // SERVICE_LOG_STDOUT: 'true',
        // SERVICE_LOG_GELF: 'false',
        // SERVICE_LOG_FILE: 'false',
        // [...]
      },
    },
    {
      name: 'lisk-service-transaction-statistics',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_LOG_LEVEL: 'info',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_CONSOLE: 'false',
        // SERVICE_LOG_STDOUT: 'true',
        // SERVICE_LOG_GELF: 'false',
        // SERVICE_LOG_FILE: 'false',
        // [...]
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="gateway"><a class="anchor" href="#gateway"></a>Gateway</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PORT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that provides the possibility to connect with Lisk Service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>9901</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HOST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the host.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>127.0.0.1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JSON_RPC_STRICT_MODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures that JSON-RPC accepts a valid JSON-RPC 2.0 envelope.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_HTTP_API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables particular HTTP API endpoints.
Directories (under <code>gateway/apis/</code>) containing the API method definitions.
Must be listed as comma-separated values.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>http-status,http-version3,http-exports</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_WS_API</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables specified WebSocket API namespaces.
Must be listed as comma-separated values.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>blockchain,rpc-v3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_GATEWAY_REDIS_VOLATILE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the volatile cache storage (Redis).
Used to cache RPC requests.
Required when <code>ENABLE_REQUEST_CACHING</code> is enabled.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GATEWAY_DEPENDENCIES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Describes the microservices on which the <code>gateway</code> service depends.
The list can be expressed as a CSV.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>indexer,connector</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_REVERSE_PROXY_TIMEOUT_SETTINGS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to enforce the <code>headersTimeout</code> and <code>keepAliveTimeout</code> settings on the API server.
Enabling this might be helpful when deploying Lisk Service behind a load balancer or a reverse proxy.
Check this <a href="https://moleculer.services/docs/0.14/faq.html#Why-am-I-getting-502-Bad-Gateway-when-api-gateway-is-behind-ALB-on-AWS" target="_blank" rel="noopener">FAQ</a> for more information.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_KEEP_ALIVE_TIMEOUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the number of microseconds the gateway will wait before closing an idle connection.
To enable, ensure <code>ENABLE_REVERSE_PROXY_TIMEOUT_SETTINGS</code> is set to true, or <code>HTTP_RATE_LIMIT_NUM_KNOWN_PROXIES</code> is set to greater than 0.
By default, it is set to <code>65000</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>65000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_HEADERS_TIMEOUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the maximum number of microseconds for the gateway to send HTTP response headers after the client&#8217;s request.
To enable, ensure <code>ENABLE_REVERSE_PROXY_TIMEOUT_SETTINGS</code> is set to <code>true</code>, or <code>HTTP_RATE_LIMIT_NUM_KNOWN_PROXIES</code> is set to greater than <code>0</code>.
Please ensure that the <code>HTTP_HEADERS_TIMEOUT</code> is set higher than the <code>HTTP_KEEP_ALIVE_TIMEOUT</code>.
By default, it is set to <code>66000</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>66000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WS_RATE_LIMIT_ENABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable the WebSocket rate limit, this environment variable is required to be <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WS_RATE_LIMIT_CONNECTIONS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Once the rate limit is enabled, this variable contains the number of connections per second.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>WS_RATE_LIMIT_DURATION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the duration (in seconds) for which the WS rate should be limited.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_REQUEST_CACHING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable RPC response caching, this environment variable is required to be <code>true</code>.
Requires <code>SERVICE_GATEWAY_REDIS_VOLATILE</code> to be set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_RATE_LIMIT_ENABLE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable the HTTP rate limit, this environment variable is required to be <code>true</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_RATE_LIMIT_CONNECTIONS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the maximum number of HTTP requests during a period.
Defaults to 200 requests per window.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_RATE_LIMIT_WINDOW</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the time for which a record of requests should be kept in the memory (in seconds).
The default duration of a window is 10 seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_HTTP_CACHE_CONTROL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To enable response caching, this environment variable is required to be <code>true</code>.
This would include the <code>Cache-Control</code> header within the responses.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_CACHE_CONTROL_DIRECTIVES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>Cache-Control</code> HTTP directive can be overridden with this environment variable.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>public, max-age=10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CORS_ALLOWED_ORIGIN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows request from the comma-separated string of origins.
By default, it is set to <code>*</code> which allows requests from all origins.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_RATE_LIMIT_ENABLE_X_FORWARDED_FOR</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When set to true, the rate-limiting algorithm considers the <code>X-Forwarded-For</code> header value to determine the client&#8217;s IP address for rate-limiting purposes.
By default, it is set to <code>false</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HTTP_RATE_LIMIT_NUM_KNOWN_PROXIES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the number of proxies that exist between the gateway and the external client application, enabling accurate identification of the client&#8217;s IP address for rate-limiting.
Requires <code>HTTP_RATE_LIMIT_ENABLE_X_FORWARDED_FOR</code> to be enabled.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_UPDATE_READINESS_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to update the readiness status.
By default, it is set to 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_UPDATE_READINESS_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to update the readiness status.
By default, it is set to run every minute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * * * *</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Gateway microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
  // Configuration for other microservices.
    {
      name: "lisk-service-gateway",
      // [...]
      env: {
        PORT: 9901,
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_GATEWAY_REDIS_VOLATILE: 'redis://127.0.0.1:6379/5',
        ENABLE_HTTP_API: 'http-status,http-version3,http-exports',
        ENABLE_WS_API: 'blockchain,rpc-v3',
        GATEWAY_DEPENDENCIES: 'indexer,connector',
        WS_RATE_LIMIT_ENABLE: false,
        WS_RATE_LIMIT_CONNECTIONS: 5,
        WS_RATE_LIMIT_DURATION: 1, // in seconds
        ENABLE_REQUEST_CACHING: true,
        JSON_RPC_STRICT_MODE: false,
        HTTP_RATE_LIMIT_ENABLE: false,
        HTTP_RATE_LIMIT_CONNECTIONS: 200,
        HTTP_RATE_LIMIT_WINDOW: 10, // in seconds
        HTTP_CACHE_CONTROL_DIRECTIVES: 'public, max-age=10',
        ENABLE_HTTP_CACHE_CONTROL: true,
        HTTP_RATE_LIMIT_ENABLE_X_FORWARDED_FOR: false,
        HTTP_RATE_LIMIT_NUM_KNOWN_PROXIES: 0,
        // ENABLE_REVERSE_PROXY_TIMEOUT_SETTINGS: true
        // HTTP_KEEP_ALIVE_TIMEOUT: 65000,
        // HTTP_HEADERS_TIMEOUT: 66000,
        // CORS_ALLOWED_ORIGIN: '*',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
        // JOB_INTERVAL_UPDATE_READINESS_STATUS: 0,
        // JOB_SCHEDULE_UPDATE_READINESS_STATUS: '* * * * *',
    },
  },
  // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="blockchain-connector"><a class="anchor" href="#blockchain-connector"></a>Blockchain Connector</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LISK_APP_WS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to connect with the Lisk application node over WebSocket.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ws://127.0.0.1:7887</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>USE_LISK_IPC_CLIENT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to enable IPC-based connection to the Lisk application node.
Requires <code>LISK_APP_DATA_PATH</code> to be set.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LISK_APP_DATA_PATH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data path to connect with the Lisk application node over IPC.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>~/.lisk/lisk-core</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GEOIP_JSON</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the GeoIP server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://geoip.lisk.com/json" target="_blank" rel="noopener">GeoIP Server&#8217;s URL</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GENESIS_BLOCK_URL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the Lisk SDK-based application&#8217;s genesis block.
Only to be used when the genesis block is large enough to be transmitted over API calls within the timeout.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://downloads.lisk.com/lisk/mainnet/genesis_block.json.tar.gz" target="_blank" rel="noopener">Genesis block URL</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_BLOCK_CACHING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to enable block caching.
Enabled by default.
To disable it, set it to <code>false</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPIRY_IN_HOURS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expiry time in hours for block cache.
By default, it is set to <code>12</code> hours.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>12</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLIENT_INSTANTIATION_MAX_WAIT_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum wait time (in milliseconds) for the API client instantiation before forcefully instantiating a new client when getApiClient is invoked.
By default, it is set to <code>100</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLIENT_INSTANTIATION_RETRY_INTERVAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry interval (in milliseconds) to invoke instantiate API client when getApiClient is invoked.
By default, it is set to <code>1</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CLIENT_ALIVE_ASSUMPTION_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Interval (in milliseconds) for which the WS API Client is assumed to be alive since the last ping/pong success check.
By default, it is set to <code>5000</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>HEARTBEAT_ACK_MAX_WAIT_TIME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum time (in milliseconds) within which the checkIsClientAlive&#8217;s algorithm expects a corresponding <code>pong</code> for the <code>ping</code> sent to the WS server.
By default, it is set to <code>1000</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENDPOINT_INVOKE_MAX_RETRIES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of endpoint invocation request retries to the node.
By default, it is set to <code>5</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENDPOINT_INVOKE_RETRY_DELAY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay (in milliseconds) between each endpoint invocation request retry.
By default, it is set to <code>10</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CONNECTOR_EXIT_DELAY_IN_HOURS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay (in hours) after which the blockchain-connector microservice exits. The service should restart automatically if deployed using Docker or PM2.
To be removed eventually.
To enable it, set it higher than <code>0</code>.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_CACHE_CLEANUP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to clean up block cache.
By default, it is set to 0.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_CACHE_CLEANUP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to clean up block cache.
By default, it is set to run every 12 hours.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0 */12 * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_PEERS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh the peers' list.
By default, it is set to run every <code>60</code> seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>60</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_PEERS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh the peers' list.
By default, it is set to an empty string <code>''</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Blockchain Connector microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: "lisk-service-blockchain-connector",
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        LISK_APP_WS: 'ws://127.0.0.1:7887',
        GEOIP_JSON: 'https://geoip.lisk.com/json',
        // ENABLE_BLOCK_CACHING: true,
        // EXPIRY_IN_HOURS: 12,
        // USE_LISK_IPC_CLIENT: true,
        // LISK_APP_DATA_PATH: '~/.lisk/lisk-core',
        // ENABLE_TESTING_MODE: false,
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
        // GENESIS_BLOCK_URL: 'https://downloads.lisk.com/lisk/mainnet/genesis_block.json.tar.gz',
        // JOB_INTERVAL_CACHE_CLEANUP: 0,
        // JOB_SCHEDULE_CACHE_CLEANUP: '0 */12 * * *',
        // JOB_INTERVAL_REFRESH_PEERS: 60,
        // JOB_SCHEDULE_REFRESH_PEERS: '',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="blockchain-coordinator"><a class="anchor" href="#blockchain-coordinator"></a>Blockchain Coordinator</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_MESSAGE_QUEUE_REDIS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the Redis instance hosting the job queue to schedule the block indexing jobs.
Must match the value supplied for the <code>indexer</code> microservice.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_INDEX_MISSING_BLOCKS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to index missing blocks.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_INDEX_MISSING_BLOCKS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to index missing blocks.
By default, it is set to run every 5 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/5 * * * *</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Coordinator microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-blockchain-coordinator',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_MESSAGE_QUEUE_REDIS: 'redis://127.0.0.1:6379/3',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
        // JOB_INTERVAL_INDEX_MISSING_BLOCKS: 0,
        // JOB_SCHEDULE_INDEX_MISSING_BLOCKS: '*/5 * * * *',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="blockchain-indexer"><a class="anchor" href="#blockchain-indexer"></a>Blockchain Indexer</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_INDEXER_MYSQL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection string for the primary MySQL (read/write) instance that the microservice connects to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mysql://lisk:password@127.0.0.1:3306/lisk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_MESSAGE_QUEUE_REDIS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the job queue to process the scheduled indexing jobs by the Blockchain Coordinator (Redis).
Must match the value supplied for the <code>coordinator</code> microservice.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_INDEXER_REDIS_VOLATILE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the volatile cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_DATA_RETRIEVAL_MODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to enable the Data Service mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_INDEXING_MODE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to enable the Data Indexing mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_PERSIST_EVENTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to permanently maintain the events in the MySQL database.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_INDEXER_CACHE_REDIS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_INDEXER_MYSQL_READ_REPLICA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection string for the replicated MySQL (read-only) instance that the microservice connects to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mysql://lisk:password@127.0.0.1:3306/lisk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LISK_STATIC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of Lisk static assets.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://static-data.lisk.com" class="bare">https://static-data.lisk.com</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_DELETE_SERIALIZED_EVENTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to delete serialized events.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_DELETE_SERIALIZED_EVENTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to delete serialized events.
By default, it is set to run every 5 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/5 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_VALIDATORS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh validators cache.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_VALIDATORS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh validators cache.
By default, it is set to run every 5 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/5 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_VALIDATE_VALIDATORS_RANK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to validate the rank for all the validators.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_VALIDATE_VALIDATORS_RANK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to validate the rank for all the validators.
By default, it is set to run every <code>15</code> minutes and starts at <code>4</code> minutes past the hour.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>4-59/15 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_INDEX_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh indexing status.
By default, it is set to run every <code>10</code> seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_INDEX_STATUS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh indexing status.
By default, it is set to an empty string <code>''</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_BLOCKCHAIN_APPS_STATS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh blockchain application statistics.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_BLOCKCHAIN_APPS_STATS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh blockchain application statistics.
By default, it is set to run every 15 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/15 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_ACCOUNT_KNOWLEDGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh account knowledge.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_ACCOUNT_KNOWLEDGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh account knowledge.
By default, it is set to run every 15 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/15 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_DELETE_FINALIZED_CCU_METADATA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to delete finalized CCU metadata.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_DELETE_FINALIZED_CCU_METADATA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to delete finalized CCU metadata.
By default, it is set to run once a day at 02:00 am.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0 2 * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_TRIGGER_ACCOUNT_UPDATES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to trigger account updates.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_TRIGGER_ACCOUNT_UPDATES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to trigger account updates.
By default, it is set to run every 15 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/15 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ESTIMATES_BUFFER_BYTES_LENGTH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Transaction buffer bytes to consider when estimating the transaction fees.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ACCOUNT_BALANCE_UPDATE_BATCH_SIZE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of accounts for which the balance index is updated at a time.
By default, it is set to <code>1000</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INDEX_BLOCKS_QUEUE_SCHEDULED_JOB_MAX_COUNT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of jobs (in active and waiting state) allowed in the block indexing queue.
By default, it is set to <code>100000</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>100000</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MAINCHAIN_SERVICE_URL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mainchain service URL for custom deployments.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://service.lisk.com" class="bare">https://service.lisk.com</a></code></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="database-snapshot-configuration"><a class="anchor" href="#database-snapshot-configuration"></a>Database snapshot configuration</h4>
<div class="paragraph">
<p>To accelerate the indexing process, the blockchain-indexer microservice also supports automatic download and an application of a snapshot to the MySQL/MariaDB databases. The following environment variables in the table below can be used to configure the same.</p>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_APPLY_SNAPSHOT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable or disable auto-apply snapshot feature. By default, the value is false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DURABILITY_VERIFY_FREQUENCY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency in milliseconds to verify if a block is indexed or rolled-back successfully. By default, it is set to 1.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INDEX_SNAPSHOT_URL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Custom snapshot download URL (expected to end with sql.gz).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://snapshots.lisk.io/mainnet/service.sql.gz" class="bare">https://snapshots.lisk.io/mainnet/service.sql.gz</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_SNAPSHOT_ALLOW_INSECURE_HTTP</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to enable downloading the snapshot from an (unsecured) HTTP URL. By default, this is set to false.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Blockchain Indexer microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-blockchain-indexer',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_INDEXER_CACHE_REDIS: 'redis://127.0.0.1:6379/1',
        SERVICE_INDEXER_REDIS_VOLATILE: 'redis://127.0.0.1:6379/2',
        SERVICE_MESSAGE_QUEUE_REDIS: 'redis://127.0.0.1:6379/3',
        SERVICE_INDEXER_MYSQL: 'mysql://lisk:password@127.0.0.1:3306/lisk',
        ENABLE_DATA_RETRIEVAL_MODE: 'true',
        ENABLE_INDEXING_MODE: 'true',
        ENABLE_PERSIST_EVENTS: 'false',
        // ENABLE_APPLY_SNAPSHOT: 'false',
        // DURABILITY_VERIFY_FREQUENCY: 1,
        // INDEX_SNAPSHOT_URL: '',
        // ENABLE_SNAPSHOT_ALLOW_INSECURE_HTTP: 'true',
        // SERVICE_INDEXER_MYSQL_READ_REPLICA: 'mysql://lisk:password@127.0.0.1:3306/lisk',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: 'false',
        // SERVICE_LOG_STDOUT: 'true',
        // SERVICE_LOG_GELF: 'false',
        // SERVICE_LOG_FILE: 'false',
        // DOCKER_HOST: 'local',
        // MAINCHAIN_SERVICE_URL: 'https://service.lisk.com',
        // LISK_STATIC: 'https://static-data.lisk.com',
        // DEVNET_MAINCHAIN_URL: 'http://devnet-service.liskdev.net:9901',
        // ESTIMATES_BUFFER_BYTES_LENGTH: 0,
        // ACCOUNT_BALANCE_UPDATE_BATCH_SIZE: 1000,
        // INDEX_BLOCKS_QUEUE_SCHEDULED_JOB_MAX_COUNT: 100000,
        // JOB_INTERVAL_DELETE_SERIALIZED_EVENTS: 0,
        // JOB_SCHEDULE_DELETE_SERIALIZED_EVENTS: '*/5 * * * *',
        // JOB_INTERVAL_REFRESH_VALIDATORS: 0,
        // JOB_SCHEDULE_REFRESH_VALIDATORS: '*/5 * * * *',
        // JOB_INTERVAL_VALIDATE_VALIDATORS_RANK: 0,
        // JOB_SCHEDULE_VALIDATE_VALIDATORS_RANK: '4-59/15 * * * *',
        // JOB_INTERVAL_REFRESH_INDEX_STATUS: 10,
        // JOB_SCHEDULE_REFRESH_INDEX_STATUS: '',
        // JOB_INTERVAL_REFRESH_BLOCKCHAIN_APPS_STATS: 0,
        // JOB_SCHEDULE_REFRESH_BLOCKCHAIN_APPS_STATS: '*/15 * * * *',
        // JOB_INTERVAL_REFRESH_ACCOUNT_KNOWLEDGE: 0,
        // JOB_SCHEDULE_REFRESH_ACCOUNT_KNOWLEDGE: '*/15 * * * *',
        // JOB_INTERVAL_DELETE_FINALIZED_CCU_METADATA: 0,
        // JOB_SCHEDULE_DELETE_FINALIZED_CCU_METADATA: '0 2 * * *',
        // JOB_INTERVAL_TRIGGER_ACCOUNT_UPDATES: 0,
        // JOB_SCHEDULE_TRIGGER_ACCOUNT_UPDATES: '*/15 * * * *',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect2">
<h3 id="blockchain-application-registry"><a class="anchor" href="#blockchain-application-registry"></a>Blockchain application registry</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_APP_REGISTRY_MYSQL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection string of the MySQL instance that the microservice connects to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mysql://lisk:password@127.0.0.1:3306/lisk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_REBUILD_INDEX_AT_INIT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Boolean flag to truncate the index and rebuild at application init.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DEFAULT_APPS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default blockchain applications.
By default, it is set to <code>lisk_mainchain</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lisk_mainchain</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_DELETE_NON_METADATA_FILES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to delete non-metadata files.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_DELETE_NON_METADATA_FILES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to delete non-metadata files.
By default, it is set to run every day at midnight.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0 0 * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_UPDATE_METADATA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to update off-chain metadata.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_UPDATE_METADATA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to update off-chain metadata.
By default, it is set to run every <code>10</code> minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/10 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GITHUB_APP_REGISTRY_REPO</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of <code>app-registry</code> GitHub repository.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code><a href="https://github.com/LiskHQ/app-registry" class="bare">https://github.com/LiskHQ/app-registry</a></code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GITHUB_APP_REGISTRY_REPO_BRANCH</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Relevant branch for <code>app-registry</code> GitHub repository.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>main</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Blockchain App Registry microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-blockchain-app-registry',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_APP_REGISTRY_MYSQL: 'mysql://lisk:password@127.0.0.1:3306/lisk',
        ENABLE_REBUILD_INDEX_AT_INIT: false,
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
        // GITHUB_APP_REGISTRY_REPO: 'https://github.com/LiskHQ/app-registry',
        // GITHUB_APP_REGISTRY_REPO_BRANCH: 'main',
        // JOB_INTERVAL_DELETE_NON_METADATA_FILES: 0,
        // JOB_SCHEDULE_DELETE_NON_METADATA_FILES: '0 0 * * *',
        // JOB_INTERVAL_UPDATE_METADATA: 0,
        // JOB_SCHEDULE_UPDATE_METADATA: '*/10 * * * *',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="fee-estimator"><a class="anchor" href="#fee-estimator"></a>Fee estimator</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_FEE_ESTIMATOR_CACHE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_FEE_ESTIMATOR_QUICK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable quick algorithm for fee estimation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ENABLE_FEE_ESTIMATOR_FULL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable full algorithm for fee estimation.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FEE_EST_COLD_START_BATCH_SIZE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the number of blocks that are analyzed during cold start.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FEE_EST_DEFAULT_START_BLOCK_HEIGHT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the block height at which the dynamic fee estimation algorithm starts.
By default, it starts at the genesis height in full mode and the current block height at the moment of application initialization in quick mode.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FEE_EST_EMA_BATCH_SIZE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estimated moving average algorithm batch size.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FEE_EST_EMA_DECAY_RATE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estimated moving average algorithm decay rate.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0.5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FEE_EST_WAVG_DECAY_PERCENTAGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Estimated moving average algorithm weighted average decay percentage.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>10</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Fee Estimator microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-fee-estimator',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_FEE_ESTIMATOR_CACHE: 'redis://127.0.0.1:6379/1',
        ENABLE_FEE_ESTIMATOR_QUICK: true,
        ENABLE_FEE_ESTIMATOR_FULL: false,
        // FEE_EST_COLD_START_BATCH_SIZE: 1,
        // FEE_EST_DEFAULT_START_BLOCK_HEIGHT: 1,
        // FEE_EST_EMA_BATCH_SIZE: 20,
        // FEE_EST_EMA_DECAY_RATE: 0.5,
        // FEE_EST_WAVG_DECAY_PERCENTAGE: 10,
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="transaction-statistics"><a class="anchor" href="#transaction-statistics"></a>Transaction statistics</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_STATISTICS_MYSQL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection string of the MySQL instance that the microservice connects to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mysql://lisk:password@127.0.0.1:3306/lisk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_STATISTICS_REDIS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TRANSACTION_STATS_HISTORY_LENGTH_DAYS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of days for which the transaction statistics need to be built in retrospect to the application init.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>366</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_STATISTICS_MYSQL_READ_REPLICA</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection string (read-only) of the replicated MySQL instance that the microservice connects to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mysql://reader:password@127.0.0.1:3307/lisk</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_TRANSACTION_STATS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh transaction statistics.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_TRANSACTION_STATS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh transaction statistics.
By default, it is set to run every 30 minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>*/30 * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_VERIFY_TRANSACTION_STATS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to verify if the transaction statistics have been built correctly.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_VERIFY_TRANSACTION_STATS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to verify if the transaction statistics have been built correctly.
By default, it is set to run every 3rd hour after the first <code>15</code> minutes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>15 */3 * * *</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Transaction Statistics microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-transaction-statistics',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_STATISTICS_REDIS: 'redis://127.0.0.1:6379/1',
        SERVICE_STATISTICS_MYSQL: 'mysql://lisk:password@127.0.0.1:3306/lisk',
        TRANSACTION_STATS_HISTORY_LENGTH_DAYS: 366,
        // SERVICE_STATISTICS_MYSQL_READ_REPLICA: 'mysql://reader:password@127.0.0.1:3307/lisk',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
        // JOB_INTERVAL_REFRESH_TRANSACTION_STATS: 0,
        // JOB_SCHEDULE_REFRESH_TRANSACTION_STATS: '*/30 * * * *',
        // JOB_INTERVAL_VERIFY_TRANSACTION_STATS: 0,
        // JOB_SCHEDULE_VERIFY_TRANSACTION_STATS: '15 */3 * * *',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="market"><a class="anchor" href="#market"></a>Market</h3>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_MARKET_REDIS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/2</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_MARKET_FIAT_CURRENCIES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fiat currencies are used for price calculation.
All Fiat currencies used here need to be comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EUR,USD,CHF,GBP,RUB</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_MARKET_TARGET_PAIRS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exchange rates exposed to the Gateway.
The values listed here must be comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>LSK_BTC,LSK_EUR,BTC_CHF</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXCHANGERATESAPI_IO_API_KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional API key for <a href="https://exchangeratesapi.io/" class="bare">https://exchangeratesapi.io/</a>.
The <code>/market/prices</code> endpoint will respond with additional data, specifically the exchange rates for various cryptocurrencies in other fiat currencies.
The free plan would suffice for Lisk Service.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_PRICES_BINANCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh prices from Binance.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_PRICES_BINANCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh prices from Binance.
By default, it is set to run every minute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_PRICES_BITTREX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh prices from Bittrex.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_PRICES_BITTREX</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh prices from Bittrex.
By default, it is set to run every minute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_PRICES_EXCHANGERATESAPI</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh prices from exchangeratesapi.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_PRICES_EXCHANGERATESAPI</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh prices from exchangeratesapi.
By default, it is set to run every minute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_REFRESH_PRICES_KRAKEN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to refresh prices from Kraken.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_REFRESH_PRICES_KRAKEN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to refresh prices from Kraken.
By default, it is set to run every minute.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>* * * * *</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_UPDATE_PRICES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to update market prices.
By default, it is set to run every <code>5</code> seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_UPDATE_PRICES</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to update market prices.
By default, it is set to an empty string <code>''</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Market microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-market',
      // [...]
      env: {
        // --- Remember to set the properties below
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_MARKET_REDIS: 'redis://127.0.0.1:6379/2',
        SERVICE_MARKET_FIAT_CURRENCIES: 'EUR,USD,CHF,GBP,RUB,PLN,JPY,AUD,GBP,INR',
        SERVICE_MARKET_TARGET_PAIRS: 'LSK_BTC,LSK_EUR,LSK_USD,LSK_CHF,LSK_PLN,LSK_JPY,LSK_AUD,LSK_GBP,LSK_INR,BTC_EUR,BTC_USD,BTC_CHF',
        // EXCHANGERATESAPI_IO_API_KEY: ''
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: false,
        // SERVICE_LOG_STDOUT: true,
        // SERVICE_LOG_GELF: false,
        // SERVICE_LOG_FILE: false,
        // DOCKER_HOST: 'local',
        // JOB_INTERVAL_REFRESH_PRICES_BINANCE: 0,
        // JOB_SCHEDULE_REFRESH_PRICES_BINANCE: '* * * * *',
        // JOB_INTERVAL_REFRESH_PRICES_BITTREX: 0,
        // JOB_SCHEDULE_REFRESH_PRICES_BITTREX: '* * * * *',
        // JOB_INTERVAL_REFRESH_PRICES_EXCHANGERATESAPI: 0,
        // JOB_SCHEDULE_REFRESH_PRICES_EXCHANGERATESAPI: '* * * * *',
        // JOB_INTERVAL_REFRESH_PRICES_KRAKEN: 0,
        // JOB_SCHEDULE_REFRESH_PRICES_KRAKEN: '* * * * *',
        // JOB_INTERVAL_UPDATE_PRICES: 5,
        // JOB_SCHEDULE_UPDATE_PRICES: '',
      },
    },
    // Configuration for other microservices.
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="export"><a class="anchor" href="#export"></a>Export</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code><strong>EXPORT_S3_</strong>*</code> variables should only be configured when using AWS S3 instead of a local file system.
For the local file system, use <code><strong>SERVICE_EXPORT_PARTIALS</strong></code> and <code><strong>SERVICE_EXPORT_STATIC</strong></code> variables.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stripes-hover stretch">
<colgroup>
<col style="width: 2%;">
<col style="width: 1%;">
<col>
<col>
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Environment variable</th>
<th class="tableblock halign-left valign-top">Datatype</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_BROKER</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the microservice message broker (NATS or Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_EXPORT_REDIS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the permanent cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/3</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_EXPORT_REDIS_VOLATILE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the volatile cache storage (Redis).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>redis://127.0.0.1:6379/4</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_EXPORT_PARTIALS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local filepath where the partial (per day) transaction history files for a specified account are temporarily cached.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./data/partials</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>SERVICE_EXPORT_STATIC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Local filepath where the aggregated transaction history files, as requested by the user are stored.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>./data/static</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_ENDPOINT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket endpoint.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>s3.amazonaws.com</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_ACCESS_KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket access key for the specified endpoint.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_SECRET_KEY</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket secret key.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_SESSION_TOKEN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket session token.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_REGION</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The region where Amazon S3 bucket is hosted. Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eu-central-1</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_BUCKET_NAME</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket name. Optional.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>export</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_BUCKET_NAME_PARTIALS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket where the partial (per day) transaction history files for a specified account are temporarily cached.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>partials</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_BUCKET_NAME_STATIC</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket where the aggregated transaction history files, as requested by the user are stored.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exports</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>EXPORT_S3_BUCKET_NAME_EXPORTS</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Amazon S3 bucket where the aggregated transaction history files, as requested by the user are stored.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exports</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_INTERVAL_CACHE_PURGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run interval to clean up cache.
By default, it is set to <code>0</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>0</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JOB_SCHEDULE_CACHE_PURGE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">string</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job run cron schedule to clean up the cache.
By default, it is set to run daily at 04:45 am.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>45 4 * * *</code></p></td>
</tr>
</tbody>
</table>
<details>
<summary class="title">Sample Configurations</summary>
<div class="content">
<div class="listingblock">
<div class="title">Example environment variables for the Export microservice</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-js hljs" data-lang="js">module.exports = {
  apps: [
    // Configuration for other microservices.
    {
      name: 'lisk-service-export',
      // [...]
      env: {
        SERVICE_BROKER: 'redis://127.0.0.1:6379/0',
        SERVICE_EXPORT_REDIS: 'redis://127.0.0.1:6379/3',
        SERVICE_EXPORT_REDIS_VOLATILE: 'redis://127.0.0.1:6379/4',
        // SERVICE_EXPORT_PARTIALS: './data/partials',
        // EXPORT_S3_BUCKET_NAME_PARTIALS: 'partials',
        // SERVICE_EXPORT_STATIC: './data/static',
        // EXPORT_S3_BUCKET_NAME_EXPORTS: 'exports',
        // SERVICE_BROKER_TIMEOUT: 10,
        // SERVICE_LOG_LEVEL: 'info',
        // SERVICE_LOG_CONSOLE: 'false',
        // SERVICE_LOG_STDOUT: 'true',
        // SERVICE_LOG_GELF: 'false',
        // SERVICE_LOG_FILE: 'false',
        // DOCKER_HOST: 'local',
        // EXPORT_S3_ENDPOINT: 's3.amazonaws.com',
        // EXPORT_S3_ACCESS_KEY: '',
        // EXPORT_S3_SECRET_KEY: '',
        // EXPORT_S3_SESSION_TOKEN: '',
        // EXPORT_S3_REGION: 'eu-central-1',
        // EXPORT_S3_BUCKET_NAME: 'export',
        // JOB_INTERVAL_CACHE_PURGE: 0,
        // JOB_SCHEDULE_CACHE_PURGE: '45 4 * * *',
      },
    },
  ],
};</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
  <nav class="pagination">
  <span class="prev"><a href="../setup/source.html">Installation from source code</a></span>
  <span class="next"><a href="docker.html">Configuration with Docker</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footerdiv">
    <p>© 2023 Lisk Foundation</p>
    <!-- <div class="community-section">
      <p class="community-section__text">Follow Lisk on: </p>
      <div class="community-section__icons"> -->
    <div class="community_icons">
      <a href="https://lisk.chat" title="Discord" target="_blank" class="footer_icon icon-discord"><p>Discord</p></a>
      <a href="https://dev.lisk.com" title="Discourse" target="_blank" class="footer_icon icon-discourse"><p>Discourse</p></a>
      <a href="https://github.com/LiskHQ" title="GitHub" target="_blank" class="footer_icon icon-github"><p>GitHub</p></a>
      <!--    </div> -->
    </div>
  </div>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/glossary.js"></script>
<script async src="../../../_/js/vendor/tabs-block-behaviour.js"></script>
<script async src="../../../_/js/vendor/swagger-ui.js"></script>
<script async src="../../../_/js/vendor/component-versions.js"></script>
<script src="../../../_/js/vendor/custom.js"></script>
  <script src="../../../_/js/vendor/docsearch.js"></script>
  <!--<script src="../../../_/js/vendor/docsearch.min.js"></script>-->
  <!--<script src="https://cdn.jsdelivr.net/npm/@docsearch/js@alpha"></script>-->
  <script>
    docsearch({
      container: '#docsearch',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
    docsearch({
      container: '#docsearch-toolbar',
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search'
    });
  </script>
  <!--<script>
    function focusSearchInput () { document.querySelector('#search-input').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInput()
    window.addEventListener('load', focusSearchInput)
  </script>-->
  <!--  <script>
    function focusSearchInputToolbar () { document.querySelector('#search-input-toolbar').focus() }
    var search = docsearch({
        appId: 'C4SU57KGV9',
      apiKey: '55aa8709b04eb62f08f87571cf77547c',
      indexName: 'lisk-docs-search',
      inputSelector: '#search-input-toolbar',
      autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
      algoliaOptions: { hitsPerPage: 10 }
    }).autocomplete
    search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
    focusSearchInputToolbar()
    window.addEventListener('load', focusSearchInputToolbar)
  </script>-->

  </body>
</html>
